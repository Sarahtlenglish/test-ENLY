<!-- ENLY Beregner - Professionel Version -->
<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <title>ENLY! En elaftale der betaler sig</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --pink: #e97cab;
      --pink-light: #f5a3c7;
      --yellow: #ffe55c;
      --yellow-dark: #f5d500;
      --black: #111;
      --white: #ffffff;
      --gray: #f5f5f5;
      --gray-dark: #666;
      --radius: 16px;
      --shadow: 10px 10px rgba(0,0,0,1);
    }
    
    * { 
      box-sizing: border-box; 
      margin: 0;
      padding: 0;
    }
    
    body { 
      font-family: 'Poppins', system-ui, -apple-system, sans-serif; 
      background: var(--pink); 
      margin: 0; 
      padding: 0; 
      color: var(--black);
      min-height: 100vh;
      line-height: 1.6;
    }
    
    .main-container {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      position: relative;
      overflow: hidden;
    }
    
    .header {
      position: relative;
      padding: 24px;
      z-index: 10;
    }
    
    .brand {
      font-size: 32px;
      font-weight: 800;
      color: var(--yellow);
      text-shadow: 2px 2px 0px var(--black);
      margin-bottom: 0;
    }
    
    .header-buttons {
      position: absolute;
      top: 24px;
      right: 24px;
      display: flex;
      gap: 12px;
      z-index: 20;
    }
    
    .header-btn {
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    .header-btn.secondary {
      background: var(--white);
      color: var(--black);
    }
    
    .header-btn.primary {
      background: var(--black);
      color: var(--white);
    }
    
    .header-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(0,0,0,0.2);
    }
    
    .yellow-blob {
      position: absolute;
      top: -50px;
      right: -50px;
      width: 200px;
      height: 200px;
      background: var(--yellow);
      border-radius: 50%;
      z-index: 5;
    }
    
    .content-area {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 24px;
      position: relative;
      z-index: 10;
    }
    
    .calculator-container {
      background: var(--white);
      box-shadow: var(--shadow);
      padding: 40px;
      max-width: 800px;
      width: 100%;
      position: relative;
    }
    
    .step {
      display: none;
    }
    
    .step.active {
      display: block;
    }
    
    .step-title {
      font-size: 28px;
      font-weight: 700;
      color: var(--black);
      margin-bottom: 16px;
      text-align: center;
    }
    
    .step-subtitle {
      font-size: 16px;
      color: var(--gray-dark);
      margin-bottom: 32px;
      text-align: center;
    }
    
    .info-icon {
      display: inline-block;
      width: 20px;
      height: 20px;
      background: var(--gray-dark);
      color: var(--white);
      border-radius: 50%;
      text-align: center;
      line-height: 20px;
      font-size: 12px;
      font-weight: bold;
      margin-left: 8px;
      vertical-align: middle;
    }
    
    .options-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 32px 0;
    }
    
    .option-card {
      background: var(--white);
      border: 3px solid var(--gray);
      border-radius: var(--radius);
      padding: 24px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }
    
    .option-card:hover {
      border-color: var(--yellow);
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
    }
    
    .option-card.selected {
      border-color: var(--black);
      background: var(--gray);
    }
    
    .option-icon {
      width: 100%;
      height: 120px;
      object-fit: contain;
      display: block;
    }
    
    .option-text {
      font-size: 16px;
      font-weight: 600;
      color: var(--black);
    }
    
    .people-selector {
      background: var(--white);
      border: 2px solid var(--black);
      border-radius: var(--radius);
      padding: 32px;
      text-align: center;
      margin: 32px 0;
    }
    
    .family-image {
      width: 200px;
      height: auto;
      object-fit: contain;
    }
    
    .people-text {
      font-size: 18px;
      font-weight: 700;
      color: var(--black);
      margin-bottom: 16px;
    }
    
    .counter {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-top: 20px;
    }
    
    .counter-btn {
      background: var(--black);
      color: var(--white);
      border: none;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .counter-btn:hover {
      background: var(--yellow);
      color: var(--black);
    }
    
    .counter-value {
      background: var(--black);
      color: var(--white);
      border-radius: 50%;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: 700;
    }
    
    .region-options {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 32px 0;
    }
    
    .region-card {
      background: var(--white);
      border: 3px solid var(--gray);
      border-radius: var(--radius);
      padding: 24px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .region-card:hover {
      border-color: var(--yellow);
    }
    
    .region-card.selected {
      border-color: var(--black);
      background: var(--gray);
    }
    
    .region-map {
      width: 120px;
      height: 80px;
      object-fit: contain;
      margin-bottom: 16px;
    }
    
    .region-text {
      font-size: 16px;
      font-weight: 600;
      color: var(--black);
    }
    
    .navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 40px;
    }
    
    .nav-btn {
      padding: 16px 32px;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    .nav-btn.secondary {
      background: var(--white);
      color: var(--black);
      border: 2px solid var(--gray);
    }
    
    .nav-btn.primary {
      background: var(--black);
      color: var(--white);
    }
    
    .nav-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(0,0,0,0.2);
    }
    
    .result-section {
      text-align: center;
    }
    
    .result-category {
      display: inline-block;
      background: var(--yellow);
      color: var(--black);
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 24px;
    }
    
    .result-amount-container {
      position: relative;
      display: inline-block;
      margin-bottom: 16px;
    }
    
    .amount-display {
      width: 300px;
      height: auto;
      max-width: 100%;
    }
    
    .result-amount {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 48px;
      font-weight: 800;
      color: var(--black);
      text-shadow: 2px 2px 0px var(--yellow);
      margin: 0;
    }
    
    .result-message {
      font-size: 18px;
      color: var(--gray-dark);
      margin-bottom: 32px;
      line-height: 1.6;
    }
    
    .cta-button {
      background: var(--black);
      color: var(--white);
      padding: 20px 40px;
      border: none;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 32px;
    }
    
    .cta-button:hover {
      background: var(--yellow);
      color: var(--black);
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.2);
    }
    
    .choices-section {
      background: var(--gray);
      padding: 24px;
      border-radius: var(--radius);
      margin-top: 32px;
    }
    
    .choices-title {
      background: var(--yellow);
      color: var(--black);
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: 700;
      text-align: center;
      margin-bottom: 24px;
    }
    
    .choices-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 16px;
    }
    
    .choice-item {
      text-align: center;
    }
    
    .choice-icon {
      font-size: 32px;
      margin-bottom: 8px;
      width: 40px;
      height: 40px;
      object-fit: contain;
    }
    
    .choice-text {
      font-size: 14px;
      font-weight: 600;
      color: var(--black);
    }
    
    .disclaimer {
      font-size: 12px;
      color: var(--gray-dark);
      text-align: center;
      margin-top: 24px;
    }
    
    .disclaimer a {
      color: var(--pink);
      text-decoration: none;
      font-weight: 600;
    }
    
    .dine-valg-section {
      text-align: center;
    }
    
    .main-headline {
      font-size: 48px;
      font-weight: 800;
      color: var(--yellow);
      text-shadow: 2px 2px 0px var(--black);
      margin-bottom: 32px;
    }
    
    .number-roller-container {
      background: var(--black);
      border-radius: 12px;
      padding: 20px 40px;
      margin: 32px auto;
      max-width: 400px;
      overflow: hidden;
    }
    
    .number-roller {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .roller-digit {
      background: var(--white);
      color: var(--black);
      font-size: 48px;
      font-weight: 800;
      width: 50px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      position: relative;
      overflow: hidden;
    }
    
    .roller-separator {
      color: var(--white);
      font-size: 48px;
      font-weight: 800;
      margin: 0 4px;
    }
    
    .choice-info {
      position: absolute;
      top: 8px;
      right: 8px;
      background: var(--gray-dark);
      color: var(--white);
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }
    
    .choice-item {
      position: relative;
    }
    
    .savings-display {
      margin-bottom: 40px;
    }
    
    .savings-text {
      margin-top: 24px;
    }
    
    .savings-text p {
      font-size: 16px;
      color: var(--black);
      margin-bottom: 16px;
    }
    
    .monthly-price {
      display: flex;
      align-items: baseline;
      justify-content: center;
      gap: 12px;
      margin-bottom: 24px;
    }
    
    .price-amount {
      font-size: 48px;
      font-weight: 800;
      color: var(--black);
    }
    
    .price-label {
      font-size: 18px;
      color: var(--black);
      font-weight: 600;
    }
    
    .price-note {
      font-size: 14px;
      color: var(--gray-dark);
    }
    
    .cta-button-large {
      background: var(--black);
      color: var(--yellow);
      padding: 20px 40px;
      border: none;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 12px;
    }
    
    .cta-button-large:hover {
      background: var(--yellow);
      color: var(--black);
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.2);
    }
    
    .choices-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-top: 24px;
    }
    
    .choice-item {
      background: var(--white);
      border: 2px solid var(--gray);
      border-radius: var(--radius);
      padding: 20px;
      text-align: center;
      position: relative;
    }
    
    .choice-item .choice-icon {
      width: 60px;
      height: 60px;
      object-fit: contain;
      margin-bottom: 12px;
    }
    
    .choice-text {
      font-size: 16px;
      font-weight: 600;
      color: var(--black);
      margin-bottom: 8px;
    }
    
    .choice-info {
      position: absolute;
      top: 12px;
      right: 12px;
      background: var(--gray-dark);
      color: var(--white);
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }
    
    
    @media (max-width: 768px) {
      .header {
        padding: 16px;
      }
      
      .brand {
        font-size: 24px;
      }
      
      .header-buttons {
        position: static;
        margin-top: 16px;
        justify-content: center;
      }
      
      .content-area {
        padding: 20px 16px;
      }
      
      .calculator-container {
        padding: 24px;
      }
      
      .step-title {
        font-size: 24px;
      }
      
      .options-grid {
        grid-template-columns: 1fr;
        gap: 16px;
      }
      
      .region-options {
        grid-template-columns: 1fr;
      }
      
      .result-amount {
        font-size: 48px;
      }
      
      .amount-display {
        width: 250px;
      }
      
      .family-image {
        width: 150px;
      }
      
      .family-card {
        padding: 16px;
      }
      
      .choices-grid {
        grid-template-columns: 1fr;
        gap: 16px;
      }
    }
  </style>
</head>
<body>
  <div class="main-container">
    <!-- Header -->
    <div class="header">
      <div class="brand">ILY!</div>
      <div class="header-buttons">
        <a href="#" class="header-btn secondary">MERE OM FASTPRIS</a>
        <a href="#" class="header-btn primary">⚡ BLIV KUNDE</a>
      </div>
      <div class="yellow-blob"></div>
    </div>

    <!-- Main Content -->
    <div class="content-area">
      <div class="calculator-container">
    <!-- Trin 1: Boligsituation -->
    <div id="step1" class="step active">
          <h2 class="step-title">VÆLG DIN BOLIGSITUATION</h2>
          <p class="step-subtitle">Fortæl os hvilken bolig du bor i, lorem ipsum dolor sit amet</p>
          
          <div class="options-grid">
            <div class="option-card" onclick="selectHousing('lejlighed')">
              <img src="img/flat.png" alt="Lejlighed" class="option-icon">
              <div class="option-text">Jeg bor i lejlighed</div>
            </div>
            <div class="option-card" onclick="selectHousing('hus')">
              <img src="img/house.png" alt="Hus" class="option-icon">
              <div class="option-text">Jeg bor i hus</div>
            </div>
            <div class="option-card" onclick="selectHousing('hus+elbil')">
              <img src="img/car.png" alt="Hus med elbil" class="option-icon">
              <div class="option-text">Jeg bor i hus & har elbil</div>
            </div>
      </div>
          
          <div class="navigation">
            <div></div>
            <button class="nav-btn primary" onclick="nextStep()">Næste</button>
      </div>
    </div>

    <!-- Trin 2: Antal personer -->
    <div id="step2" class="step">
          <h2 class="step-title">HVOR MANGE BOR I HUSTANDEN?</h2>
          <p class="step-subtitle">Hvor mange bor der i husstanden, lorem ipsum dolor sit amet? <span class="info-icon">i</span></p>
          
          <div class="people-selector">
            <div class="family-card">
              <img src="img/amount.png" alt="Familie" class="family-image">
            </div>
            <div class="people-text" id="peopleText">4 personer</div>
            <div class="counter">
              <button class="counter-btn" onclick="changePeople(-1)">-</button>
              <span class="counter-value" id="peopleCount">4</span>
              <button class="counter-btn" onclick="changePeople(1)">+</button>
            </div>
      </div>
          
          <div class="navigation">
            <button class="nav-btn secondary" onclick="prevStep()">Gå tilbage</button>
            <button class="nav-btn primary" onclick="nextStep()">Næste</button>
      </div>
    </div>

    <!-- Trin 3: Geografi -->
    <div id="step3" class="step">
          <h2 class="step-title">HVOR I LANDET BOR DU?</h2>
          <p class="step-subtitle">Hvor henne i landet bor du, consectetur adipiscing elit, sed do eiusmod</p>
          
          <div class="region-options">
            <div class="region-card" onclick="selectRegion('vest')">
              <img src="img/west.png" alt="Vest for Storebælt" class="region-map">
              <div class="region-text">Vest for Storebælt</div>
            </div>
            <div class="region-card" onclick="selectRegion('øst')">
              <img src="img/east.png" alt="Øst for Storebælt" class="region-map">
              <div class="region-text">Øst for Storebælt</div>
            </div>
      </div>
          
          <div class="navigation">
            <button class="nav-btn secondary" onclick="prevStep()">Tilbage</button>
            <button class="nav-btn primary" onclick="calculate()">Beregn</button>
      </div>
    </div>

        <!-- Dine Valg med talrulle -->
        <div id="dineValg" class="step">
          <div class="dine-valg-section">
            <h2 class="main-headline">ENLY! EN ELAFTALE DER BETALER SIG</h2>
            
            <div class="savings-display">
              <div class="number-roller-container">
                <div class="number-roller" id="numberRoller">
                  <div class="roller-digit">5</div>
                  <div class="roller-digit">0</div>
                  <div class="roller-digit">1</div>
                  <div class="roller-digit">7</div>
                  <div class="roller-separator">,</div>
                  <div class="roller-digit">2</div>
                  <div class="roller-digit">3</div>
                </div>
              </div>
              
              <div class="savings-text">
                <p>Spar op til <span id="yearlySavings">5.017,23</span> kr. om året* med fri strøm til fast pris for kun:</p>
                <div class="monthly-price">
                  <span class="price-amount" id="monthlyPrice">449,-</span>
                  <span class="price-label">Pr. måned</span>
                  <span class="price-note">Alt inkluderet</span>
                </div>
                <button class="cta-button-large" onclick="handleCTA()">
                  ⚡ TILMELD DIG PÅ 2 MINUTTER
                </button>
              </div>
            </div>
            
            <div class="choices-section">
              <div class="choices-title">DINE VALG</div>
              
              <div class="choices-grid">
                <div class="choice-item">
                  <img src="img/amount.png" alt="Antal personer" class="choice-icon" id="choicePeopleIcon">
                  <div class="choice-text" id="choicePeople">4 personer</div>
                  <div class="choice-info">i</div>
                </div>
                <div class="choice-item">
                  <img src="img/flat.png" alt="Lejlighed" class="choice-icon" id="choiceHousingIcon">
                  <div class="choice-text" id="choiceHousing">Lejlighed</div>
                  <div class="choice-info">i</div>
                </div>
                <div class="choice-item">
                  <img src="img/east.png" alt="Region" class="choice-icon" id="choiceRegionIcon">
                  <div class="choice-text" id="choiceRegion">Øst for Storebælt</div>
                  <div class="choice-info">i</div>
                </div>
              </div>
              
              <div class="disclaimer">
                *Beregningen tager udgangspunkt i dine oplysninger og en gns. pris. 
                <a href="#">Klik her</a> og læs mere om hvordan vi beregner din besparelse.
              </div>
            </div>
      </div>
    </div>

      </div>
    </div>
  </div>

  <script>
    // --- Konfigurerbare tærskler (kan tunes i produktionskode) ---
    const THRESHOLDS = {
      SMALL_MAX_MONTH: 500,     // 0 < besparelse < 500 kr/md  => "lille"
      UNDER_DIFF_CLOSE: 100     // -100 kr <= diff < 0        => "ingen_taet_paa"
    };

    let currentStep = 1;
    let data = { housing: null, people: 4, region: null };

    function showStep() {
      document.querySelectorAll('.step').forEach((s) => s.classList.remove('active'));
      const el = document.getElementById(`step${currentStep}`) || document.getElementById('dineValg');
      el.classList.add('active');
    }

    function nextStep() { 
      if (validateCurrentStep()) {
        currentStep++; 
        showStep(); 
      }
    }
    
    function prevStep() { 
      currentStep--; 
      if (currentStep < 1) currentStep = 1; 
      showStep(); 
    }
    

    function validateCurrentStep() {
      if (currentStep === 1 && !data.housing) {
        alert('Vælg venligst din boligsituation');
        return false;
      }
      if (currentStep === 3 && !data.region) {
        alert('Vælg venligst din region');
        return false;
      }
      return true;
    }

    function selectHousing(val) { 
      data.housing = val;
      // Update visual selection
      document.querySelectorAll('.option-card').forEach(card => card.classList.remove('selected'));
      const targetCard = event.target.closest('.option-card');
      if (targetCard) {
        targetCard.classList.add('selected');
      }
      
      // Update sliders on DINE VALG page
      updateHousingToggles();
      
      // Genberegn hvis vi er på dineValg siden
      if (currentStep === 'dineValg') {
        startNumberRoller();
      }
    }
    
    function changePeople(delta) {
      data.people = Math.max(1, Math.min(10, data.people + delta));
      document.getElementById('peopleCount').textContent = data.people;
      document.getElementById('peopleText').textContent = `${data.people} personer`;
      
      // Opdater også choice counter hvis vi er på dineValg siden
      const choicePeopleCount = document.getElementById('choicePeopleCount');
      const choicePeopleText = document.getElementById('choicePeople');
      if (choicePeopleCount) choicePeopleCount.textContent = data.people;
      if (choicePeopleText) choicePeopleText.textContent = `${data.people} personer`;
      
      // Genberegn hvis vi er på dineValg siden
      if (currentStep === 'dineValg') {
        startNumberRoller();
      }
    }
    
    function selectRegion(val) { 
      data.region = val;
      // Update visual selection
      document.querySelectorAll('.region-card').forEach(card => card.classList.remove('selected'));
      event.target.closest('.region-card').classList.add('selected');
    }

    // --- Dummy model: beregner en "forskel" pr. måned baseret på få input ---
    // EDGECASE LOGIK TILFØJET FOR FORKLARING
    // ------------------------------------------------------
    // rawSaving (diff) kan være
    //  > 0      = ENLY billigere (besparelse)
    //  < 0      = ENLY dyrere (negativt udfald)
    //  ~ 0      = tæt på (under threshold)
    // ------------------------------------------------------
    // Positiv diff => besparelse ved ENLY. Negativ diff => ENLY dyrere.
    function computeSaving(input) {
      // --- EDGECASE: Manglende input ---
      if (!input.housing || !input.people || !input.region) {
        return {
          monthlySaving: 0,
          rawSaving: 0,
          category: 'fejl',
          message: 'Data mangler – prøv igen.'
        };
      }
      // Estimeret forbrug (meget simplificeret)
      let kWh = 1200; // baseline/md
      if (input.housing === 'hus') kWh += 300;
      if (input.housing === 'hus+elbil') kWh += 600;
      if (input.people) kWh += (input.people - 1) * 80;

      const priceNow = 2.80 + (input.region === 'øst' ? 0.10 : 0.00); // kr/kWh
      const priceEnly = 2.40;                                         // kr/kWh (placeholder)

      const nowMd = kWh * priceNow;
      const enlyMd = kWh * priceEnly;
      const diff = Math.round(nowMd - enlyMd); // positiv = besparelse

      let category, message;
      if (diff <= 0) {
        if (Math.abs(diff) <= THRESHOLDS.UNDER_DIFF_CLOSE) {
          category = 'ingen_taet_paa';
          message = 'Ingen besparelse denne gang – men du er tæt på. Prøv at justere dine valg eller få fast pris.';
        } else {
          category = 'ingen';
          message = 'Ingen besparelse desværre. Få rådgivning eller fast pris.';
        }
      } else if (diff > 0 && diff < THRESHOLDS.SMALL_MAX_MONTH) {
        category = 'lille';
        message = 'Lille besparelse – det kan stadig give mening afhængigt af din fleksibilitet.';
      } // --- Ingen "dyrere" kategori ønskes, alt negativt håndteres som ingen besparelse ---
      // Ekstremt store værdier (fx fejl) behandles som neutral "ingen besparelse"
      else if (diff > 5000) {
        category = 'ingen';
        message = 'Ingen besparelse – kontakt os for et personligt tilbud.';
      } else {
        category = 'stor';
        message = 'Stor besparelse – godt match til din husstand.';
      }
      return { monthlySaving: Math.abs(diff), rawSaving: diff, category, message };
    }


    function updateChoicesDisplay() {
      // Update people count
      const choicePeople = document.getElementById('choicePeople');
      if (choicePeople) {
        choicePeople.textContent = `${data.people} personer`;
      }
      
      // Update housing choice
      const choiceHousing = document.getElementById('choiceHousing');
      if (choiceHousing) {
        const housingTexts = {
          'lejlighed': 'Lejlighed',
          'hus': 'Hus',
          'hus+elbil': 'Hus + elbil'
        };
        choiceHousing.textContent = housingTexts[data.housing] || 'Lejlighed';
      }
      
      // Update region choice
      const choiceRegion = document.getElementById('choiceRegion');
      if (choiceRegion) {
        choiceRegion.textContent = data.region === 'vest' ? 'Vest for Storebælt' : 'Øst for Storebælt';
      }
      
      // Update housing icon
      const choiceHousingIcon = document.getElementById('choiceHousingIcon');
      if (choiceHousingIcon) {
        const housingIcons = {
          'lejlighed': 'img/flat.png',
          'hus': 'img/house.png',
          'hus+elbil': 'img/car.png'
        };
        choiceHousingIcon.src = housingIcons[data.housing] || 'img/flat.png';
      }
      
      // Update region icon
      const choiceRegionIcon = document.getElementById('choiceRegionIcon');
      if (choiceRegionIcon) {
        choiceRegionIcon.src = data.region === 'vest' ? 'img/west.png' : 'img/east.png';
      }
      
      // People icon stays the same (amount.png)
      const choicePeopleIcon = document.getElementById('choicePeopleIcon');
      if (choicePeopleIcon) {
        choicePeopleIcon.src = 'img/amount.png';
      }
    }

    function handleCTA() {
      // Handle CTA button click based on result category
      const result = computeSaving(data);
      if (result.category === 'stor') {
        // Redirect to signup
        alert('Omdirigerer til tilmelding...');
      } else {
        // Redirect to more info
        alert('Omdirigerer til mere information...');
      }
    }

    function calculate() {
      // Validering af inputs
      if (!data.housing || !data.people || !data.region) {
        alert('Vælg bolig, antal personer og region før beregning.');
        return;
      }
      
      // Gå til Dine Valg step med talrulle animation
      currentStep = 'dineValg';
      showStep();
      updateChoicesDisplay();
      startNumberRoller();
    }
    
    function startNumberRoller() {
      const result = computeSaving(data);
      const targetAmount = result.monthlySaving;
      const yearlyAmount = targetAmount * 12;
      
      // Opdater tekst og priser
      document.getElementById('yearlySavings').textContent = yearlyAmount.toLocaleString('da-DK');
      document.getElementById('monthlyPrice').textContent = `${Math.round(targetAmount * 0.8)},-`;
      
      // Animer talrullen til det rigtige beløb
      animateNumberRoller(yearlyAmount);
      
      // Opdater housing toggles
      updateHousingToggles();
    }
    
    function animateNumberRoller(targetAmount) {
      const amountStr = targetAmount.toFixed(2).replace('.', ',');
      const digits = amountStr.split('');
      const rollerDigits = document.querySelectorAll('.roller-digit');
      
      rollerDigits.forEach((digit, index) => {
        if (index < digits.length && !isNaN(digits[index])) {
          // Animer hvert ciffer individuelt
          animateDigit(digit, parseInt(digits[index]), 1000 + (index * 200));
        }
      });
    }
    
    function updateHousingToggles() {
      // Reset alle sliders
      document.querySelectorAll('.slider-fill').forEach(slider => {
        slider.classList.remove('active');
      });
      
      // Aktivér den valgte housing type
      const selectedSlider = document.getElementById(`slider-${data.housing}`);
      if (selectedSlider) {
        selectedSlider.classList.add('active');
      }
    }
    
    function animateDigit(element, targetDigit, delay) {
      setTimeout(() => {
        let currentDigit = 0;
        const interval = setInterval(() => {
          element.textContent = currentDigit;
          currentDigit = (currentDigit + 1) % 10;
          
          if (currentDigit === targetDigit) {
            clearInterval(interval);
            element.textContent = targetDigit;
          }
        }, 50);
      }, delay);
    }

    function resetCalc() {
      currentStep = 1;
      data = { housing: null, people: 4, region: null };
      
      // Reset visual selections
      document.querySelectorAll('.option-card, .region-card').forEach(card => card.classList.remove('selected'));
      document.getElementById('peopleCount').textContent = '4';
      
      showStep();
    }

    // Initialize the calculator
    document.addEventListener('DOMContentLoaded', function() {
      // Set default values
      document.getElementById('peopleCount').textContent = data.people;
      
      // Add event listeners for region radio buttons
      const regionOst = document.getElementById('region-øst');
      const regionVest = document.getElementById('region-vest');
      
      if (regionOst) {
        regionOst.addEventListener('change', function() {
          if (this.checked) {
            data.region = 'øst';
            startNumberRoller();
          }
        });
      }
      
      if (regionVest) {
        regionVest.addEventListener('change', function() {
          if (this.checked) {
            data.region = 'vest';
            startNumberRoller();
          }
        });
      }
    });
  </script>

  <!-- End of document -->
</body>
</html>
