
<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" media="all" href="/assets/frontend/application-e2507f4ecfd1149df0b8caa1e7893624dd6f8ed01d9cf0f380caa997a484d0fb.css" />
    <style>
      /* Preconnect links should be added to HTML <head>:
   <link rel="preconnect" href="https://use.typekit.net">
   <link rel="preconnect" href="https://p.typekit.net" crossorigin>
*/

@import url('https://use.typekit.net/uqv7fhq.css');
@import url('https://use.typekit.net/tik0ert.css');
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400%3b700&display=swap');

/* CSS Variables */
:root {
  /* Colors */
  --White: #FFF;
  --Black: #000;
  --Dark: #222;
  --Nautral-Lightest: #F9F9F9;
  --Primary-Text: #155b64;
  --Yellow-Accent: #FFCE1B;
  --Gray-Light: #ECECEC;
  --Gray-Medium: #999;
  --Gray-Dark: #666;
  --Gray-Darker: #333;
  --Gray-Darkest: #333333;
  --Error-Red: #a00;
  --Disabled-Gray: #888;
  --Hover-Bg: #f5f5f5;

  /* Opacity values */
  --Opacity-Hover: 0.9;
  --Opacity-Disabled: 0.6;
  --Opacity-Link-Hover: 0.7;
  --Opacity-Border-Light: 0.10;
  --Opacity-Border-Medium: 0.20;
  --Opacity-Shadow-Light: 0.05;
  --Opacity-Shadow-Medium: 0.1;
  --Opacity-Input-Shadow: 0.06;
  --Opacity-Icon: 0.6;
  --Opacity-Tooltip-Hover: 0.5;

  /* Typography */
  --Font-Family: 'Gamay', sans-serif;
  --Font-Size-XS: 12px;
  --Font-Size-SM: 13px;
  --Font-Size-Base: 14px;
  --Font-Size-MD: 16px;
  --Font-Size-LG: 18px;
  --Font-Size-XL: 32px;
  --Font-Size-XXL: 48px;
  --Font-Weight-Light: 100;
  --Font-Weight-Normal: 300;
  --Font-Weight-Regular: 400;
  --Font-Weight-Medium: 500;
  --Font-Weight-Bold: 700;
  --Font-Weight-ExtraBold: 800;
  --Line-Height-Tight: 1;
  --Line-Height-Normal: 1.2;
  --Line-Height-Relaxed: 1.3;
  --Line-Height-Loose: 1.4;
  --Line-Height-XLoose: 1.5;
  --Line-Height-Button: 24px;
  --Line-Height-Label: 32px;

  /* Spacing */
  --Spacing-XS: 0.25rem;
  --Spacing-SM: 0.5rem;
  --Spacing-MD: 0.75rem;
  --Spacing-Base: 1rem;
  --Spacing-LG: 1.5rem;
  --Spacing-XL: 2rem;
  --Spacing-XXL: 3rem;
  --Spacing-Page-Top: 80px;
  --Spacing-Page-Bottom: 60px;
  --Spacing-Page-Top-Mobile: 140px;
  --Spacing-Hero-Padding: 20px;
  --Spacing-Hero-Padding-Large: 50px;
  --Spacing-Form-Field: 25px;
  --Spacing-Section-Bottom: 60px;
  --Spacing-Progress-Margin: 20px;

  /* Border Radius */
  --Radius-XS: 1px;
  --Radius-SM: 2px;
  --Radius-MD: 4px;
  --Radius-LG: 8px;

  /* Transitions */
  --Transition-Fast: 0.2s ease;
  --Transition-Base: 0.3s ease;
  --Transition-Slow: 0.3s ease-out;

  /* Layout */
  --Max-Width-Page: 1200px;
  --Max-Width-Form: 600px;
  --Max-Width-Form-Medium: 800px;
  --Max-Width-Form-Large: 900px;
  --Max-Width-Form-XLarge: 1200px;
  --Max-Width-Progress: 400px;
  --Max-Width-Button-Container: 600px;
  --Max-Width-Text: 700px;
  --Max-Width-Logo: 120px;
  --Max-Width-Logo-Mobile: 100px;
  --Max-Width-Housing-Card: 280px;
  --Max-Width-Housing-Image: 240px;
  --Max-Width-Housing-Image-Mobile: 120px;
  --Min-Height-Page: 100vh;
  --Min-Height-Container: 400px;
  --Min-Height-Situation-Card: 320px;
  --Width-Date-Input: 22.5rem;

  /* Z-Index */
  --Z-Index-Base: 1;
  --Z-Index-Tooltip-Icon: 10;
  --Z-Index-Hero: 1001;
  --Z-Index-Tooltip: 10000;

  /* Breakpoints */
  --Breakpoint-Mobile: 980px;

  /* Specific dimensions */
  --Input-Height: 50px;
  --Input-Padding-X: 20px;
  --Input-Padding-Y: 18px;
  --Button-Padding-X: 40px;
  --Button-Padding-Y: 15px;
  --Radio-Size: 20px;
  --Checkbox-Size: 16px;
  --Radio-Inner-Size: 8px;
  --Tooltip-Icon-Size: 14px;
  --Calendar-Icon-Size: 24px;
  --Calendar-Icon-Size-Large: 32px;
  --Date-Text-Color: rgba(0, 0, 0, 0.60);
  --Date-Line-Height: 20px;
  --Topnav-Gap: 12px;
  --Topnav-Gap-Mobile: 8px;
  --Card-Gap: 10px;
  --Selector-Gap: 2rem;
  --Selector-Gap-Mobile: 15px;
}

/* Gamay font - fallback to system fonts if not available */
@font-face {
  font-family: 'Gamay';
  font-weight: 100;
  src: local('Gamay Thin'), local('Gamay-Light');
}

@font-face {
  font-family: 'Gamay';
  font-weight: 200;
  src: local('Gamay Light'), local('Gamay-Regular');
}

@font-face {
  font-family: 'Gamay';
  font-weight: 700;
  src: local('Gamay Bold'), local('Gamay-Bold');
}

* {
  box-sizing: border-box;
}

html {
  min-height: 100vh;
}

body {
  color: var(--Primary-Text);
  background:
    radial-gradient(circle at 92% -20%,
      var(--Yellow-Accent) 0 20vw,
      /* yellow radius */
      transparent 20vw 100%),
    var(--Nautral-Lightest);
  /* page background */
  background-repeat: no-repeat;
  background-attachment: fixed;
  margin: 0;
  padding: 0;
  min-height: var(--Min-Height-Page);
  font-family: var(--Font-Family);
}

/* Mobile - adjust background dot */
@media only screen and (max-width: var(--Breakpoint-Mobile)) {
  body {
    background:
      radial-gradient(circle at 92% 10%,
        var(--Yellow-Accent) 0 15vw,
        /* smaller yellow radius on mobile */
        transparent 15vw 100%),
      var(--Nautral-Lightest);
  }
}

.signup__page {
  max-width: var(--Max-Width-Page);
  margin-left: auto;
  margin-right: auto;
  padding-top: var(--Spacing-Page-Top);
  padding-bottom: var(--Spacing-Page-Bottom);
  position: relative;
  background: transparent;
}

/* Hero / Logo */
.signup__page .hero {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: var(--Z-Index-Hero);
  padding: var(--Spacing-Hero-Padding) 0 0 var(--Spacing-Hero-Padding-Large);
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

.signup__page .hero p:first-child {
  margin: 0;
  line-height: 1;
}

.signup__page .hero p:last-child {
  display: none;
}

.signup__page .hero img {
  height: auto;
  max-width: var(--Max-Width-Logo);
  display: block;
}

/* Topnav buttons */
.signup__page .hero .topnav {
  position: relative;
  padding: 0 var(--Spacing-Hero-Padding-Large) 0 0;
  flex-shrink: 0;
}

.topnav ul {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  gap: var(--Topnav-Gap);
  align-items: center;
}

.topnav ul li {
  padding: 0;
  margin: 0;
}

.topnav ul li a {
  display: flex;
  align-items: center;
  gap: var(--Spacing-MD);
  font-weight: var(--Font-Weight-Bold);
  font-size: var(--Font-Size-Base);
  line-height: var(--Line-Height-Tight);
  padding: var(--Font-Size-XS) var(--Spacing-Hero-Padding);
  border-radius: var(--Radius-LG);
  text-decoration: none;
  transition: all var(--Transition-Base);
  white-space: nowrap;
}

.topnav ul li:nth-child(1) a {
  border-radius: 8px;
  border: 0.5px solid rgba(0, 0, 0, 0.10);
  background: var(--White, #FFF);
  backdrop-filter: blur(5px);
  color: var(--Black);
  position: relative;
  padding-left: calc(var(--Spacing-Hero-Padding) + 18px + var(--Spacing-MD));
}

/* Profile icon for first button */
.topnav ul li:nth-child(1) a::before {
  content: '';
  position: absolute;
  left: var(--Spacing-Hero-Padding);
  top: 50%;
  transform: translateY(-50%);
  width: 18px;
  height: 18px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 18 18' fill='none'%3E%3Cg clip-path='url(%23clip0_4415_1854)'%3E%3Cpath d='M9 1.5C4.85775 1.5 1.5 4.85775 1.5 9C1.5 13.1422 4.85775 16.5 9 16.5C13.1422 16.5 16.5 13.1422 16.5 9C16.5 4.85775 13.1422 1.5 9 1.5Z' stroke='black' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M3.20312 13.7595C3.20312 13.7595 4.87488 11.625 8.99988 11.625C13.1249 11.625 14.7974 13.7595 14.7974 13.7595M8.99988 9C9.59661 9 10.1689 8.76295 10.5909 8.34099C11.0128 7.91903 11.2499 7.34674 11.2499 6.75C11.2499 6.15326 11.0128 5.58097 10.5909 5.15901C10.1689 4.73705 9.59661 4.5 8.99988 4.5C8.40314 4.5 7.83084 4.73705 7.40888 5.15901C6.98693 5.58097 6.74988 6.15326 6.74988 6.75C6.74988 7.34674 6.98693 7.91903 7.40888 8.34099C7.83084 8.76295 8.40314 9 8.99988 9Z' stroke='black' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/g%3E%3Cdefs%3E%3CclipPath id='clip0_4415_1854'%3E%3Crect width='18' height='18' fill='white'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

.topnav ul li:nth-child(2) a {
  border-radius: 8px;
  background: var(--Dark, #222);
  color: var(--White);
}

.topnav ul li a:hover {
  opacity: var(--Opacity-Hover);
}

/* Progress indicator */
#progress-container {
  text-align: center;
  margin-top: 0;
}

#progress-text {
  font-size: var(--Font-Size-Base);
  color: var(--Gray-Medium);
  margin-bottom: var(--Spacing-SM);
  text-transform: lowercase;
  font-weight: var(--Font-Weight-Regular);
}

.progress-background {
  display: none;
}

#progress-bar {
  display: none;
}


/* Titles */
.signup__form-title {
  font-weight: var(--Font-Weight-Bold);
  font-size: var(--Font-Size-XXL);
  line-height: var(--Line-Height-Normal);
  text-align: center;
  margin: 0 0 var(--Spacing-LG);
  color: var(--Black);
  padding: 0 var(--Spacing-LG);
}

.signup__form-title span:empty {
  display: none;
}

.signup__section-title,
.signup__group-title {
  font-weight: var(--Font-Weight-Bold);
  font-size: var(--Font-Size-XXL);
  line-height: var(--Line-Height-Normal);
  margin: 0 0 var(--Spacing-SM);
  color: var(--Black);
  text-align: center;
}

/* Remove asterisk from required section titles */
.signup__form-section.signup__form--required .signup__section-title::after,
.signup__form-section.signup__form--required .signup__section-title:after,
.signup__section-title::after,
.signup__section-title:after {
  content: none;
  display: none;
}

/* Gas product section - styled like situation but with larger text buttons */
.signup__gas_product {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  flex-wrap: wrap;
  text-align: center;
  max-width: var(--Max-Width-Form-Medium);
  margin: 0 auto;
}

.signup__gas_product .gas-type-selector {
  display: flex;
  gap: var(--Selector-Gap);
  margin: var(--Spacing-XXL) 0;
  flex-wrap: wrap;
  justify-content: center;
  align-items: stretch;
  width: 100%;
}

.gas-option-card {
  display: flex;
  padding: var(--Font-Size-MD) calc(var(--Font-Size-XL) - var(--Font-Size-MD));
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: var(--Card-Gap);
  border-radius: var(--Radius-MD);
  border: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  background: transparent;
  cursor: pointer;
  transition: all var(--Transition-Base);
  flex: 0 1 auto;
}

.gas-option-card:hover {
  border-radius: var(--Radius-MD);
  border: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  background: var(--White);
}

.gas-option-card.selected,
.gas-option-card[data-selected="true"] {
  border-radius: var(--Radius-MD);
  border: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  background: var(--White);
}

.gas-option-label {
  font-weight: var(--Font-Weight-Regular);
  font-size: clamp(var(--Font-Size-MD), 2vw, var(--Font-Size-LG));
  color: var(--Black);
  text-align: center;
  line-height: var(--Line-Height-Loose);
  margin: 0;
}

.signup__gas_product .signup__form-field--radio {
  padding: 0;
  margin: 0;
  display: none;
}

/* Installation address select - styled like gas buttons */
.signup__installation_address_select {
  max-width: var(--Max-Width-Form-Medium);
  margin: 0 auto;
  justify-content: center;
}

.signup__installation_address_select .installation-type-selector {
  display: flex;
  gap: 20px;
  margin: var(--Spacing-XXL) 0;
  flex-wrap: wrap;
  justify-content: stretch;
  align-items: stretch;
  width: 100%;
}

.installation-option-card {
  display: flex;
  padding: var(--Font-Size-MD) calc(var(--Font-Size-XL) - var(--Font-Size-MD));
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: var(--Card-Gap);
  border-radius: 0;
  border: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  border-right: none;
  background: transparent;
  cursor: pointer;
  transition: all var(--Transition-Base);
  flex: 1 1 0;
}

.installation-option-card:first-child {
  border-radius: var(--Radius-MD) 0 0 var(--Radius-MD);
}

.installation-option-card:last-child {
  border-radius: 0 var(--Radius-MD) var(--Radius-MD) 0;
  border-right: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
}

.installation-option-card:only-child {
  border-radius: var(--Radius-MD);
  border-right: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
}

.installation-option-card:hover {
  border-radius: var(--Radius-MD);
  border: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  background: var(--White);
}

.installation-option-card.selected,
.installation-option-card[data-selected="true"] {
  border-radius: var(--Radius-MD);
  border: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  background: var(--White);
}

.installation-option-label {
  font-weight: var(--Font-Weight-Regular);
  font-size: clamp(var(--Font-Size-MD), 2vw, var(--Font-Size-LG));
  color: var(--Black);
  text-align: center;
  line-height: var(--Line-Height-Loose);
  margin: 0;
}

.signup__installation_address_select .signup__form-field--radio {
  padding: 0;
  margin: 0;
  display: none;
}

/* Form sections */
.signup__form-section {
  margin-bottom: var(--Spacing-Section-Bottom);
  background-color: transparent;
  padding: 0;
}

#group-container {
  min-height: var(--Min-Height-Container);
}

.signup__page p {
  padding: 0;
  margin-bottom: var(--Spacing-Base);
  text-align: left;
  color: var(--Gray-Dark);
  font-size: var(--Font-Size-Base);
  line-height: var(--Line-Height-XLoose);
}

.signup__permissions-earliest-date {
  text-align: center;
}

.signup__form-section>p {
  text-align: center;
  margin-bottom: calc(var(--Spacing-Page-Bottom) / 2);
  color: var(--Gray-Dark);
}

/* Input fields */
.signup__form-field {
  margin-bottom: var(--Spacing-Form-Field);
  padding: 0 var(--Spacing-LG);
}

.signup__form-field label {
  display: block;
  font-size: var(--Font-Size-Base);
  color: var(--Black);
  font-weight: var(--Font-Weight-Regular);
  position: relative;
}

.signup__page .signup__form-field input[type="text"],
.signup__page .signup__form-field input[type="search"],
.signup__page .signup__form-field input[type="date"] {
  font-weight: var(--Font-Weight-Normal);
  box-shadow: inset 1px 1px 2px rgba(0, 0, 0, var(--Opacity-Input-Shadow));
  padding: var(--Input-Padding-Y) var(--Input-Padding-X);
  font-size: var(--Font-Size-Base);
  line-height: var(--Font-Size-Base);
  color: var(--Black);
  outline: 0;
  margin: 0;
  height: var(--Input-Height);
  width: 100%;
  transition: border-color var(--Transition-Base);
  border-radius: var(--Radius-MD);
  background: var(--White);
  border: 0.5px solid rgba(0, 0, 0, var(--Opacity-Border-Medium));
}

.signup__page .signup__form-field input[type="text"]:focus,
.signup__page .signup__form-field input[type="search"]:focus {
  border-color: var(--Black);
  outline: none;
}

.signup__page .signup__form-field input[type="text"]::placeholder,
.signup__page .signup__form-field input[type="search"]::placeholder {
  color: var(--Gray-Medium);
}

/* Radio buttons - Situation */
.signup__situation {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  flex-wrap: wrap;
  text-align: center;
}

.signup__situation .situation-type-selector {
  order: 1;
}

.signup__situation .signup__situation_cos_more,
.signup__situation .signup__situation_move_more,
.signup__situation .signup__situation_move_start_date {
  order: 2;
}

.situation-type-selector {
  display: flex;
  gap: var(--Selector-Gap);
  margin: var(--Spacing-XL) 0;
  flex-wrap: wrap;
  justify-content: center;
  align-items: stretch;
  width: 100%;
  max-width: var(--Max-Width-Form-Large);
}

.situation-option-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  text-align: center;
  padding: var(--Font-Size-XL);
  border-radius: var(--Radius-LG);
  border: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  background: transparent;
  cursor: pointer;
  transition: all var(--Transition-Base);
  width: var(--Max-Width-Housing-Card);
  min-height: var(--Min-Height-Situation-Card);
  gap: var(--Card-Gap);
  flex: 0 1 auto;
}

.situation-option-card:hover {
  border-radius: var(--Radius-LG);
  border: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  background: var(--White);
}

.situation-option-card.selected,
.situation-option-card[data-selected="true"] {
  border-radius: var(--Radius-LG);
  border: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  background: var(--White);
}

.situation-option-card img {
  width: 100%;
  max-width: var(--Max-Width-Housing-Image);
  height: auto;
  border-radius: var(--Radius-LG);
  margin-bottom: 0;
  object-fit: contain;
  flex-shrink: 0;
  transition: var(--Transition-Fast);
  display: block;
}

.situation-option-label {
  font-weight: var(--Font-Weight-Medium);
  font-size: var(--Font-Size-MD);
  color: var(--Black);
  text-align: center;
  line-height: var(--Line-Height-Loose);
}

.signup__situation .signup__form-group {
  flex: 0 1 auto;
  margin: 0;
}

.signup__situation .signup__form-field--radio {
  padding: 0;
  margin: 0;
  display: none;
}

.signup__situation .signup__form-field--radio label {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--Spacing-Hero-Padding) var(--Button-Padding-X);
  border: 1px solid var(--Gray-Light);
  border-radius: var(--Radius-LG);
  background: var(--White);
  cursor: pointer;
  transition: all var(--Transition-Base);
  min-width: var(--Max-Width-Housing-Card);
  margin-bottom: 0;
}

.signup__situation .signup__form-field--radio label:hover {
  border-color: var(--Black);
}

.signup__situation .signup__form-field--radio:has(input:checked) label {
  border-color: var(--Black);
  border-width: var(--Radius-SM);
}

.signup__situation .signup__form-field--radio label>span.signup__radio-wrap {
  order: -1;
  margin-right: var(--Font-Size-XS);
}

.signup__situation .signup__form-field--radio label>span.signup__radio-text {
  margin-left: 0;
  font-weight: var(--Font-Weight-Bold);
  font-size: var(--Font-Size-MD);
  color: var(--Black);
}

.signup__situation .signup__form-field--radio input:checked~.signup__radio-text {
  font-weight: 700;
}

/* Situation date sections - override with column layout */
.signup__situation_cos_more {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: flex-start;
  width: 100%;
  max-width: calc((var(--Max-Width-Housing-Card) * 2) + var(--Selector-Gap));
  margin: clamp(var(--Spacing-Base), 2vh, var(--Spacing-XL)) auto 0;
  padding: var(--Spacing-Base);
  text-align: left;
  background-color: var(--White);
  border-radius: var(--Radius-LG);
  border: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  box-shadow: none;
}

.signup__situation_cos_more .signup__form-field--checkbox {
  order: 1;
}

.signup__situation_cos_more .signup__situation_cos_start_date {
  order: 2;
}

.signup__situation_cos_more .signup__situation_cos_start_date .signup__form-field {
  order: 1;
}

.signup__situation_cos_more .signup__situation_cos_start_date .signup__form-help {
  order: 2;
}

.signup__situation_move_more {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: flex-start;
  width: 100%;
  max-width: calc((var(--Max-Width-Housing-Card) * 2) + var(--Selector-Gap));
  margin: clamp(var(--Spacing-Base), 2vh, var(--Spacing-XL)) auto 0;
  padding: var(--Spacing-Base);
  text-align: left;
  background-color: var(--White);
  border-radius: var(--Radius-LG);
  border: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  box-shadow: none;
}

.signup__situation_move_start_date {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: flex-start;
  width: 100%;
  margin: 0;
  padding: 0;
  text-align: left;
  background-color: transparent;
  border-radius: 0;
  border: none;
  box-shadow: none;
  gap: 0;
}

.signup__situation_move_start_date .signup__form-field:not(.signup__situation_move_acknowledged) {
  order: 1;
  width: 100%;
}

.signup__situation_move_start_date .signup__form-help {
  order: 2;
  width: 100%;
}

.signup__situation_move_start_date .signup__situation_move_acknowledged {
  order: 3;
  width: 100%;
  margin-top: 0;
}

.signup__situation_cos_start_date {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: flex-start;
  width: 100%;
  padding: 0;
  text-align: left;
  background-color: transparent;
  border-radius: 0;
  box-shadow: none;
}

.signup__situation_cos_start_date .signup__group-title {
  display: none;
}

.signup__situation_move_start_date .signup__group-title {
  font-weight: var(--Font-Weight-Bold);
  font-size: var(--Font-Size-XS);
  line-height: var(--Line-Height-Relaxed);
  color: var(--Gray-Darkest);
  margin: var(--Spacing-Base);
  width: 100%;
  text-align: left;
  display: block;
}

.signup__situation_move_start_date .signup__form-field:first-child label {
  display: flex;
  flex-direction: column;
  width: 100%;
  align-items: flex-start;
}


.signup__situation_cos_start_date .signup__form-field,
.signup__situation_move_start_date .signup__form-field:not(.signup__situation_move_acknowledged) {
  width: 100%;
  padding: 0;
  margin-bottom: clamp(0.5rem, 1vh, 1rem);
  position: relative;
}

.signup__situation_cos_start_date .signup__form-field:has(input[type="date"]) label,
.signup__situation_move_start_date .signup__form-field:has(input[type="date"]) label {
  cursor: pointer;
}

.signup__situation_cos_start_date .signup__form-field:has(input[type="date"]) input[type="date"],
.signup__situation_move_start_date .signup__form-field:has(input[type="date"]) input[type="date"] {
  cursor: pointer;
  padding-right: calc(16px + var(--Spacing-MD) + var(--Spacing-SM));
}

.signup__situation_cos_start_date .signup__form-field label,
.signup__situation_move_start_date .signup__form-field label:not(.signup__situation_move_acknowledged label) {
  font-size: var(--Font-Size-XS);
  color: var(--Gray-Darkest);
  display: block;
  width: 100%;
  font-weight: var(--Font-Weight-Regular);
  position: relative;
}

.signup__situation_cos_start_date .signup__form-field label input[type="date"],
.signup__situation_move_start_date .signup__form-field label input[type="date"] {
  display: block;
  width: 100%;
  position: relative;
}

/* Date input fields - shared styles for both COS and Move sections */
.signup__situation_cos_start_date .signup__form-field input[type="date"],
.signup__situation_move_start_date .signup__form-field input[type="date"],
.signup__situation_cos_start_date .signup__form-field input[type="text"],
.signup__situation_move_start_date .signup__form-field input[type="text"] {
  width: var(--Width-Date-Input);
  font-family: var(--Font-Family);
  font-size: var(--Font-Size-XS);
  font-style: normal;
  font-weight: var(--Font-Weight-Regular);
  line-height: var(--Date-Line-Height);
  color: var(--Date-Text-Color);
  background: var(--White);
  border: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Medium));
  border-radius: var(--Radius-SM);
  box-shadow: none;
  box-sizing: border-box;
  position: relative;
  margin-top: 0;
  align-self: flex-start;
  cursor: pointer;
  padding: clamp(12px, 2vh, 18px) clamp(15px, 2vw, 20px);
  padding-right: clamp(40px, 5vw, 50px);
  -webkit-appearance: none;
  appearance: none;
}

.signup__situation_cos_start_date .signup__form-field:has(input[type="date"]) label,
.signup__situation_move_start_date .signup__form-field:has(input[type="date"]) label {
  position: relative;
}

.signup__situation_cos_start_date .signup__form-field:has(input[type="date"]) label::after,
.signup__situation_move_start_date .signup__form-field:has(input[type="date"]) label::after {
  content: "";
  display: block !important;
  position: absolute;
  right: 12px;
  bottom: 16px;
  width: 20px;
  height: 20px;
  opacity: 1 !important;
  visibility: visible !important;
  background-repeat: no-repeat;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16' fill='none'%3E%3Cpath d='M5.33301 1.33203V3.9987' stroke='%23636363' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M10.667 1.33203V3.9987' stroke='%23636363' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M12.6667 2.66797H3.33333C2.59695 2.66797 2 3.26492 2 4.0013V13.3346C2 14.071 2.59695 14.668 3.33333 14.668H12.6667C13.403 14.668 14 14.071 14 13.3346V4.0013C14 3.26492 13.403 2.66797 12.6667 2.66797Z' stroke='%23636363' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M2 6.66797H14' stroke='%23636363' stroke-width='1.33333' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  background-size: contain;
  background-position: center;
  pointer-events: none;
  z-index: var(--Z-Index-Tooltip-Icon);
  filter: opacity(0.6);
}


/* Date input placeholder and value styling - shared for both sections */
.signup__situation_cos_start_date .signup__form-field input[type="date"]::-webkit-calendar-picker-indicator,
.signup__situation_move_start_date .signup__form-field input[type="date"]::-webkit-calendar-picker-indicator {
  opacity: 0;
  position: absolute;
  right: 0;
  top: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}

.signup__situation_cos_start_date .signup__form-field input[type="date"]::placeholder,
.signup__situation_move_start_date .signup__form-field input[type="date"]::placeholder {
  color: var(--Date-Text-Color);
  font-family: var(--Font-Family);
  font-size: var(--Font-Size-XS);
  font-style: normal;
  font-weight: var(--Font-Weight-Regular);
  line-height: var(--Date-Line-Height);
}

.signup__situation_cos_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit,
.signup__situation_move_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit {
  color: var(--Date-Text-Color);
  font-family: var(--Font-Family);
  font-size: var(--Font-Size-XS);
  font-style: normal;
  font-weight: var(--Font-Weight-Regular);
  line-height: var(--Date-Line-Height);
}

.signup__situation_cos_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit-fields-wrapper,
.signup__situation_move_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit-fields-wrapper {
  color: var(--Date-Text-Color);
  font-family: var(--Font-Family);
  font-size: var(--Font-Size-XS);
  font-style: normal;
  font-weight: var(--Font-Weight-Regular);
  line-height: var(--Date-Line-Height);
}

.signup__situation_cos_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit-text,
.signup__situation_move_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit-text {
  color: var(--Date-Text-Color);
}

/* Date input field parts - shared styling for both sections */
.signup__situation_cos_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit-month-field,
.signup__situation_move_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit-month-field,
.signup__situation_cos_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit-day-field,
.signup__situation_move_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit-day-field,
.signup__situation_cos_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit-year-field,
.signup__situation_move_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit-year-field {
  color: var(--Date-Text-Color);
  font-family: var(--Font-Family);
  font-size: var(--Font-Size-XS);
  font-style: normal;
  font-weight: var(--Font-Weight-Regular);
  line-height: var(--Date-Line-Height);
}

.signup__situation_cos_start_date .signup__form-field input[type="date"][data-placeholder]:not([value])::-webkit-datetime-edit-day-field,
.signup__situation_move_start_date .signup__form-field input[type="date"][data-placeholder]:not([value])::-webkit-datetime-edit-day-field {
  color: var(--Gray-Medium);
}

.signup__situation_cos_start_date .signup__form-field input[type="date"][data-placeholder]:not([value])::-webkit-datetime-edit-day-field::before,
.signup__situation_move_start_date .signup__form-field input[type="date"][data-placeholder]:not([value])::-webkit-datetime-edit-day-field::before {
  content: attr(data-placeholder);
}

.signup__situation_cos_start_date .signup__form-field.signup__has-error input[type="date"],
.signup__situation_move_start_date .signup__form-field.signup__has-error input[type="date"],
.signup__situation_cos_start_date .signup__form-field.signup__has-error input[type="text"],
.signup__situation_move_start_date .signup__form-field.signup__has-error input[type="text"] {
  width: 100%;
  max-width: var(--Width-Date-Input);
  padding-right: calc(var(--Calendar-Icon-Size-Large) + var(--Spacing-LG) + var(--Spacing-MD));
  font-family: var(--Font-Family);
  font-size: var(--Font-Size-XS);
  font-style: normal;
  font-weight: var(--Font-Weight-Regular);
  line-height: var(--Date-Line-Height);
  color: var(--Date-Text-Color);
  background: var(--White);
  border: 1px solid var(--Error-Red);
  border-radius: var(--Radius-SM);
  box-shadow: none;
  box-sizing: border-box;
  position: relative;
  margin-top: 0;
  align-self: flex-start;
  cursor: pointer;
}


.signup__situation_cos_start_date .signup__form-help,
.signup__situation_move_start_date .signup__form-help {
  font-size: var(--Font-Size-XS);
  color: var(--Gray-Dark);
  line-height: var(--Line-Height-XLoose);
  margin-top: 0;
  font-weight: var(--Font-Weight-Light);
  width: 100%;
  text-align: left;
}

.signup__situation_cos_more .signup__form-field--checkbox,
.signup__situation_move_start_date .signup__form-field.signup__situation_move_acknowledged {
  width: 100%;
  padding: 0;
}

.signup__situation_move_start_date .signup__form-field.signup__situation_move_acknowledged {
  margin-top: 0;
  margin-bottom: 0;
}

.signup__situation_cos_start_date {
  display: none;
  visibility: hidden;
  opacity: 0;
  margin-top: clamp(var(--Spacing-MD), 1.5vh, var(--Spacing-LG));
  transition: opacity var(--Transition-Base), visibility var(--Transition-Base);
}

.signup__situation_cos_more .signup__form-field--checkbox:has(input[type="checkbox"]:checked)~.signup__situation_cos_start_date,
.signup__situation_cos_more .signup__form-field--checkbox input[type="checkbox"]:checked~.signup__situation_cos_start_date {
  display: flex;
  visibility: visible;
  opacity: 1;
}

.signup__situation_cos_more .signup__form-field--checkbox label,
.signup__situation_move_start_date .signup__form-field.signup__situation_move_acknowledged label {
  padding: 0;
  border: none;
  border-radius: 0;
  background: transparent;
  cursor: pointer;
  transition: none;
  align-items: flex-start;
  margin-bottom: 0;
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  width: 100%;
}

/* Radio/Checkbox styling */
.signup__form-field.signup__form-field--radio label,
.signup__form-field.signup__form-field--checkbox label {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 12px;
}

.signup__form-field label>span.signup__radio-wrap,
.signup__form-field label>span.signup__checkbox-wrap {
  position: relative;
}

.signup__form-field label>span.signup__radio-wrap input,
.signup__form-field label>span.signup__checkbox-wrap input {
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
}

.signup__form-field label>span.signup__radio-wrap .signup__radio-pseudo:before,
.signup__form-field label>span.signup__checkbox-wrap .signup__checkbox-pseudo:before {
  content: '';
  box-sizing: border-box;
  display: block;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: var(--Radio-Size);
  height: var(--Radio-Size);
  border-radius: 50%;
  border: var(--Radius-SM) solid var(--Gray-Darker);
  background: var(--White);
  transition: all var(--Transition-Slow);
  margin-top: -1px;
}

.signup__form-field label>span.signup__checkbox-wrap .signup__checkbox-pseudo:before {
  border-radius: var(--Radius-SM);
  border: 0.5px solid rgba(0, 0, 0, var(--Opacity-Border-Medium));
  background: var(--White);
  width: var(--Checkbox-Size);
  height: var(--Checkbox-Size);
}

.signup__form-field label>span.signup__radio-wrap .signup__radio-pseudo:after {
  content: '';
  box-sizing: border-box;
  display: block;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  left: 6px;
  width: var(--Radio-Inner-Size);
  height: var(--Radio-Inner-Size);
  border-radius: 50%;
  background: var(--White);
  transition: all var(--Transition-Slow);
  margin-top: -1px;
}

.signup__form-field label>span.signup__checkbox-wrap .signup__checkbox-pseudo:after {
  content: '';
  box-sizing: border-box;
  display: block;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  left: 0;
  width: var(--Checkbox-Size);
  height: var(--Checkbox-Size);
  opacity: 0;
  transition: all var(--Transition-Slow);
  margin-top: -1px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16' fill='none'%3E%3Crect width='16' height='16' rx='2' fill='%23222222'/%3E%3Crect x='0.25' y='0.25' width='15.5' height='15.5' rx='1.75' stroke='black' stroke-opacity='0.2' stroke-width='0.5'/%3E%3Cpath d='M6.75 11L3 7.16181L3.58917 6.55879L6.75 9.79353L12.4108 4L13 4.60302L6.75 11Z' fill='white'/%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

.signup__form-field label>span.signup__radio-wrap input:checked+.signup__radio-pseudo:before,
.signup__form-field label>span.signup__checkbox-wrap input:checked+.signup__checkbox-pseudo:before {
  background: transparent;
  border-color: var(--Black);
}

.signup__form-field label>span.signup__checkbox-wrap input:checked+.signup__checkbox-pseudo:before {
  background: var(--Dark);
  border: 0.5px solid rgba(0, 0, 0, var(--Opacity-Border-Medium));
}

.signup__form-field label>span.signup__radio-wrap input:checked+.signup__radio-pseudo:after {
  background: var(--Black);
}

.signup__form-field label>span.signup__checkbox-wrap input:checked+.signup__checkbox-pseudo:after {
  opacity: 1;
}

.signup__form-field label>span.signup__radio-text,
.signup__form-field label>span.signup__checkbox-text {
  color: #000;
  font-family: Gamay, sans-serif;
  font-size: 14px;
  font-style: normal;
  font-weight: var(--Font-Weight-Light);
  line-height: 120%;
  margin-left: 12px;
  flex: 1;
}

/* Electrical product - House/Apartment selector */
.signup__section--electrical_product {
  text-align: center;
  padding: 0;
}

.signup__section--electrical_product .signup__section-title {
  color: var(--Black);
  text-align: center;
  font-size: clamp(var(--Font-Size-XL), 5vw, var(--Font-Size-XXL));
  font-style: normal;
  font-weight: var(--Font-Weight-Bold);
  line-height: normal;
  margin-bottom: calc(var(--Spacing-Page-Bottom) - var(--Spacing-LG));
}

.signup__section--electrical_product>p {
  color: var(--Black);
  text-align: center;
  font-size: clamp(var(--Font-Size-Base), 2vw, var(--Font-Size-MD));
  font-style: normal;
  font-weight: var(--Font-Weight-Light);
  line-height: 140%;
  margin-bottom: calc(var(--Spacing-Page-Bottom) - var(--Spacing-SM));
  max-width: var(--Max-Width-Text);
  margin-left: auto;
  margin-right: auto;
  padding: 0 var(--Spacing-Hero-Padding);
}

.signup__electrical_product {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 0;
}

.signup__electrical_product .signup__form-field--radio,
.signup__electrical_product .signup__form-field--checkbox {
  padding: 0;
}

/* Hide date picker inputs on electrical_product step */
.signup__section--electrical_product input[type="date"],
.signup__electrical_product input[type="date"] {
  display: none;
}

.housing-type-selector {
  display: flex;
  gap: var(--Selector-Gap);
  justify-content: center;
  flex-wrap: wrap;
  margin: 0 auto;
  width: 100%;
  max-width: var(--Max-Width-Form-Large);
  padding: 0 var(--Spacing-Hero-Padding);
}

.housing-option-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  text-align: center;
  padding: var(--Font-Size-XL);
  border-radius: var(--Radius-LG);
  border: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  background: transparent;
  cursor: pointer;
  transition: all var(--Transition-Base);
  width: var(--Max-Width-Housing-Card);
  min-height: var(--Min-Height-Situation-Card);
  gap: var(--Card-Gap);
  flex: 0 1 auto;
}

.housing-option-card:hover {
  border-radius: var(--Radius-LG);
  border: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  background: var(--White);
}

.housing-option-card.selected,
.housing-option-card[data-selected="true"] {
  border-radius: var(--Radius-LG);
  border: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  background: var(--White);
}

.housing-option-card img {
  width: 100%;
  max-width: var(--Max-Width-Housing-Image);
  height: auto;
  border-radius: var(--Radius-LG);
  display: block;
  transition: opacity var(--Transition-Fast);
  object-fit: contain;
}

.housing-option-card img {
  opacity: 1;
}


.housing-option-label {
  color: var(--Black);
  text-align: center;
  font-size: var(--Font-Size-MD);
  font-style: normal;
  font-weight: var(--Font-Weight-Medium);
  line-height: var(--Line-Height-Label);
  margin-top: 0;
  border: none;
  padding: 0;
}

.housing-option-help {
  margin-top: var(--Spacing-XS);
  font-size: var(--Font-Size-SM);
  color: var(--Gray-Dark);
  line-height: var(--Line-Height-Relaxed);
  border: none;
  padding: 0;
}

/* Form help text */
.signup__form-help {
  font-size: var(--Font-Size-XS);
  line-height: var(--Line-Height-XLoose);
  color: var(--Gray-Dark);
  margin: var(--Spacing-SM) 0 0;
  text-align: left;
}

.signup__form-field--checkbox .signup__form-help {
  margin-top: var(--Spacing-XS);
  margin-left: clamp(12px, calc(12px + var(--Checkbox-Size, 16px)), 28px);
  padding-left: 0;
}

.signup__situation .signup__form-help {
  text-align: left;
}

/* TilkÃ¸b / Add-on products (electrical_product_additional) */
.signup__section--electrical_product_additional-additional {
  max-width: var(--Max-Width-Form-Medium);
  margin: 0 auto;
  padding: 0 clamp(var(--Spacing-Base), 2vw, var(--Spacing-XL));
}

/* Permissions section - desktop padding */
.signup__section--permissions {
  padding: 0 clamp(var(--Spacing-Base), 2vw, var(--Spacing-XL));
}

/* Permissions form-group - desktop: padding top and bottom only */
.signup__permissions .signup__form-group {
  padding: var(--Spacing-Base) 0;
  margin: 0;
}

.signup__section--electrical_product_additional-additional .signup__section-title {
  color: var(--Black);
  text-align: center;
  font-size: clamp(var(--Font-Size-XL), 5vw, var(--Font-Size-XXL));
  font-style: normal;
  font-weight: var(--Font-Weight-Bold);
  line-height: normal;
  margin-bottom: var(--Spacing-Base);
}

.signup__section--electrical_product_additional-additional>p {
  color: var(--Black);
  text-align: center;
  font-size: clamp(var(--Font-Size-Base), 2vw, var(--Font-Size-MD));
  font-style: normal;
  font-weight: var(--Font-Weight-Light);
  line-height: 140%;
  margin-bottom: var(--Spacing-XL);
}

/* Light gray card container for all content */
.signup__electrical_additional_products {
  background: var(--Nautral-Lightest);
  border-radius: var(--Radius-LG);
  padding: var(--Spacing-Base);
  display: flex;
  flex-direction: column;
  gap: var(--Spacing-Base);
  box-shadow: 0 var(--Radius-SM) var(--Spacing-MD) rgba(0, 0, 0, var(--Opacity-Shadow-Light));
  max-width: var(--Max-Width-Form-Medium);
  width: 100%;
  margin: 0 auto;
}

.signup__electrical_additional_products .addon-group-section {
  display: flex;
  flex-direction: column;
  gap: 0;
  border-radius: var(--Radius-MD);
  border: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  overflow: visible;
}

.signup__electrical_additional_products .addon-group-section:not(:first-child) {
  margin-top: var(--Spacing-Base);
}

/* Clickable header card - styled like other cards */
.signup__electrical_additional_products .addon-group-header {
  padding: var(--Spacing-Base) var(--Spacing-LG);
  background: transparent;
  cursor: pointer;
  transition: all var(--Transition-Base);
  display: flex;
  flex-direction: column;
  position: relative;
  border: none;
}

.signup__electrical_additional_products .addon-group-header:hover,
.signup__electrical_additional_products .addon-group-header.open {
  background: var(--White);
}

.signup__electrical_additional_products .addon-group-header.addon-group-skip-button {
  cursor: pointer;
}

.signup__electrical_additional_products .addon-group-header.addon-group-skip-button:hover {
  background: var(--White);
}

.signup__electrical_additional_products .addon-group-header.addon-group-skip-button .signup__group-title {
  color: var(--Black);
  font-style: normal;
  font-weight: var(--Font-Weight-ExtraBold);
  line-height: var(--Line-Height-Label);
}

.signup__electrical_additional_products .addon-group-header.addon-group-skip-button .addon-group-description {
  color: var(--Black);
  text-align: left;
  font-style: normal;
  font-weight: var(--Font-Weight-Light);
  line-height: var(--Line-Height-Label);
}

.signup__electrical_additional_products .addon-group-header.addon-group-skip-button .addon-group-description+p,
.signup__electrical_additional_products .addon-group-header.addon-group-skip-button p:not(.addon-group-description):not(.signup__group-title) {
  color: #000;
  text-align: center;
  font-size: 12px;
  font-style: normal;
  font-weight: 100;
  line-height: 32px;
  /* 266.667% */
}

.signup__electrical_additional_products .addon-group-header .addon-tooltip-icon {
  position: absolute;
  top: var(--Spacing-Base);
  right: var(--Spacing-LG);
  width: var(--Tooltip-Icon-Size);
  height: var(--Tooltip-Icon-Size);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: help;
  z-index: var(--Z-Index-Tooltip-Icon);
  transition: all var(--Transition-Fast);
}

.signup__electrical_additional_products .addon-tooltip-icon svg {
  width: var(--Tooltip-Icon-Size);
  height: var(--Tooltip-Icon-Size);
  display: block;
}

.signup__electrical_additional_products .addon-tooltip-icon:hover svg path {
  fill-opacity: var(--Opacity-Tooltip-Hover);
}

.signup__electrical_additional_products .addon-tooltip-text {
  position: absolute;
  bottom: calc(100% + var(--Spacing-MD));
  left: 50%;
  transform: translateX(-50%);
  background: var(--White);
  color: var(--Black);
  padding: var(--Spacing-MD) var(--Spacing-Base);
  border-radius: var(--Radius-MD);
  border: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  box-shadow: 0 var(--Radius-SM) var(--Spacing-MD) rgba(0, 0, 0, var(--Opacity-Shadow-Medium));
  font-size: clamp(var(--Font-Size-XS), 1.5vw, var(--Font-Size-Base));
  font-weight: var(--Font-Weight-Regular);
  line-height: var(--Line-Height-XLoose);
  white-space: nowrap;
  max-width: 300px;
  white-space: normal;
  width: max-content;
  min-width: 200px;
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition: opacity var(--Transition-Fast), visibility var(--Transition-Fast);
  z-index: var(--Z-Index-Tooltip);
}

.signup__electrical_additional_products .addon-tooltip-icon:hover .addon-tooltip-text {
  opacity: 1;
  visibility: visible;
}

.signup__electrical_additional_products .addon-tooltip-text::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: var(--Radius-MD) solid transparent;
  border-right: var(--Radius-MD) solid transparent;
  border-top: var(--Radius-MD) solid var(--White);
}

.signup__electrical_additional_products .addon-tooltip-text::before {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: calc(var(--Radius-MD) + 1px) solid transparent;
  border-right: calc(var(--Radius-MD) + 1px) solid transparent;
  border-top: calc(var(--Radius-MD) + 1px) solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  margin-top: -1px;
}

.signup__tooltip-handle {
  position: absolute;
  top: 0;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: var(--Spacing-XS);
  cursor: help;
  z-index: var(--Z-Index-Tooltip-Icon);
  transition: all var(--Transition-Fast);
}

.signup__tooltip-question {
  color: rgba(0, 0, 0, 0.50);
  font-family: var(--Font-Family);
  font-size: 10px;
  font-style: normal;
  font-weight: 400;
  line-height: 100%;
  margin-right: var(--Spacing-XS);
  white-space: nowrap;
}

.signup__tooltip-handle svg {
  width: var(--Tooltip-Icon-Size);
  height: var(--Tooltip-Icon-Size);
  display: block;
}

.signup__tooltip-handle:hover svg path {
  fill-opacity: var(--Opacity-Tooltip-Hover);
}

.signup__tooltip-handle .tooltip-text {
  position: absolute;
  bottom: calc(100% + var(--Spacing-MD));
  left: 50%;
  transform: translateX(-50%);
  background: var(--White);
  color: var(--Black);
  padding: var(--Spacing-MD) var(--Spacing-Base);
  border-radius: var(--Radius-MD);
  border: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  box-shadow: 0 var(--Radius-SM) var(--Spacing-MD) rgba(0, 0, 0, var(--Opacity-Shadow-Medium));
  font-size: clamp(var(--Font-Size-XS), 1.5vw, var(--Font-Size-Base));
  font-weight: var(--Font-Weight-Regular);
  line-height: var(--Line-Height-XLoose);
  white-space: normal;
  max-width: 300px;
  width: max-content;
  min-width: 200px;
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition: opacity var(--Transition-Fast), visibility var(--Transition-Fast);
  z-index: var(--Z-Index-Tooltip);
}

.signup__tooltip-handle:hover .tooltip-text {
  opacity: 1;
  visibility: visible;
}

.signup__tooltip-handle .tooltip-text::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: var(--Radius-MD) solid transparent;
  border-right: var(--Radius-MD) solid transparent;
  border-top: var(--Radius-MD) solid var(--White);
}

.signup__tooltip-handle .tooltip-text::before {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: calc(var(--Radius-MD) + 1px) solid transparent;
  border-right: calc(var(--Radius-MD) + 1px) solid transparent;
  border-top: calc(var(--Radius-MD) + 1px) solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  margin-top: -1px;
}

.signup__electrical_additional_products .addon-group-content {
  padding: var(--Spacing-Base) var(--Spacing-LG);
  padding-top: var(--Spacing-MD);
  background-color: var(--White);
  border-top: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  overflow: visible;
}

.signup__electrical_additional_products .addon-group-content--hidden {
  display: none;
}

.signup__electrical_additional_products .addon-group-content--hidden {
  display: none;
}


.signup__electrical_additional_products .signup__group-title {
  color: var(--Black);
  font-size: clamp(var(--Font-Size-MD), 2vw, var(--Font-Size-LG));
  font-weight: var(--Font-Weight-Bold);
  line-height: var(--Line-Height-Loose);
  margin-bottom: 0;
  margin-top: 0;
  text-align: left;
}

.signup__electrical_additional_products .addon-group-description-line1 {
  color: var(--Black);
  font-size: var(--Font-Size-Base);
  font-weight: var(--Font-Weight-Light);
  line-height: var(--Line-Height-XLoose);
  margin-bottom: 0;
  text-align: left;
}

.signup__electrical_additional_products .addon-group-description-line2 {
  color: var(--Black);
  font-size: var(--Font-Size-Base);
  font-weight: var(--Font-Weight-Regular);
  line-height: var(--Line-Height-XLoose);
  margin-bottom: 0;
  text-align: left;
}

.signup__electrical_additional_products .addon-group-description-line2 strong {
  font-weight: var(--Font-Weight-Bold);
}

.signup__electrical_additional_products .addon-group-description {
  color: var(--Black);
  font-size: var(--Font-Size-MD);
  font-weight: var(--Font-Weight-Regular);
  line-height: var(--Line-Height-XLoose);
  margin-bottom: 0;
  text-align: left;
}

.signup__electrical_additional_products .addon-group-section h4 {
  color: var(--Black);
  font-size: clamp(var(--Font-Size-Base), 1.5vw, var(--Font-Size-MD));
  font-weight: var(--Font-Weight-Bold);
  line-height: var(--Line-Height-Loose);
  margin-bottom: var(--Spacing-MD);
  margin-top: var(--Spacing-SM);
  text-align: left;
}

.signup__electrical_additional.signup__form-field--checkbox,
.signup__electrical_additional.signup__form-field--radio {
  padding: var(--Spacing-Base) var(--Spacing-MD);
  transition: all var(--Transition-Base);
  margin-bottom: 0;
}

.signup__electrical_additional.signup__form-field--checkbox:hover,
.signup__electrical_additional.signup__form-field--radio:hover {
  background: var(--White);
}

.signup__electrical_additional.signup__form-field--checkbox:has(input:checked),
.signup__electrical_additional.signup__form-field--radio:has(input:checked) {
  background: var(--White);
}

.signup__electrical_additional.signup__form-field--checkbox label {
  padding: 0;
  border: none;
  border-radius: 0;
  background: transparent;
  cursor: pointer;
  transition: none;
  align-items: center;
  margin-bottom: 0;
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  width: 100%;
}

.signup__electrical_additional .signup__checkbox-wrap,
.signup__electrical_additional .signup__radio-wrap {
  flex-shrink: 0;
  margin-top: 2px;
}


.signup__electrical_additional .signup__checkbox-text {
  color: #000;
  font-family: Gamay;
  font-size: 14px;
  font-style: normal;
  font-weight: 600;
  line-height: 120%;
  margin-left: 0;
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--Spacing-XS);
  text-align: left;
}

.signup__electrical_additional .signup__form-help {
  font-size: clamp(var(--Font-Size-XS), 1.5vw, var(--Font-Size-Base));
  line-height: var(--Line-Height-XLoose);
  color: var(--Gray-Dark);
  margin-top: var(--Spacing-XS);
  margin-left: clamp(12px, calc(12px + var(--Checkbox-Size, 16px)), 28px);
  padding-left: 0;
  display: block;
  text-align: left;
}

.signup__electrical_additional .signup__checkbox-text .signup__form-help,
.signup__electrical_additional .signup__form-field--checkbox .signup__checkbox-text+.signup__form-help,
.signup__electrical_additional .signup__form-field--checkbox label .signup__checkbox-text~.signup__form-help,
.signup__electrical_additional label .signup__checkbox-text .signup__form-help {
  margin-left: 0;
}


.signup__electrical_additional_products .signup__form-group {
  margin-bottom: 0;
}

.signup__customer,
.signup__installation_address_search,
.signup__installation_address,
.signup__installation_address_select,
.signup__permissions_extras,
.signup__payment_pbs_more {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: flex-start;
  flex-wrap: wrap;
  margin: 0;
  width: 100%;
  max-width: 100%;
}

.signup__situation_cos_start_date,
.signup__situation_move_start_date {
  margin: 0 -18px;
}

.signup__installation_address_select {
  max-width: var(--Max-Width-Form-Medium);
  margin: 0 auto;
  justify-content: center;
}

.signup__installation_address_select .signup__form-group {
  display: flex;
  justify-content: center;
  width: 100%;
  flex-wrap: wrap;
  gap: 1rem;
}

.signup__customer {
  max-width: var(--Max-Width-Form-Medium);
  margin: 0 auto;
}

.signup__section--customer .signup__section-title {
  display: block;
  width: 100%;
  flex-basis: 100%;
  order: -1;
  margin-bottom: clamp(var(--Spacing-Base), 2vh, var(--Spacing-XL));
}

.signup__customer .signup__form-field {
  flex-basis: 50%;
}

.signup__customer .signup__form-field:last-child:nth-child(odd),
.signup__customer .signup__form-field:last-child:nth-child(5),
.signup__customer .signup__form-field:last-child:nth-child(7),
.signup__customer .signup__form-field:last-child:nth-child(9) {
  flex-basis: 100%;
}

.signup__installation_address_search {
  max-width: var(--Max-Width-Form-Medium);
  margin: 0 auto;
  justify-content: center;
}

.signup__installation_address_search .signup__form-field {
  flex-basis: 100%;
}

.signup__section--installation_address .signup__section-title {
  display: block;
  width: 100%;
  flex-basis: 100%;
  order: -1;
  margin-bottom: clamp(var(--Spacing-Base), 2vh, var(--Spacing-XL));
  text-align: center;
}

.signup__installation_address {
  max-width: var(--Max-Width-Form-Medium);
  margin: 0 auto;
  justify-content: center;
}

.signup__installation_address .signup__form-field {
  flex-basis: 50%;
}


/* Make the last field take full width if it's alone in its row - permissions and payment */
.signup__permissions_extras .signup__form-field:last-child:nth-child(odd),
.signup__permissions_extras .signup__form-field:last-child:nth-child(5),
.signup__permissions_extras .signup__form-field:last-child:nth-child(7),
.signup__permissions_extras .signup__form-field:last-child:nth-child(9),
.signup__payment_pbs_more .signup__form-field:last-child:nth-child(odd),
.signup__payment_pbs_more .signup__form-field:last-child:nth-child(5),
.signup__payment_pbs_more .signup__form-field:last-child:nth-child(7),
.signup__payment_pbs_more .signup__form-field:last-child:nth-child(9) {
  flex-basis: 100%;
}

/* Situation date sections - ensure last field takes full width */
.signup__situation_cos_start_date .signup__form-field:last-child,
.signup__situation_move_start_date .signup__form-field:last-child:not(.signup__situation_move_acknowledged) {
  width: 100%;
}

.signup__permissions_extras,
.signup__payment_pbs_more {
  max-width: 100%;
  width: 100%;
  margin: 0;
  justify-content: flex-start;
}

.signup__customer .signup__form-field label>span.signup__radio-wrap,
.signup__customer .signup__form-field label>span.signup__checkbox-wrap,
.signup__installation_address_manual .signup__form-field label>span.signup__radio-wrap,
.signup__installation_address_manual .signup__form-field label>span.signup__checkbox-wrap {
  display: none;
}

.signup__customer .signup__form-field label>span:not(.signup__radio-wrap):not(.signup__checkbox-wrap):not(.signup__radio-text):not(.signup__checkbox-text) {
  display: block;
  margin-bottom: var(--Spacing-MD);
  font-size: var(--Font-Size-Base);
  color: var(--Black);
  font-weight: var(--Font-Weight-Regular);
}

/* Payment & Permissions */
.signup__payment {
  width: 100%;
  max-width: 600px;
  margin: 40px auto 0 auto;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: var(--Spacing-SM);
}

.signup__payment .signup__section-title {
  font-size: var(--Font-Size-XXL);
  font-weight: var(--Font-Weight-Bold);
  margin-bottom: var(--Spacing-LG);
}

.signup__payment .signup__group-title {
  font-size: 20px;
  font-weight: var(--Font-Weight-Bold);
  margin-bottom: var(--Spacing-SM);
  text-align: left;
}

.signup__payment .signup__form-field {
  padding: 0;
  margin-bottom: var(--Spacing-SM);
  max-width: 100%;
  width: 100%;
}

.signup__payment .signup__form-field label>span:not(.signup__radio-wrap):not(.signup__checkbox-wrap):not(.signup__radio-text):not(.signup__checkbox-text) {
  display: block;
  margin-bottom: var(--Spacing-MD);
  font-size: var(--Font-Size-Base);
  color: var(--Black);
  font-weight: var(--Font-Weight-Regular);
}

.signup__payment .signup__form-field input[type="text"],
.signup__payment .signup__form-field input[type="number"],
.signup__payment .signup__form-field input[type="tel"] {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

.signup__payment .signup__payment_pbs_more {
  width: 100%;
  max-width: 100%;
  margin: 0;
}

.signup__payment .signup__form-field--radio {
  margin-bottom: 0;
  width: 100%;
}

.signup__payment .signup__payment_method_name.signup__form-field--radio {
  border-radius: 8px;
  border: 1px solid rgba(0, 0, 0, 0.10);
  background: transparent;
  padding: 0;
  margin-bottom: var(--Spacing-SM);
  transition: all var(--Transition-Base);
  cursor: pointer;
  display: flex;
  flex-direction: column;
  position: relative;
  min-height: fit-content;
  /* Ensure container has calculable height for absolute positioning */
}

.signup__payment .signup__payment_method_name.signup__form-field--radio input[type="radio"] {
  position: absolute;
  opacity: 0;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  cursor: pointer;
  z-index: 10;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  pointer-events: auto;
  -webkit-appearance: none;
  appearance: none;
}

.signup__payment .signup__payment_method_name.signup__form-field--radio input[type="radio"][data-click-handler-added] {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
  top: 0;
  left: 0;
  pointer-events: none;
}

.signup__payment .signup__payment_method_name.signup__form-field--radio:hover,
.signup__payment .signup__payment_method_name.signup__form-field--radio:has(input:checked) {
  background: #FFF;
}

.signup__payment .signup__payment_method_name.signup__form-field--radio label {
  border: none;
  display: flex;
  padding: 20px;
  flex-direction: column;
  justify-content: center;
  align-items: flex-start;
  gap: 16px;
  align-self: stretch;
  background: transparent;
  cursor: pointer;
  transition: all var(--Transition-Base);
  width: 100%;
  margin: 0;
  position: static;
  /* Changed from relative so input can be positioned relative to container */
  z-index: 1;
}

.signup__payment .signup__payment_method_name.signup__form-field--radio label .signup__radio-wrap {
  display: none;
}

.signup__payment .signup__form-field--radio label img {
  flex-shrink: 0;
  width: 32px;
  height: 32px;
  object-fit: contain;
  display: block;
  order: 1;
}


.signup__payment .signup__payment_method_name.signup__form-field--radio label .signup__radio-text {
  order: 2;
  font-weight: var(--Font-Weight-Bold);
  font-size: 20px;
  /* Match group-title font size */
  color: var(--Black);
  margin: 0;
  line-height: var(--Line-Height-Loose);
  width: 100%;
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
}

.signup__payment .signup__payment_method_name.signup__form-field--radio .signup__form-help {
  font-size: var(--Font-Size-XS);
  color: var(--Gray-Dark);
  line-height: var(--Line-Height-Loose);
  margin: 0;
  padding: 0 20px 20px 20px;
  width: 100%;
  pointer-events: none;
  /* Allow clicks to pass through to input */
}


.signup__payment .signup__payment_pbs_frequency .signup__form-field--radio,
.signup__payment .signup__payment_card_frequency .signup__form-field--radio,
.signup__payment .signup__payment_ls_frequency .signup__form-field--radio,
.signup__payment .signup__payment_fi_frequency .signup__form-field--radio {
  margin-bottom: var(--Spacing-SM);
  padding: 0;
}

.signup__payment .signup__payment_pbs_frequency .signup__form-field--radio label,
.signup__payment .signup__payment_card_frequency .signup__form-field--radio label,
.signup__payment .signup__payment_ls_frequency .signup__form-field--radio label,
.signup__payment .signup__payment_fi_frequency .signup__form-field--radio label {
  display: flex;
  align-items: center;
  gap: var(--Spacing-SM);
  padding: 0;
  border: none;
  background: transparent;
  cursor: pointer;
}

.signup__payment .signup__payment_pbs_frequency .signup__form-field--radio label .signup__radio-wrap,
.signup__payment .signup__payment_card_frequency .signup__form-field--radio label .signup__radio-wrap,
.signup__payment .signup__payment_ls_frequency .signup__form-field--radio label .signup__radio-wrap,
.signup__payment .signup__payment_fi_frequency .signup__form-field--radio label .signup__radio-wrap {
  display: flex;
  align-items: center;
  flex-shrink: 0;
}

.signup__payment .signup__payment_pbs_frequency .signup__form-field--radio label .signup__radio-text,
.signup__payment .signup__payment_card_frequency .signup__form-field--radio label .signup__radio-text,
.signup__payment .signup__payment_ls_frequency .signup__form-field--radio label .signup__radio-text,
.signup__payment .signup__payment_fi_frequency .signup__form-field--radio label .signup__radio-text {
  color: #000;
  font-family: Gamay, sans-serif;
  font-size: 14px;
  font-style: normal;
  font-weight: var(--Font-Weight-Light);
  line-height: 120%;
  margin-left: var(--Spacing-Base);
  flex: 1;
}

.signup__payment .signup__payment_pbs_frequency .signup__group-title,
.signup__payment .signup__payment_card_frequency .signup__group-title,
.signup__payment .signup__payment_ls_frequency .signup__group-title,
.signup__payment .signup__payment_fi_frequency .signup__group-title,
.signup__payment .payment-frequency-heading {
  margin-top: var(--Spacing-XS);
  margin-left: 0;
  font-weight: var(--Font-Weight-Bold);
  font-size: 20px;
  /* Match section-title font size */
  color: var(--Black);
  margin-bottom: var(--Spacing-XS);
  text-align: left;
}

.signup__payment .signup__form-help {
  margin-top: var(--Spacing-XS);
  margin-left: calc(32px + var(--Spacing-SM));
  font-size: var(--Font-Size-XS);
  color: var(--Gray-Dark);
  line-height: var(--Line-Height-XLoose);
}

.signup__permissions {
  width: 100%;
  max-width: var(--Max-Width-Form);
  margin: 0 auto;
  padding: 0 var(--Spacing-SM);
}

.signup__permissions .signup__form-field--checkbox {
  padding: 0;
  display: flex;
  flex-direction: column;
  margin-bottom: 6px;
}

.signup__permissions .signup__form-field--checkbox label {
  padding: 0;
  border: none;
  border-radius: 0;
  background: transparent;
  cursor: pointer;
  transition: none;
  align-items: center;
  margin-bottom: 0;
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
}

.signup__permissions .signup__form-field--checkbox label:hover {
  border-color: transparent;
}

.signup__permissions .signup__form-field--checkbox input:checked~.signup__checkbox-text {
  font-weight: var(--Font-Weight-Regular);
}

.signup__permissions .signup__checkbox-text {
  color: #000;
  font-family: Gamay;
  font-size: 14px;
  font-style: normal;
  font-weight: 600;
  line-height: 120%;
  margin-left: 0;
  flex: 1;
}

.signup__permissions .signup__form-help {
  margin-top: var(--Spacing-XS);
  margin-left: clamp(12px, calc(12px + var(--Checkbox-Size, 16px)), 28px);
  padding-left: 0;
  font-size: var(--Font-Size-XS);
  color: var(--Gray-Dark);
  line-height: var(--Line-Height-XLoose);
}

.signup__summary {
  width: 100%;
  margin: 0 auto;
  padding: 16px;
  background: var(--White);
  border-radius: 4px;
  outline: 1px solid rgba(0, 0, 0, 0.10);
  outline-offset: -1px;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  grid-auto-flow: row dense;
  gap: 12px 16px;
  /* Smaller vertical gap, standard horizontal gap */
  align-items: start;
}

.signup__summary>br {
  display: none;
}

.signup__summary>h4,
.signup__summary>p {
  font-weight: var(--Font-Weight-Light);
  font-size: var(--Font-Size-Base);
  line-height: var(--Line-Height-Loose);
  color: var(--Black);
  margin: 0 0 16px 0;
  text-align: left;
  font-family: var(--Font-Family);
  grid-column: 1 / -1;
  /* Span full width across 2 columns */
}

.signup__form-title+h4,
.signup__form-title+p,
h1+h4,
h1+p {
  font-weight: var(--Font-Weight-Light);
  font-size: var(--Font-Size-Base);
  line-height: var(--Line-Height-Loose);
  color: var(--Black);
  margin: 0 0 16px 0;
  text-align: left;
  font-family: var(--Font-Family);
  width: 100%;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}

.signup__summary>h4 *,
.signup__summary>p *,
.signup__form-title+h4 *,
.signup__form-title+p *,
h1+h4 *,
h1+p * {
  margin-left: 0;
}

.signup__summary>section {
  display: flex;
  flex-direction: column;
  padding: 16px;
  background: var(--Nautral-Lightest);
  border-radius: 4px;
  outline: 1px solid rgba(0, 0, 0, 0.10);
  outline-offset: -1px;
}

.signup__summary>section:not(:nth-of-type(1)) {
  background: transparent;
  outline: none;
  padding: 0 16px;
}

.signup__summary>section h3 {
  font-weight: 600;
  font-size: 14px;
  /* Smaller, more compact */
  line-height: 20px;
  /* Tighter line height */
  color: var(--Black);
  margin: 0 0 4px 0;
  /* More compact spacing */
  text-align: left;
  font-family: var(--Font-Family);
}

.signup__summary>section:nth-of-type(1) {
  order: 5;
  grid-column: 1 / -1;
  grid-row: auto;
  margin-top: 16px;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
}

.signup__summary>section:nth-of-type(1) h3 {
  grid-column: 1 / -1;
  /* Heading spans full width */
  font-weight: 400;
  /* Regular weight */
  font-size: 14px;
  line-height: 20px;
}

.signup__summary>.signup__permissions-earliest-date {
  font-weight: var(--Font-Weight-Light);
  font-size: var(--Font-Size-Base);
  line-height: var(--Line-Height-Loose);
  color: var(--Black);
  margin: 0 0 16px 0;
  text-align: center;
  /* Centered text */
  font-family: var(--Font-Family);
  grid-column: 1 / -1;
  /* Span full width across 2 columns */
}

.signup__summary>section:nth-of-type(1) .row {
  display: flex;
  flex-direction: column;
  gap: 0;
  margin-bottom: 0;
}

.signup__summary>section:nth-of-type(2) {
  order: 1;
  grid-column: 1;
  grid-row: 2;
}

.signup__summary>section:nth-of-type(3) {
  order: 2;
  grid-column: 2;
  grid-row: 2;
}

.signup__summary>section:nth-of-type(4) {
  order: 3;
  grid-column: 1;
  grid-row: 3;
}

.signup__summary>section:nth-of-type(5),
.signup__summary>section.summary-price-section {
  order: 4;
  grid-column: 2;
  grid-row: 3;
}

.signup__summary .summary-price-section h3 {
  font-weight: 600;
  font-size: 14px;
  line-height: 20px;
  margin: 0 0 8px 0;
}

.signup__summary .summary-price-section #summary-price-value {
  font-weight: var(--Font-Weight-Light);
  font-size: 14px;
  /* Same as other values */
  line-height: 20px;
  color: var(--Black);
}

.signup__summary .summary-price-section .summary-price-currency {
  font-size: 14px;
  vertical-align: baseline;
  margin-left: 0;
  color: var(--Black);
}

.signup__summary>section .row {
  display: flex;
  gap: 0;
  margin-bottom: 8px;
  align-items: flex-start;
  width: 100%;
  flex-direction: column;
}

.signup__summary>section .row:last-child {
  margin-bottom: 0;
}

.signup__summary>section .row:not(:has(.col-md-3):has(.col-md-7))>* {
  display: block;
  width: 100%;
  flex: none;
}


.signup__summary>section:nth-of-type(1) .row:has(.col-md-3):has(.col-md-7) {
  gap: 32px;
}

.signup__summary .row:not(:has(.col-md-3):has(.col-md-7)) .col-md-3,
.signup__summary .row:not(:has(.col-md-3):has(.col-md-7)) .col-md-7,
.signup__summary .row:not(:has(.col-md-3):has(.col-md-7)) .col-md-10 {
  width: 100%;
  display: block;
}

.signup__summary .col-md-3,
.signup__summary .col-md-7,
.signup__summary .col-md-10 {
  padding: 0;
  color: var(--Black);
  font-size: 14px;
  /* Smaller, more compact */
  font-family: var(--Font-Family);
  line-height: 20px;
  /* Tighter line height */
  font-weight: var(--Font-Weight-Light);
  display: block;
}

.signup__summary>section .row:not(:has(.col-md-3):has(.col-md-7)) .col-md-3,
.signup__summary>section .row:not(:has(.col-md-3):has(.col-md-7)) .col-md-7,
.signup__summary>section .row:not(:has(.col-md-3):has(.col-md-7)) .col-md-10 {
  width: 100%;
  display: block;
  flex: none;
}

.signup__summary .col-md-3 {
  font-weight: 600;
  min-width: 0;
  white-space: nowrap;
}

.signup__summary .col-md-7 {
  min-width: 0;
}

.signup__summary .row:has(.col-md-10:only-child) .col-md-10 {
  width: 100%;
}

.signup__summary>section:nth-of-type(1) .row {
  display: flex;
  flex-direction: column;
  gap: 0;
  margin-bottom: 0;
  /* No margin, handled by grid gap */
}

.signup__summary>section:nth-of-type(1) .row:has(.col-md-3):has(.col-md-7) {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 32px;
  /* Horizontal gap between label and value */
}

.signup__summary>section:nth-of-type(1) .row:not(:has(.col-md-3):has(.col-md-7)) {
  display: flex;
  flex-direction: column;
}

.signup__summary+p,
.signup__summary+div,
.signup__form-group:has(.signup__summary)+p,
.signup__form-group:has(.signup__summary)+div {
  font-size: 12px;
  line-height: 20px;
  color: var(--Black);
  margin-top: 16px;
  text-align: left;
  font-family: var(--Font-Family);
  font-weight: var(--Font-Weight-Light);
}

#earliest-date,
p:has(#earliest-date),
.signup__permissions-earliest-date,
.signup__summary+p:has(#earliest-date),
.signup__form-group:has(.signup__summary)+p:has(#earliest-date) {
  text-align: center;
  width: 100%;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}

/* Price card - bottom-right fixed position */
#price-card {
  position: fixed;
  right: var(--Spacing-XL);
  bottom: var(--Spacing-XL);
  z-index: 1000;
  pointer-events: none;
}

#price-card .price-card__inner {
  pointer-events: auto;
  background: var(--White, #FFF);
  border: 1px solid rgba(0, 0, 0, 0.20);
  border-radius: 2px;
  padding: var(--Spacing-LG) var(--Spacing-Base) var(--Spacing-MD);
  min-width: 170px;
  box-shadow: 8px 8px 1px 0 #000;
  text-align: left;
  font-family: var(--Font-Family);
}

#price-card .price-card__label {
  font-weight: var(--Font-Weight-Bold);
  font-size: var(--Font-Size-Base);
  margin-bottom: var(--Spacing-SM);
  color: var(--Black);
}

#price-card .price-card__amount {
  font-weight: var(--Font-Weight-ExtraBold);
  font-size: 56px;
  line-height: var(--Line-Height-Tight);
  letter-spacing: -1px;
  color: var(--Black);
}

#price-card .price-card__currency {
  font-size: 32px;
  vertical-align: super;
  margin-left: var(--Radius-XS);
  color: var(--Black);
}

#price-card .price-card__sub {
  margin-top: var(--Spacing-SM);
  font-size: var(--Font-Size-XS);
  font-weight: var(--Font-Weight-Bold);
  color: var(--Black);
}

/* Responsive tweaks for price card */
@media (max-width: 768px) {
  #price-card {
    right: var(--Spacing-Base);
    bottom: var(--Spacing-Base);
    transform: scale(0.6);
    transform-origin: bottom right;
  }

  #price-card .price-card__inner {
    padding: var(--Spacing-Base) var(--Spacing-SM) var(--Spacing-XS);
    min-width: 120px;
  }

  #price-card .price-card__label {
    font-size: var(--Font-Size-XS);
    margin-bottom: var(--Spacing-XS);
  }

  #price-card .price-card__amount {
    font-size: 32px;
  }

  #price-card .price-card__currency {
    font-size: 18px;
  }

  #price-card .price-card__sub {
    font-size: 10px;
    margin-top: var(--Spacing-XS);
  }
}

@media (max-width: 480px) {
  #price-card {
    transform: scale(0.5);
  }
}

/* Backlink button */
.backlink-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  margin-left: 6px;
  border: 1px solid #c9c9c9;
  border-radius: var(--Radius-MD);
  background: var(--White);
  color: #222;
  text-decoration: none;
  cursor: pointer;
  font-size: var(--Font-Size-XS);
  line-height: 1;
}

.backlink-btn:hover {
  background: #f5f5f5;
  border-color: #aaa;
}

.backlink-btn:focus-visible {
  outline: 2px solid #2b7cff;
  outline-offset: 2px;
}

.backlink-btn__icon {
  transform: translateY(-0.5px);
  /* centering */
}

/* Navigation buttons */
.actions {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: var(--Spacing-Page-Bottom) 0 calc(var(--Button-Padding-X) * 2);
  gap: var(--Spacing-Base);
  max-width: var(--Max-Width-Button-Container);
  margin-left: auto;
  margin-right: auto;
}

.actions input[type="submit"] {
  font-weight: var(--Font-Weight-Bold);
  font-size: var(--Font-Size-MD);
  padding: var(--Button-Padding-Y) var(--Button-Padding-X);
  border: none;
  border-radius: var(--Radius-LG);
  cursor: pointer;
  transition: all var(--Transition-Base);
}

#back-button {
  color: var(--Black);
  text-align: center;
  text-decoration: none;
  background: transparent;
  font-size: var(--Font-Size-Base);
  font-style: normal;
  font-weight: var(--Font-Weight-Normal);
  line-height: var(--Line-Height-Button);
}

#back-button:hover {
  color: var(--Black);
}

#next-button {
  background: var(--Black);
  color: var(--White);
}

#next-button:hover {
  opacity: var(--Opacity-Hover);
}

#next-button:disabled {
  background: var(--Disabled-Gray);
  cursor: not-allowed;
  opacity: var(--Opacity-Disabled);
}

#group-container:has(.signup__section--electrical_product) .actions #back-button {
  display: none;
}

#group-container:has(.signup__section--electrical_product) .actions #next-button,
.signup__section--electrical_product~.actions #next-button,
.signup__section--electrical_product+.actions #next-button,
body:has(.signup__section--electrical_product) .actions #next-button {
  display: none;
  visibility: hidden;
  opacity: 0;
  pointer-events: none;
  position: absolute;
  width: 0;
  height: 0;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
}

.signup__section--situation~* .actions #next-button,
#group-container:has(.signup__section--situation) .actions #back-button,
#group-container:has(.signup__section--situation) .actions #next-button,
.signup__section--situation .actions #back-button,
.signup__section--situation .actions #next-button {
  display: inline-block;
  visibility: visible;
  opacity: 1;
  pointer-events: auto;
  position: static;
  width: auto;
  height: auto;
  overflow: visible;
}

/* Error messages */
.signup__has-error .signup__error-message {
  color: var(--Error-Red);
  font-size: var(--Font-Size-XS);
  padding: 0;
  margin-top: var(--Spacing-SM);
  margin-bottom: 0;
  font-weight: var(--Font-Weight-Bold);
  display: block;
  width: 100%;
  flex-basis: 100%;
}

.signup__has-error input[type="text"],
.signup__has-error input[type="search"] {
  border-color: var(--Error-Red);
}

.signup__situation_cos_start_date .signup__has-error .signup__error-message,
.signup__situation_move_start_date .signup__has-error .signup__error-message {
  display: block;
  color: var(--Error-Red);
  font-size: var(--Font-Size-XS);
  padding: 0;
  margin-top: var(--Spacing-SM);
  margin-bottom: 0;
  font-weight: var(--Font-Weight-Bold);
}

.signup__has-error.signup__input--changed .signup__error-message {
  display: none;
}

/* Links */
.signup__page a {
  text-decoration: underline;
  color: var(--Black);
  word-wrap: break-word;
}

.signup__page a:hover {
  opacity: var(--Opacity-Link-Hover);
}

/* Dawa autocomplete */
.signup__dawa_autocomplete label>span {
  display: none;
}

.signup__dawa_autocomplete .dawa-autocomplete-suggestions {
  margin: var(--Spacing-SM) 0 0;
  border-radius: var(--Radius-LG);
  background: var(--White);
  box-shadow: 0 var(--Radius-MD) var(--Font-Size-XS) rgba(0, 0, 0, var(--Opacity-Shadow-Medium));
  border: 1px solid var(--Gray-Light);
}

.signup__dawa_autocomplete .dawa-autocomplete-suggestions .dawa-autocomplete-suggestion {
  color: var(--Black);
  padding: var(--Font-Size-Base) var(--Spacing-Hero-Padding);
  font-size: var(--Font-Size-Base);
  line-height: var(--Font-Size-LG);
}

.signup__dawa_autocomplete .dawa-autocomplete-suggestions .dawa-autocomplete-suggestion.dawa-selected,
.signup__dawa_autocomplete .dawa-autocomplete-suggestions .dawa-autocomplete-suggestion:hover {
  background: var(--Hover-Bg);
}

.signup__situation_cos_start_date .signup__form-field label,
.signup__situation_move_start_date .signup__form-field label {
  position: relative;
}


/* Submit section */
.signup__section--submit {
  border-radius: 0;
  text-align: center;
  padding: 0;
  background: none;
  margin-bottom: 0;
}

.signup__section--submit .signup__form-group {
  background: transparent;
  padding: 0;
}

.signup__section--submit .signup__section-title {
  display: none;
}

.signup__submit {
  font-weight: var(--Font-Weight-Bold);
  background-color: var(--Black);
  border: none;
  border-radius: var(--Radius-LG);
  padding: var(--Button-Padding-Y) var(--Button-Padding-X);
  color: var(--White);
  font-size: var(--Font-Size-MD);
  cursor: pointer;
  transition: all var(--Transition-Slow);
}

.signup__submit:hover,
.signup__submit:focus {
  opacity: var(--Opacity-Hover);
}

.disabled {
  background-color: var(--Disabled-Gray);
}

/* Responsive */
/* Mobile breakpoint: 980px */
@media only screen and (max-width: 980px) {
  /* ============================================
     BASE LAYOUT & SPACING
     ============================================ */

  .signup__page {
    padding-top: var(--Spacing-Page-Top-Mobile);
    padding-bottom: 0;
  }

  .signup__form-field {
    flex-basis: 100%;
    padding: 0 var(--Spacing-Base);
  }

  /* Permissions and electrical additional - remove padding from form-field on mobile */
  .signup__permissions .signup__form-field,
  .signup__electrical_additional_products .signup__form-field {
    padding: 0;
  }

  .signup__form-group {
    padding: 0 var(--Spacing-Base);
  }

  /* Permissions form-group - mobile: padding on all sides */
  .signup__permissions .signup__form-group {
    padding: var(--Spacing-Base) var(--Spacing-Base) 0 var(--Spacing-Base);
  }

  .signup__section--electrical_product_additional-additional .signup__form-group {
    padding: 0;
  }

  /* ============================================
     HERO & NAVIGATION
     ============================================ */

  .signup__page .hero {
    padding: var(--Spacing-Hero-Padding) var(--Spacing-Base) 0 var(--Spacing-Base);
    flex-wrap: wrap;
    gap: var(--Spacing-SM);
    align-items: flex-start;
  }

  .signup__page .hero img {
    max-width: var(--Max-Width-Logo-Mobile);
    height: auto;
  }

  .signup__page .hero .topnav {
    position: absolute;
    top: var(--Spacing-Hero-Padding);
    right: var(--Spacing-Base);
    padding: 0;
    width: auto;
    order: 1;
    margin-top: 0;
    align-self: flex-start;
    z-index: calc(var(--Z-Index-Hero) + 1);
  }

  .topnav ul {
    flex-direction: row;
    gap: var(--Spacing-SM);
    flex-wrap: wrap;
    justify-content: flex-end;
    margin-top: 0;
    padding-top: 0;
    align-items: flex-start;
  }

  .topnav ul li {
    flex: 0 1 auto;
  }

  .topnav ul li a {
    font-size: var(--Font-Size-Base);
    padding: var(--Spacing-MD) var(--Spacing-MD);
    white-space: nowrap;
  }

  .topnav ul li:nth-child(1) a {
    padding-left: calc(var(--Spacing-Base) + 18px + var(--Spacing-XS));
  }

  /* ============================================
     TYPOGRAPHY - TITLES
     ============================================ */

  /* All section/group/form titles - simplified selector */
  .signup__section-title,
  .signup__group-title,
  .signup__form-title,
  h1.signup__section-title,
  h5.signup__section-title,
  h1.signup__group-title,
  h1.signup__form-title {
    font-size: 1.5rem;

  }

  /* Electrical and payment sections - override with !important for specificity */
  .signup__section--electrical_product .signup__section-title,
  .signup__section--electrical_product_additional-additional .signup__section-title,
  .signup__payment .signup__section-title {
    font-size: 1.5rem !important;
    padding: 0 var(--Spacing-Base);
    margin-left: var(--Spacing-Base);
    margin-right: var(--Spacing-Base);
  }


  .signup__summary>section h3,
  .signup__summary .summary-price-section h3 {
    font-size: 1rem;
    /* 16px */
  }

  .signup__electrical_additional_products .addon-group-section h4 {
    font-size: 0.9375rem;
    /* 15px */
  }

  .signup__section--electrical_product>p {
    font-size: var(--Font-Size-Base);
    /* 14px */
  }

  .signup__electrical_additional_products .addon-group-description,
  .signup__electrical_additional_products .addon-group-header.addon-group-skip-button .addon-group-description {
    font-size: var(--Font-Size-Base);
    /* 14px */
  }

  .signup__electrical_additional .signup__checkbox-text,
  .signup__permissions .signup__checkbox-text,
  .signup__form-field label>span.signup__checkbox-text {
    font-size: var(--Font-Size-Base);
    /* 14px */
  }

  .signup__summary>h4,
  .signup__summary>p,
  .signup__form-title+h4,
  .signup__form-title+p,
  h1+h4,
  h1+p {
    font-size: var(--Font-Size-Base);
    /* 14px */
  }

  .signup__payment .signup__payment_method_name.signup__form-field--radio label .signup__radio-text {
    font-size: 1.125rem;
    /* 18px - matches group-title on mobile */
  }

  /* ============================================
     FORM SECTIONS - PADDING
     ============================================ */

  .signup__section--electrical_product,
  .signup__section--situation,
  .signup__section--gas_product,
  .signup__section--installation_address_select,
  .signup__section--installation_address_manual,
  .signup__section--electrical_product_additional-additional,
  .signup__section--customer,
  .signup__section--installation_address_search,
  .signup__section--payment {
    padding: 0 var(--Spacing-Base);
  }

  /* Permissions section - no padding on mobile for maximum width */
  .signup__section--permissions {
    padding: 0;
  }

  /* ============================================
     FORM ELEMENTS
     ============================================ */

  .signup__situation {
    flex-direction: column;
    align-items: stretch;
  }

  .signup__situation .signup__form-field--radio label {
    min-width: auto;
    width: 100%;
  }

  .signup__form-field--checkbox label {
    gap: 12px;
  }


  .signup__form-field--checkbox .signup__form-help {
    margin-left: clamp(12px, calc(12px + var(--Checkbox-Size, 16px)), 28px);
  }

  /* ============================================
     CARDS & SELECTORS
     ============================================ */

  .housing-type-selector {
    flex-direction: column;
    align-items: stretch;
    gap: var(--Selector-Gap-Mobile);
  }

  .housing-type-selector>div,
  .situation-option-card,
  .housing-option-card {
    min-width: auto;
    max-width: 100%;
    width: 100%;
    flex: 1 1 100%;
  }

  .situation-option-card,
  .housing-option-card {
    min-height: auto;
  }

  .situation-option-card img,
  .housing-option-card img {
    max-width: var(--Max-Width-Housing-Image-Mobile);
    width: 100%;
  }

  /* ============================================
     SUMMARY SECTION
     ============================================ */

  .signup__summary {
    display: flex;
    flex-direction: column;
    grid-template-columns: none;
    grid-auto-flow: unset;
    padding: 12px;
    margin: 0 var(--Spacing-Base);
    max-width: calc(100% - (var(--Spacing-Base) * 2));
    gap: var(--Spacing-Base);
  }

  .signup__summary>section {
    width: 100%;
    padding: 0 !important;
  }

  .signup__summary>section:nth-of-type(1) {
    display: flex;
    flex-direction: column;
    gap: var(--Spacing-SM);
    margin-top: 0;
    padding: var(--Spacing-Base) !important;
  }

  .signup__summary>section:nth-of-type(1) .row:has(.col-md-3):has(.col-md-7) {
    display: flex;
    flex-direction: column;
    gap: var(--Spacing-SM);
    width: 100%;
  }

  .signup__summary>section:nth-of-type(1) .row:has(.col-md-3):has(.col-md-7) .col-md-3 {
    margin-bottom: 0;
    width: 100%;
  }

  .signup__summary>section:nth-of-type(1) .row:has(.col-md-3):has(.col-md-7) .col-md-7 {
    width: 100%;
  }

  .signup__summary>h4,
  .signup__summary>p {
    width: 100%;
    max-width: 100%;
  }

  /* ============================================
     CONTAINERS - FULL WIDTH
     ============================================ */

  .signup__form-section,
  .signup__form-group,
  .signup__section,
  .signup__installation_address_select,
  .signup__payment_pbs_more,
  .signup__permissions {
    max-width: 100%;
    width: 100%;
  }

  /* Permissions - minimal padding on mobile for maximum width */
  .signup__permissions {
    padding: 0 var(--Spacing-XS);
  }

  /* Installation address select buttons - full width on mobile */
  .signup__installation_address_select .installation-type-selector {
    gap: 0;
  }

  .installation-option-card {
    border-radius: 0;
    border-right: none;
  }

  .installation-option-card:first-child {
    border-radius: var(--Radius-MD) var(--Radius-MD) 0 0;
  }

  .installation-option-card:last-child {
    border-radius: 0 0 var(--Radius-MD) var(--Radius-MD);
    border-right: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  }

  .installation-option-card:only-child {
    border-radius: var(--Radius-MD);
    border-right: 1px solid rgba(0, 0, 0, var(--Opacity-Border-Light));
  }

  /* ============================================
     INPUTS & FORM ELEMENTS - RESPONSIVE
     ============================================ */

  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="date"],
  select,
  textarea,
  .signup__form-field--date input {
    max-width: 100%;
    width: 100%;
  }

  /* Fix for iOS Safari zoom issue - font-size must be at least 16px */
  .signup__situation_cos_start_date .signup__form-field input[type="date"],
  .signup__situation_move_start_date .signup__form-field input[type="date"],
  .signup__situation_cos_start_date .signup__form-field input[type="text"],
  .signup__situation_move_start_date .signup__form-field input[type="text"] {
    font-size: 16px;
  }

  .signup__situation_cos_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit,
  .signup__situation_move_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit,
  .signup__situation_cos_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit-fields-wrapper,
  .signup__situation_move_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit-fields-wrapper,
  .signup__situation_cos_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit-month-field,
  .signup__situation_move_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit-month-field,
  .signup__situation_cos_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit-day-field,
  .signup__situation_move_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit-day-field,
  .signup__situation_cos_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit-year-field,
  .signup__situation_move_start_date .signup__form-field input[type="date"]::-webkit-datetime-edit-year-field {
    font-size: 16px;
  }

  /* ============================================
     STEP 3 - CUSTOMER & INSTALLATION ADDRESS
     Mobile: flex-direction column (1 input per row)
     ============================================ */

  .signup__customer,
  .signup__installation_address {
    flex-direction: column;
  }

  .signup__customer .signup__form-field,
  .signup__installation_address .signup__form-field {
    flex-basis: 100%;
    width: 100%;
  }

  .signup__customer .signup__form-field label,
  .signup__installation_address .signup__form-field label {
    display: flex;
    flex-direction: column;
    width: 100%;
  }

  /* ============================================
     ACTIONS & BUTTONS
     ============================================ */

  .actions {
    flex-direction: row;
    gap: var(--Spacing-SM);
    padding: 0 var(--Spacing-Base);
    width: 100%;
    max-width: 100%;
  }

  #next-button {
    margin-left: 0;
    flex: 1;
  }

  #back-button {
    flex: 1;
  }

  .actions input[type="submit"],
  #back-button,
  #next-button {
    width: auto;
    flex: 1;
  }

  /* ============================================
     TEXT ELEMENTS & SPACING
     ============================================ */

  .signup__form-title+h4,
  .signup__form-title+p,
  h1+h4,
  h1+p,
  .signup__summary+p,
  .signup__summary+div {
    margin-left: var(--Spacing-Base);
    margin-right: var(--Spacing-Base);
    max-width: calc(100% - (var(--Spacing-Base) * 2));
  }

  #earliest-date,
  p:has(#earliest-date),
  .signup__permissions-earliest-date {
    margin-right: var(--Spacing-Base);
    max-width: calc(100% - (var(--Spacing-Base) * 2));
  }

  /* ============================================
     ADDITIONAL PRODUCTS
     ============================================ */

  /* Electrical additional products - minimal padding/margin on mobile for maximum width */
  .signup__electrical_additional_products {
    padding: var(--Spacing-SM) var(--Spacing-XS);
    margin: 0 var(--Spacing-XS);
    max-width: calc(100% - (var(--Spacing-XS) * 2));
  }

  /* Electrical additional products section - no padding on mobile */
  .signup__section--electrical_product_additional-additional {
    padding: 0;
  }

  .signup__electrical_additional.signup__form-field--checkbox {
    padding: var(--Spacing-SM) var(--Spacing-Base);
  }

  /* ============================================
     PROGRESS BAR
     ============================================ */

  #progress-container {
    padding: 0 var(--Spacing-Base);
    margin-top: var(--Spacing-SM);
  }

  #progress-text {
    font-size: var(--Font-Size-XS);
  }

  /* ============================================
     TOOLTIPS
     ============================================ */

  .signup__tooltip,
  [data-tooltip]::after,
  .signup__form-field--tooltip .signup__tooltip,
  .addon-tooltip-text,
  .signup__electrical_additional_products .addon-tooltip-icon:hover .addon-tooltip-text,
  .signup__electrical_additional_products .addon-tooltip-icon:focus .addon-tooltip-text {
    max-width: calc(100vw - (var(--Spacing-Base) * 2));
    min-width: calc(100vw - (var(--Spacing-Base) * 2));
    width: calc(100vw - (var(--Spacing-Base) * 2));
  }

  /* ============================================
     PRICE CARD
     ============================================ */

  #price-card {
    width: auto;
    min-width: auto;
  }

  #price-card .price-card__inner {
    min-width: auto;
    width: auto;
    max-width: calc(100vw - (var(--Spacing-Base) * 2));
  }

  /* ============================================
     TRUSTPILOT WIDGET
     ============================================ */

  .wrapper-top .tp-widget-reviews {
    font-size: var(--Font-Size-Base);
    min-width: 200px;
  }
}
    </style>
    <script src="/assets/frontend/application-8cc274b44428786bc97544d4814697fc7bbef7eaaf9a59a142179b4ef5b842c3.js"></script>
    <script>
// Configuration constants
const CONFIG = {
  // URLs
  TYPEKIT_URL: 'https://use.typekit.net',
  TYPEKIT_P_URL: 'https://p.typekit.net',
  GITHUB_IMAGE_BASE: 'https://sarahtlenglish.github.io/test-ENLY/img',
  GITHUB_RAW_BASE: 'https://raw.githubusercontent.com/Sarahtlenglish/test-ENLY/main/img',
  VERCEL_IMAGE_BASE: 'https://h8nip4886wtjcobp.public.blob.vercel-storage.com',
  
  // Product Images (step 1 - electrical product) - using raw GitHub URLs
  IMAGE_HOUSE_OFF: 'https://raw.githubusercontent.com/Sarahtlenglish/test-ENLY/main/img/house_off.webp',
  IMAGE_HOUSE_ON: 'https://raw.githubusercontent.com/Sarahtlenglish/test-ENLY/main/img/house_on.webp',
  IMAGE_FLAT_OFF: 'https://raw.githubusercontent.com/Sarahtlenglish/test-ENLY/main/img/flat_off.webp',
  IMAGE_FLAT_ON: 'https://raw.githubusercontent.com/Sarahtlenglish/test-ENLY/main/img/flat_on.webp',
  
  // Product IDs
  PRODUCT_ID_HOUSE: 1001,
  PRODUCT_ID_APARTMENT: 1958,
  
  // Delays (milliseconds)
  DELAY_BUTTON_CLICK: 100,
  DELAY_BUTTON_STATE_UPDATE: 50,
  DELAY_REORGANIZE: 100,
  
  // Selectors
  SELECTOR_ELECTRICAL_PRODUCT: '.signup__electrical_product',
  SELECTOR_NEXT_BUTTON: '#next-button',
  SELECTOR_GROUP_CONTAINER: '#group-container',
  
  // GTM/GA4
  CURRENCY: 'DKK',
  PRODUCT_CATEGORY: 'El',
  DEFAULT_AFFILIATE: 'ENLY.dk',
  DEFAULT_UNKNOWN: 'unknown',
  DEFAULT_UNKNOWN_PRODUCT: 'Ukendt produkt',
  
  // Text content
  TOOLTIP_HELP_LABEL: 'HjÃ¦lp',
  TOOLTIP_TEXT_CHARGING: 'Uanset hvordan du lader derhjemme, skal vi vide det, hvis din faste pris skal dÃ¦kke opladning af elbil.',
  TOOLTIP_TEXT_NO_CHARGER: 'VÃ¦lg denne hvis du ikke har noget som helst der bruger ekstra strÃ¸m i din bolig.',
  TITLE_CHARGING: 'Jeg skal kunne lade hjemme',
  DESC_CHARGING_LINE1: 'Hvis du har ladestander er der et tillÃ¦g til din faste pris.',
  DESC_CHARGING_LINE2: 'TilgÃ¦ngeld fÃ¥r du ogsÃ¥ en <strong>hÃ¸jere forbrugsgrÃ¦nse</strong> pÃ¥ 250 kWh ekstra om mÃ¥neden*',
  SUBHEADING_SOLUTION: 'VÃ¦lg din lÃ¸sning',
  TITLE_NO_CHARGER: 'Jeg lader ikke elbil hjemme',
  DESC_NO_CHARGER: 'Nix. Ingen elbil hjemme hos mig. Videre til min aftale.',
  MOVE_DATE_LABEL: 'Angiv din indflytningsdato.',
  
  // Product keywords for categorization
  KEYWORD_NO_CHARGER: ['ikke ladestander', 'har ikke']
};

CONFIG.PRICE_MAP = new Map();

function storeSelectedProductFromId(id) {
  if (!id) {
    return;
  }

  const price = CONFIG.PRICE_MAP.get(Number(id));

  const payload = {
    id: id,
    price: Number(price || 0)
  };

  window.selected_electrical_product = JSON.stringify(payload);
}

function populatePriceMapFromRadios() {
  const radios = document.querySelectorAll('input[type="radio"][name="prospect[electrical_product_name]"]');
  radios.forEach(radio => {
    const productId = Number(radio.dataset.productId);
    const price = radio.dataset.price ? Number(radio.dataset.price) : null;
    if (productId && price !== null) {
      CONFIG.PRICE_MAP.set(productId, price);
    }
  });
}

// Helper function to get element path for debugging
function getElementPath(element) {
  const path = [];
  let current = element;
  while (current && current !== document.body) {
    let selector = current.tagName.toLowerCase();
    if (current.id) {
      selector += '#' + current.id;
    }
    if (current.className && typeof current.className === 'string') {
      selector += '.' + current.className.split(' ').join('.');
    }
    path.unshift(selector);
    current = current.parentElement;
  }
  return path.join(' > ');
}

window.ENLY_DEBUG_PRICE = false;

function loadStoredSelectedProduct() {
  try {
    const raw = window.selected_electrical_product;
    return raw ? JSON.parse(raw) : null;
  } catch {
    return null;
  }
}

function computeMonthlyPrice() {
  const stored = loadStoredSelectedProduct();
  const mainPrice = stored?.price || 0;
  return mainPrice;
}

// Add preconnect links for Typekit fonts
(function() {
  const preconnect1 = document.createElement('link');
  preconnect1.rel = 'preconnect';
  preconnect1.href = CONFIG.TYPEKIT_URL;
  document.head.appendChild(preconnect1);

  const preconnect2 = document.createElement('link');
  preconnect2.rel = 'preconnect';
  preconnect2.href = CONFIG.TYPEKIT_P_URL;
  preconnect2.crossOrigin = 'anonymous';
  document.head.appendChild(preconnect2);
})();

// Sync date input values before FormData is created (runs before submitStep() in sidekilde.html)
// This ensures date values are included when FormData is created from the form
document.addEventListener('click', function(e) {
  if (e.target.id === 'next-button' || e.target.closest('#next-button')) {
    // Sync ALL date input values BEFORE FormData is created
    const dateInputs = document.querySelectorAll('input[type="date"]');
    dateInputs.forEach(input => {
      if (input.value) {
        input.setAttribute('value', input.value);
      }
    });
  }
}, true); // Use capture phase to run BEFORE other handlers


// Hus / Lejlighed radio
document.addEventListener('group:loaded', function() {
    // Populate PRICE_MAP from radio button data attributes
    populatePriceMapFromRadios();
    
    const container = document.querySelector(CONFIG.SELECTOR_ELECTRICAL_PRODUCT);
    if (!container) return;

    const allRadios = Array.from(container.querySelectorAll('input[type="radio"][name="prospect[electrical_product_name]"]'));
    if (!allRadios.length) return;
    // Always start with no preselection in the UI (even if markup/server sets one)
    allRadios.forEach(r => { r.checked = false; });

    // Build options from config (ids/images/labels); price comes from radio button data attributes
    const options = [
        {
            id: CONFIG.PRODUCT_ID_HOUSE,
            image: CONFIG.IMAGE_HOUSE_OFF,
            selectedImage: CONFIG.IMAGE_HOUSE_ON,
            hoverImage: CONFIG.IMAGE_HOUSE_ON,
            label: 'Jeg bor i hus',
            variant: 'House',
            price: 0 // Will be set dynamically from data-price attribute
        },
        {
            id: CONFIG.PRODUCT_ID_APARTMENT,
            image: CONFIG.IMAGE_FLAT_OFF,
            selectedImage: CONFIG.IMAGE_FLAT_ON,
            hoverImage: CONFIG.IMAGE_FLAT_ON,
            label: 'Jeg bor i lejlighed',
            variant: 'Apartment',
            price: 0 // Will be set dynamically from data-price attribute
        }
    ];

    window.productInfoMap = window.productInfoMap || new Map();
    window.productMap = window.productMap || {};
    options.forEach(opt => {
        window.productInfoMap.set(String(opt.id), opt);
        window.productMap[opt.id] = opt;
    });

    // Disable all hidden inputs initially; we will re-enable the selected one
    const allHiddenInputs = container.querySelectorAll('input[type="hidden"][name="prospect[electrical_product_id]"]');
    allHiddenInputs.forEach(input => {
        input.disabled = true;
    });

    // Hide original radios and their labels
    const radioGroups = container.querySelectorAll('.signup__electrical_product_name');
    radioGroups.forEach(group => group.style.display = 'none');

    // Create wrapper for the image selector UI
    const imgWrapper = document.createElement('div');
    imgWrapper.className = 'housing-type-selector';

    options.forEach(opt => {
        const radio = allRadios.find(r => (r.dataset.productId || r.value) == opt.id);
        if (!radio) return;

        window.productMap = window.productMap || {};

        const productId = radio.dataset.productId;
        if (!window.productMap[productId]) {
          window.productMap[productId] = opt;
        }

        const originalGroup = radio.closest('.signup__electrical_product_name');
        const helpText = originalGroup?.querySelector('.signup__form-help');

        // price strictly from PRICE_MAP (colleague's approach)
        // Get price dynamically from radio button data-price attribute
        const radioForOption = document.querySelector(`input[type="radio"][name="prospect[electrical_product_name]"][data-product-id="${opt.id}"]`);
        if (radioForOption && radioForOption.dataset.price) {
            opt.price = Number(radioForOption.dataset.price);
        } else {
            opt.price = 0; // Default to 0 if no price found
        }

        const optionContainer = document.createElement('div');
        optionContainer.className = 'housing-option-card';
        optionContainer.dataset.productId = String(opt.id);
        optionContainer.setAttribute('role', 'button');
        optionContainer.tabIndex = 0;
        const isInitiallyChecked = radio.checked;
        if (isInitiallyChecked) {
            optionContainer.classList.add('selected');
            optionContainer.setAttribute('data-selected', 'true');
        } else {
            optionContainer.classList.remove('selected');
            optionContainer.setAttribute('data-selected', 'false');
        }

    const img = document.createElement('img');
        // Always start with "off" image
    img.src = opt.image;
    img.alt = opt.label;
    img.dataset.defaultImage = opt.image;
    img.dataset.hoverImage = opt.hoverImage;
    img.dataset.selectedImage = opt.selectedImage;

        const label = document.createElement('div');
        label.className = 'housing-option-label';
        label.textContent = opt.label;

        const help = helpText ? helpText.cloneNode(true) : null;
        if (help) {
            help.className = 'housing-option-help';
        }

        const select = async () => {
            document.querySelectorAll('input[type="radio"][name="prospect[electrical_product_name]"]').forEach(r => r.checked = false);
            document.querySelectorAll('input[type="hidden"][name="prospect[electrical_product_id]"]').forEach(hi => hi.disabled = true);
            radio.checked = true;

            // Enable the hidden input matching this product ID
            const hiddenInput = container.querySelector(
                `input[type="hidden"][name="prospect[electrical_product_id]"][value="${radio.dataset.productId}"]`
            );
            if (hiddenInput) hiddenInput.disabled = false;

            // Store selection for price card/summary
            storeSelectedProductFromId(radio.dataset.productId);

            // Trigger change events to ensure form validation
            radio.dispatchEvent(new Event('change', { bubbles: true }));
            radio.dispatchEvent(new Event('input', { bubbles: true }));
            
            const radioField = radio.closest('.signup__form-field--radio');
            if (radioField) {
                radioField.dispatchEvent(new Event('change', { bubbles: true }));
            }

            // Update all option visuals
            imgWrapper.querySelectorAll('.housing-option-card').forEach((card) => {
                const pid = card.dataset.productId;
                const info = window.productInfoMap?.get(pid);
                const matchedRadio = allRadios.find(r => (r.dataset.productId || r.value) == pid);
                const img = card.querySelector('img');
                
                if (matchedRadio && matchedRadio.checked) {
                    card.classList.add('selected');
                    card.setAttribute('data-selected', 'true');
                    if (img && info) img.src = info.selectedImage;
                } else {
                    card.classList.remove('selected');
                    card.setAttribute('data-selected', 'false');
                    if (img && info) img.src = info.image;
                }
            });
            
            // Automatically submit and go to next step after a short delay to ensure events are processed
            setTimeout(() => {
                const nextButton = document.querySelector(CONFIG.SELECTOR_NEXT_BUTTON);
                if (nextButton) {
                    // Sync date values before programmatic click
                    const dateInputs = document.querySelectorAll('input[type="date"]');
                    dateInputs.forEach(input => {
                        if (input.value) {
                            input.setAttribute('value', input.value);
                        }
                    });
                    
                    // Temporarily enable button if disabled
                    const wasDisabled = nextButton.disabled;
                    if (wasDisabled) {
                        nextButton.disabled = false;
                    }
                    nextButton.click();
                    // Restore disabled state if it was disabled
                    if (wasDisabled) {
                        setTimeout(() => {
                            nextButton.disabled = wasDisabled;
                        }, CONFIG.DELAY_BUTTON_CLICK);
                    }
                }
            }, CONFIG.DELAY_BUTTON_CLICK);
        };

        // Add hover event listeners for image switching
        optionContainer.addEventListener('mouseenter', function() {
            const isSelected = this.classList.contains('selected') || this.getAttribute('data-selected') === 'true';
            if (!isSelected) {
                img.src = opt.hoverImage;
            }
        });
        
        optionContainer.addEventListener('mouseleave', function() {
            const isSelected = this.classList.contains('selected') || this.getAttribute('data-selected') === 'true';
            if (!isSelected) {
                img.src = opt.image;
            }
        });

        // Keyboard support for accessibility
        optionContainer.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                select();
            }
        });

        optionContainer.addEventListener('click', select);
        optionContainer.appendChild(img);
        optionContainer.appendChild(label);
        if (help) optionContainer.appendChild(help);
        imgWrapper.appendChild(optionContainer);
    });

    container.appendChild(imgWrapper);

    // Initial sync: respect any prechecked radio (from server / persisted form)
    const initiallyChecked = allRadios.find(r => r.checked);
    if (initiallyChecked) {
        const hiddenInput = container.querySelector(
            `input[type="hidden"][name="prospect[electrical_product_id]"][value="${initiallyChecked.dataset.productId}"]`
        );
        if (hiddenInput) hiddenInput.disabled = false;

        imgWrapper.querySelectorAll('.housing-option-card').forEach((card) => {
            const pid = card.dataset.productId;
            const info = window.productInfoMap?.get(pid);
            const img = card.querySelector('img');
            const matchedRadio = allRadios.find(r => (r.dataset.productId || r.value) == pid);
            const isSel = matchedRadio && matchedRadio.checked;
            card.classList.toggle('selected', !!isSel);
            card.setAttribute('data-selected', isSel ? 'true' : 'false');
            if (img && info) img.src = isSel ? info.selectedImage : info.image;
        });

        storeSelectedProductFromId(initiallyChecked.dataset.productId);
    }
});

function initSituationSelector(root) {
    const scope = root || document;
    const situationContainer = scope.querySelector('.signup__situation');
    if (!situationContainer) return;
    
    // Tjek om vi allerede har oprettet selector'en
    if (situationContainer.querySelector('.situation-type-selector')) {
        return; // Allerede initialiseret
    }
    
    const situationOptions = [
        {
            value: 'change_of_supplier',
            image: `${CONFIG.VERCEL_IMAGE_BASE}/house_with_man.png`,
            label: 'Jeg Ã¸nsker at skifte elleverandÃ¸r'
        },
        {
            value: 'move',
            image: `${CONFIG.VERCEL_IMAGE_BASE}/hus_og_bil.png`,
            label: 'Jeg skal flytte eller er lige flyttet ind'
        }
    ];

    // Find og skjul original radio buttons
    const radioFields = situationContainer.querySelectorAll('.signup__form-field--radio');
    radioFields.forEach(field => field.style.display = 'none');

    // Create wrapper for the image selector UI
    const situationWrapper = document.createElement('div');
    situationWrapper.className = 'situation-type-selector';

    situationOptions.forEach(opt => {
        // PrÃ¸v forskellige mÃ¥der at finde radio button pÃ¥
        let radio = situationContainer.querySelector(`input[type="radio"][name*="situation"][value*="${opt.value}"]`);
        
        if (!radio) {
            // PrÃ¸v at finde via label tekst
            const labels = situationContainer.querySelectorAll('label');
            for (let label of labels) {
                const labelText = label.textContent.trim().toLowerCase();
                if ((opt.value === 'change_of_supplier' && (labelText.includes('skifte') || labelText.includes('elleverandÃ¸r'))) ||
                    (opt.value === 'move' && (labelText.includes('flytte') || labelText.includes('flyttet')))) {
                    radio = label.querySelector('input[type="radio"]');
                    if (radio) break;
                }
            }
        }
        
        if (!radio) {
            // Hvis stadig ikke fundet, prÃ¸v at finde alle situation radios og match baseret pÃ¥ position
            const allRadios = situationContainer.querySelectorAll('input[type="radio"][name*="situation"]');
            if (allRadios.length >= 2) {
                radio = opt.value === 'change_of_supplier' ? allRadios[0] : allRadios[1];
            }
        }
        
        if (!radio) return;

        const optionCard = document.createElement('div');
        optionCard.className = 'situation-option-card';
        if (radio.checked) {
            optionCard.classList.add('selected');
            optionCard.setAttribute('data-selected', 'true');
        }
        optionCard.setAttribute('role', 'button');
        optionCard.tabIndex = 0;

        const img = document.createElement('img');
        img.src = opt.image;
        img.alt = opt.label;

        const label = document.createElement('div');
        label.className = 'situation-option-label';
        label.textContent = opt.label;

        const selectSituation = () => {
            // Uncheck all situation radios
            situationContainer.querySelectorAll('input[type="radio"][name*="situation"]').forEach(r => r.checked = false);
            radio.checked = true;
            
            // Trigger change event on radio to ensure form validation works
            radio.dispatchEvent(new Event('change', { bubbles: true }));
            radio.dispatchEvent(new Event('input', { bubbles: true }));
            
            // Update next button state (will be called automatically by event listeners)
            updateNextButtonState();

            // Update all option visuals
            situationWrapper.querySelectorAll('.situation-option-card').forEach((card) => {
                const cardRadioId = card.dataset.radioId;
                const cardRadio = cardRadioId ? document.getElementById(cardRadioId) : null;
                
                if (cardRadio && cardRadio.checked) {
                    card.classList.add('selected');
                    card.setAttribute('data-selected', 'true');
                } else {
                    card.classList.remove('selected');
                    card.setAttribute('data-selected', 'false');
                }
            });
        };

        if (!radio.id) {
            radio.id = `situation_radio_${opt.value}_${Date.now()}`;
        }
        optionCard.dataset.value = opt.value;
        optionCard.dataset.radioId = radio.id;
        optionCard.addEventListener('click', selectSituation);
        optionCard.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                selectSituation();
            }
        });
        optionCard.appendChild(img);
        optionCard.appendChild(label);
        
        situationWrapper.appendChild(optionCard);
    });

    // Find insert point - after section title, but ensure date/checkbox sections come AFTER cards
    const sectionTitle = situationContainer.querySelector('.signup__section-title');
    
    // Insert after title
    if (sectionTitle) {
        if (sectionTitle.nextSibling) {
            situationContainer.insertBefore(situationWrapper, sectionTitle.nextSibling);
        } else {
            situationContainer.appendChild(situationWrapper);
        }
    } else {
        // Insert at beginning if no title
        situationContainer.insertBefore(situationWrapper, situationContainer.firstChild);
    }
}

// Init situation selector on both initial DOM load (for validation error reloads) and group loads
document.addEventListener('DOMContentLoaded', () => initSituationSelector(document));
document.addEventListener('group:loaded', (e) => {
    initSituationSelector(e?.detail?.container || document);
});

// Fallback: observe DOM changes in group container to (re)init situation cards after partial updates/validation reloads
document.addEventListener('DOMContentLoaded', () => {
    const container = document.querySelector(CONFIG.SELECTOR_GROUP_CONTAINER);
    if (!container) return;

    const observer = new MutationObserver((mutations) => {
        for (const mutation of mutations) {
            const added = Array.from(mutation.addedNodes || []);
            if (added.some(node =>
                node.nodeType === 1 &&
                (node.matches?.('.signup__situation') || node.querySelector?.('.signup__situation'))
            )) {
                initSituationSelector(container);
                break;
            }
        }
    });

    observer.observe(container, { childList: true, subtree: true });
});


// Gas product selector - konverter radio buttons til store tekst knapper
document.addEventListener('group:loaded', function() {
    const nextButton = document.querySelector(CONFIG.SELECTOR_NEXT_BUTTON);
    const gasSection = document.querySelector('.signup__section--gas_product');
    if (nextButton) {
        const gasVisible = gasSection && gasSection.offsetParent !== null;
        if (gasVisible) {
            nextButton.style.display = 'none';
        } else {
            nextButton.style.display = '';
        }
    }

    const gasContainer = document.querySelector('.signup__gas_product');
    if (!gasContainer) {
        return;
    }
    
    // Tjek om vi allerede har oprettet selector'en
    if (gasContainer.querySelector('.gas-type-selector')) {
        return; // Allerede initialiseret
    }

    // Find alle gas radio buttons
    const radioFields = gasContainer.querySelectorAll('.signup__form-field--radio');
    if (radioFields.length === 0) {
        return;
    }

    // Find og skjul original radio buttons
    radioFields.forEach(field => field.style.display = 'none');

    // Create wrapper for the button selector UI
    const gasWrapper = document.createElement('div');
    gasWrapper.className = 'gas-type-selector';

    // Find alle radio buttons og deres labels
    const allRadios = gasContainer.querySelectorAll('input[type="radio"][name*="gas"]');
    
    allRadios.forEach((radio, index) => {
        // Find label tekst
        const radioField = radio.closest('.signup__form-field--radio');
        if (!radioField) return;
        
        const labelElement = radioField.querySelector('label');
        if (!labelElement) return;
        
        // Find label tekst (fjern radio button elementer fra teksten)
        const labelText = labelElement.cloneNode(true);
        labelText.querySelectorAll('input, span.signup__radio-wrap, span.signup__radio-pseudo').forEach(el => el.remove());
        const labelTextContent = labelText.textContent.trim();
        
        if (!labelTextContent) return;

        const optionCard = document.createElement('div');
        optionCard.className = 'gas-option-card';
        if (radio.checked) {
            optionCard.classList.add('selected');
            optionCard.setAttribute('data-selected', 'true');
        }
        optionCard.setAttribute('role', 'button');
        optionCard.tabIndex = 0;

        const label = document.createElement('div');
        label.className = 'gas-option-label';
        label.textContent = labelTextContent;

        const selectGas = () => {
            // Uncheck all gas radios with same name
            const radioName = radio.name;
            gasContainer.querySelectorAll(`input[type="radio"][name="${radioName}"]`).forEach(r => r.checked = false);
            radio.checked = true;
            
            // Trigger change event on radio to ensure form validation works
            radio.dispatchEvent(new Event('change', { bubbles: true }));
            radio.dispatchEvent(new Event('input', { bubbles: true }));
            
            // Also trigger on the form field container
            const radioField = radio.closest('.signup__form-field--radio');
            if (radioField) {
                radioField.dispatchEvent(new Event('change', { bubbles: true }));
            }
            
            // Update next button state after selection
            setTimeout(() => {
                updateNextButtonState();
            }, CONFIG.DELAY_BUTTON_STATE_UPDATE);

            // Update all option visuals
            gasWrapper.querySelectorAll('.gas-option-card').forEach((card) => {
                const cardRadioId = card.dataset.radioId;
                const cardRadio = cardRadioId ? document.getElementById(cardRadioId) : null;
                
                if (cardRadio && cardRadio.checked) {
                    card.classList.add('selected');
                    card.setAttribute('data-selected', 'true');
                } else {
                    card.classList.remove('selected');
                    card.setAttribute('data-selected', 'false');
                }
            });

            // Auto-advance: hide next button on gas step and click it programmatically
            const nextButton = document.querySelector(CONFIG.SELECTOR_NEXT_BUTTON);
            if (nextButton) {
                nextButton.style.display = 'none';
                const wasDisabled = nextButton.disabled;
                if (wasDisabled) nextButton.disabled = false;
                setTimeout(() => {
                    nextButton.click();
                    if (wasDisabled) {
                        setTimeout(() => { nextButton.disabled = wasDisabled; }, CONFIG.DELAY_BUTTON_CLICK);
                    }
                }, CONFIG.DELAY_BUTTON_CLICK);
            }
        };

        if (!radio.id) {
            radio.id = `gas_radio_${index}_${Date.now()}`;
        }
        optionCard.dataset.radioId = radio.id;
        optionCard.addEventListener('click', selectGas);
        optionCard.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                selectGas();
            }
        });
        optionCard.appendChild(label);
        
        gasWrapper.appendChild(optionCard);
    });

    // Find insert point - after section title
    const sectionTitle = gasContainer.querySelector('.signup__section-title');
    
    // Insert after title
    if (sectionTitle) {
        if (sectionTitle.nextSibling) {
            gasContainer.insertBefore(gasWrapper, sectionTitle.nextSibling);
        } else {
            gasContainer.appendChild(gasWrapper);
        }
    } else {
        // Insert at beginning if no title
        gasContainer.insertBefore(gasWrapper, gasContainer.firstChild);
    }
});

// Installation address selector - konverter radio buttons til store tekst knapper
document.addEventListener('group:loaded', function() {
    const installationContainer = document.querySelector('.signup__installation_address_select');
    if (!installationContainer) return;
    
    // Tjek om vi allerede har oprettet selector'en
    if (installationContainer.querySelector('.installation-type-selector')) {
        return; // Allerede initialiseret
    }

    // Find alle radio buttons og deres labels - prÃ¸v forskellige navne
    let allRadios = installationContainer.querySelectorAll('input[type="radio"][name*="installation"]');
    
    // Hvis ingen fundet, prÃ¸v at finde alle radio buttons i containeren
    if (allRadios.length === 0) {
        allRadios = installationContainer.querySelectorAll('input[type="radio"]');
    }
    
    // Hvis stadig ingen, prÃ¸v at finde via form-group
    if (allRadios.length === 0) {
        const formGroup = installationContainer.querySelector('.signup__form-group');
        if (formGroup) {
            allRadios = formGroup.querySelectorAll('input[type="radio"]');
        }
    }
    
    if (allRadios.length === 0) {
        return;
    }

    // Find alle installation radio button fields
    const radioFields = installationContainer.querySelectorAll('.signup__form-field--radio');
    
    // Find og skjul original radio buttons (kun hvis vi har fundet nogle)
    radioFields.forEach(field => field.style.display = 'none');

    // Create wrapper for the button selector UI
    const installationWrapper = document.createElement('div');
    installationWrapper.className = 'installation-type-selector';
    
    allRadios.forEach((radio, index) => {
        // Find label tekst
        const radioField = radio.closest('.signup__form-field--radio');
        if (!radioField) return;
        
        const labelElement = radioField.querySelector('label');
        if (!labelElement) return;
        
        // Find label tekst (fjern radio button elementer fra teksten)
        const labelText = labelElement.cloneNode(true);
        labelText.querySelectorAll('input, span.signup__radio-wrap, span.signup__radio-pseudo').forEach(el => el.remove());
        const labelTextContent = labelText.textContent.trim();
        
        if (!labelTextContent) return;

        const optionCard = document.createElement('div');
        optionCard.className = 'installation-option-card';
        if (radio.checked) {
            optionCard.classList.add('selected');
            optionCard.setAttribute('data-selected', 'true');
        }
        optionCard.setAttribute('role', 'button');
        optionCard.tabIndex = 0;

        const label = document.createElement('div');
        label.className = 'installation-option-label';
        label.textContent = labelTextContent;

        const selectInstallation = () => {
            // Uncheck all radios with same name
            const radioName = radio.name;
            installationContainer.querySelectorAll(`input[type="radio"][name="${radioName}"]`).forEach(r => r.checked = false);
            radio.checked = true;
            
            // Trigger change event on radio to ensure form validation works
            radio.dispatchEvent(new Event('change', { bubbles: true }));
            radio.dispatchEvent(new Event('input', { bubbles: true }));
            
            // Also trigger on the form field container
            const radioField = radio.closest('.signup__form-field--radio');
            if (radioField) {
                radioField.dispatchEvent(new Event('change', { bubbles: true }));
            }
            
            // Button state will be updated automatically by event listeners

            // Update all option visuals
            installationWrapper.querySelectorAll('.installation-option-card').forEach((card) => {
                const cardRadioId = card.dataset.radioId;
                const cardRadio = cardRadioId ? document.getElementById(cardRadioId) : null;
                
                if (cardRadio && cardRadio.checked) {
                    card.classList.add('selected');
                    card.setAttribute('data-selected', 'true');
                } else {
                    card.classList.remove('selected');
                    card.setAttribute('data-selected', 'false');
                }
            });
        };

        if (!radio.id) {
            radio.id = `installation_radio_${index}_${Date.now()}`;
        }
        optionCard.dataset.radioId = radio.id;
        optionCard.addEventListener('click', selectInstallation);
        optionCard.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                selectInstallation();
            }
        });
        optionCard.appendChild(label);
        
        installationWrapper.appendChild(optionCard);
    });

    // Find insert point - after section title or form group
    const sectionTitle = installationContainer.querySelector('.signup__section-title');
    const formGroup = installationContainer.querySelector('.signup__form-group');
    
    // Insert after title or form group
    if (sectionTitle) {
        if (sectionTitle.nextSibling) {
            installationContainer.insertBefore(installationWrapper, sectionTitle.nextSibling);
        } else {
            installationContainer.appendChild(installationWrapper);
        }
    } else if (formGroup) {
        if (formGroup.nextSibling) {
            installationContainer.insertBefore(installationWrapper, formGroup.nextSibling);
        } else {
            installationContainer.appendChild(installationWrapper);
        }
    } else {
        // Insert at beginning if no title
        installationContainer.insertBefore(installationWrapper, installationContainer.firstChild);
    }
});

// Make date input fields fully clickable (only label and input, not entire form-field)
function makeDateInputsClickable() {
    const dateInputs = document.querySelectorAll('.signup__situation_cos_start_date input[type="date"], .signup__situation_move_start_date input[type="date"]');
    
    dateInputs.forEach(input => {
        const label = input.closest('label');
        if (!label) return;
        
        // Remove existing click handlers if any
        label.removeEventListener('click', handleDateLabelClick);
        input.removeEventListener('click', handleDateInputClick);
        
        // Add click handler to label (which contains the input)
        label.addEventListener('click', handleDateLabelClick);
        
        // Also ensure input itself triggers calendar
        input.addEventListener('click', handleDateInputClick);
    });
}

function handleDateLabelClick(e) {
    // Only trigger if clicking on the label itself, not nested elements
    // Don't interfere with form submission or input clicks
    if (e.target === e.currentTarget) {
        const dateInput = e.currentTarget.querySelector('input[type="date"]');
        if (dateInput && typeof dateInput.showPicker === 'function') {
            dateInput.focus();
            dateInput.showPicker();
        }
    }
}

function handleDateInputClick(e) {
    // Direct click on input - open calendar
    // Don't stop propagation - let normal input behavior work
    if (this.type === 'date' && typeof this.showPicker === 'function') {
        this.showPicker();
    }
}

// Ensure calendar icons are visible and properly positioned
function ensureCalendarIconsVisible() {
    const dateLabels = document.querySelectorAll('.signup__situation_cos_start_date .signup__form-field:has(input[type="date"]) label, .signup__situation_move_start_date .signup__form-field:has(input[type="date"]) label');
    
    dateLabels.forEach(label => {
        // Ensure label has position relative for icon positioning
        if (window.getComputedStyle(label).position === 'static') {
            label.style.position = 'relative';
        }
        
        // Check if icon exists, if not, ensure it's visible via CSS
        const dateInput = label.querySelector('input[type="date"]');
        if (dateInput) {
            // Force calendar icon to be visible
            label.style.setProperty('position', 'relative', 'important');
            
            // Add placeholder "dd" functionality for empty date inputs
            // Since date inputs don't support placeholder, we'll add a data attribute and style it
            if (!dateInput.value) {
                dateInput.setAttribute('data-placeholder', 'dd');
            }
            
            // Update placeholder on change - remove old listener first to avoid duplicates
            const handleDateChange = function() {
                // Ensure value attribute is synced with actual value before form operations
                if (this.value) {
                    this.setAttribute('value', this.value);
                    this.removeAttribute('data-placeholder');
                } else {
                    // DON'T remove value attribute - it might be needed for form submission
                    // Only remove data-placeholder if value is empty
                    this.setAttribute('data-placeholder', 'dd');
                }
            };
            
            // Remove old listener if it exists (stored in data attribute)
            if (dateInput.dataset.changeHandler) {
                dateInput.removeEventListener('change', window[dateInput.dataset.changeHandler]);
            }
            
            // Store handler reference and add new listener
            const handlerName = `dateChangeHandler_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
            window[handlerName] = handleDateChange;
            dateInput.dataset.changeHandler = handlerName;
            dateInput.addEventListener('change', handleDateChange);
        }
    });
}

// Initialize situation elements (only setup, no reorganization needed - HTML is already correct)
function initializeSituationElements() {
    // COS section: Handle checkbox visibility toggle
    const cosMore = document.querySelector('.signup__situation_cos_more');
    if (cosMore) {
        const checkboxField = cosMore.querySelector('.signup__form-field--checkbox');
        const dateSection = cosMore.querySelector('.signup__situation_cos_start_date');
        
        if (checkboxField && dateSection) {
            // COS date section should be hidden by default - only show when checkbox is checked
            const checkbox = checkboxField.querySelector('input[type="checkbox"]');
            if (checkbox && !checkbox.checked) {
                dateSection.style.display = 'none';
                dateSection.style.visibility = 'hidden';
                dateSection.style.opacity = '0';
            } else if (checkbox && checkbox.checked) {
                dateSection.style.display = 'flex';
                dateSection.style.visibility = 'visible';
                dateSection.style.opacity = '1';
            }
        }
    }
    
    // Make date inputs clickable
    makeDateInputsClickable();
    
    // Ensure calendar icons are visible and properly positioned
    ensureCalendarIconsVisible();
}

// Initialize situation elements
document.addEventListener('DOMContentLoaded', () => {
    initializeSituationElements();
});
document.addEventListener('group:loaded', () => {
    initializeSituationElements();
});

// Handle COS checkbox toggle - show/hide date section
document.addEventListener('change', function(e) {
    // Handle COS checkbox toggle - show/hide date section
    if (e.target.matches('.signup__situation_cos_more input[type="checkbox"]')) {
        const dateSection = document.querySelector('.signup__situation_cos_start_date');
        if (dateSection) {
            if (e.target.checked) {
                dateSection.style.display = 'flex';
                dateSection.style.visibility = 'visible';
                dateSection.style.opacity = '1';
            } else {
                dateSection.style.display = 'none';
                dateSection.style.visibility = 'hidden';
                dateSection.style.opacity = '0';
            }
            // Update button state after toggle
            setTimeout(updateNextButtonState, 100);
        }
    }
    
    // Also initialize when situation changes
    if (e.target.matches('input[type="radio"][name*="situation"]')) {
        setTimeout(() => {
            initializeSituationElements();
        }, CONFIG.DELAY_REORGANIZE);
    }
});

// Add-on products - organize into groups with titles and descriptions
function organizeAddOnProducts(root) {
  const scope = root || document;
  const container = scope.querySelector('.signup__electrical_additional_products');
  if (!container) return;

  // Check if already organized
  if (container.querySelector('.addon-group-section')) return;

  // Find all form groups with checkboxes (valgfrie produkter)
  const formGroups = container.querySelectorAll('.signup__form-group');
  if (formGroups.length === 0) return;

  // Separate products: valgfrie (alle checkboxes) vs "ikke ladestander" (skal vÃ¦re en simpel knap)
  const optionalProducts = [];
  const hasNoChargerProducts = [];
  
  formGroups.forEach(formGroup => {
    // Check for both checkbox and radio (since we convert checkboxes to radio) and allow original name
    const checkbox = formGroup.querySelector('input[type="checkbox"], input[type="radio"][name="prospect[product_options_radio]"], input[type="radio"][name="prospect[product_options][]"]');
    if (!checkbox) return;
    
    const checkboxText = formGroup.querySelector('.signup__checkbox-text')?.textContent?.toLowerCase() || '';
    const productName = checkbox.dataset.productName?.toLowerCase() || '';
    const fullText = (checkboxText + ' ' + productName).toLowerCase();
    
    // Check if this is "ikke ladestander" product
    const isNoChargerProduct = CONFIG.KEYWORD_NO_CHARGER.some(keyword => fullText.includes(keyword));
    if (isNoChargerProduct) {
      hasNoChargerProducts.push(formGroup);
    } else {
      // All other products are optional and go in first toggle
      optionalProducts.push(formGroup);
    }
  });

  // Clear container and rebuild with groups
  container.innerHTML = '';

  // First toggle: "Jeg har elbil..." - shows all optional products
  if (optionalProducts.length > 0) {
    const section1 = document.createElement('div');
    section1.className = 'addon-group-section';

    const headerCard1 = document.createElement('div');
    headerCard1.className = 'addon-group-header';
    headerCard1.setAttribute('role', 'button');
    headerCard1.setAttribute('tabindex', '0');
    headerCard1.setAttribute('role', 'button');
    headerCard1.setAttribute('tabindex', '0');
    
    // Tooltip icon - positioned in top right corner
    const tooltipIcon1 = document.createElement('div');
    tooltipIcon1.className = 'addon-tooltip-icon';
    tooltipIcon1.setAttribute('aria-label', CONFIG.TOOLTIP_HELP_LABEL);
    tooltipIcon1.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none"><path d="M7 1.3125C5.87512 1.3125 4.7755 1.64607 3.8402 2.27102C2.90489 2.89597 2.17591 3.78423 1.74544 4.82349C1.31496 5.86274 1.20233 7.00631 1.42179 8.10958C1.64124 9.21284 2.18292 10.2263 2.97833 11.0217C3.77374 11.8171 4.78716 12.3588 5.89043 12.5782C6.99369 12.7977 8.13726 12.685 9.17651 12.2546C10.2158 11.8241 11.104 11.0951 11.729 10.1598C12.3539 9.2245 12.6875 8.12488 12.6875 7C12.6861 5.49203 12.0864 4.04623 11.0201 2.97993C9.95377 1.91363 8.50798 1.31395 7 1.3125ZM7 11.8125C6.04818 11.8125 5.11773 11.5303 4.32632 11.0014C3.53491 10.4726 2.91808 9.72103 2.55383 8.84166C2.18959 7.9623 2.09428 6.99466 2.27997 6.06113C2.46566 5.12759 2.92401 4.27009 3.59705 3.59705C4.27009 2.92401 5.1276 2.46566 6.06113 2.27997C6.99466 2.09428 7.9623 2.18958 8.84167 2.55383C9.72104 2.91808 10.4726 3.53491 11.0014 4.32632C11.5303 5.11773 11.8125 6.04818 11.8125 7C11.8111 8.27591 11.3036 9.49915 10.4014 10.4014C9.49915 11.3036 8.27591 11.8111 7 11.8125ZM7.65625 9.84375C7.65625 9.97354 7.61776 10.1004 7.54565 10.2083C7.47354 10.3163 7.37105 10.4004 7.25114 10.45C7.13122 10.4997 6.99927 10.5127 6.87197 10.4874C6.74467 10.4621 6.62774 10.3996 6.53596 10.3078C6.44419 10.216 6.38168 10.0991 6.35636 9.97178C6.33104 9.84448 6.34404 9.71253 6.39371 9.59261C6.44338 9.4727 6.52749 9.37021 6.63541 9.2981C6.74333 9.22599 6.87021 9.1875 7 9.1875C7.17405 9.1875 7.34097 9.25664 7.46404 9.37971C7.58711 9.50278 7.65625 9.6697 7.65625 9.84375ZM8.96875 5.90625C8.96875 6.35236 8.81725 6.78524 8.53905 7.13399C8.26085 7.48273 7.87246 7.72665 7.4375 7.82578V7.875C7.4375 7.99103 7.39141 8.10231 7.30936 8.18436C7.22731 8.26641 7.11603 8.3125 7 8.3125C6.88397 8.3125 6.77269 8.26641 6.69064 8.18436C6.6086 8.10231 6.5625 7.99103 6.5625 7.875V7.4375C6.5625 7.32147 6.6086 7.21019 6.69064 7.12814C6.77269 7.04609 6.88397 7 7 7C7.21633 7 7.42779 6.93585 7.60766 6.81567C7.78752 6.69549 7.92771 6.52467 8.0105 6.32481C8.09328 6.12495 8.11494 5.90504 8.07274 5.69287C8.03053 5.4807 7.92636 5.28582 7.7734 5.13285C7.62044 4.97989 7.42555 4.87572 7.21338 4.83352C7.00122 4.79131 6.7813 4.81297 6.58144 4.89576C6.38159 4.97854 6.21077 5.11873 6.09058 5.29859C5.9704 5.47846 5.90625 5.68993 5.90625 5.90625C5.90625 6.02228 5.86016 6.13356 5.77811 6.21561C5.69606 6.29766 5.58478 6.34375 5.46875 6.34375C5.35272 6.34375 5.24144 6.29766 5.15939 6.21561C5.07735 6.13356 5.03125 6.02228 5.03125 5.90625C5.03125 5.38411 5.23867 4.88335 5.60789 4.51413C5.9771 4.14492 6.47786 3.9375 7 3.9375C7.52215 3.9375 8.02291 4.14492 8.39212 4.51413C8.76133 4.88335 8.96875 5.38411 8.96875 5.90625Z" fill="black" fill-opacity="0.3"/></svg>';
    const tooltipText1 = document.createElement('div');
    tooltipText1.className = 'addon-tooltip-text';
    tooltipText1.textContent = CONFIG.TOOLTIP_TEXT_CHARGING;
    tooltipIcon1.appendChild(tooltipText1);
    headerCard1.appendChild(tooltipIcon1);
    
    const title1 = document.createElement('h3');
    title1.className = 'signup__group-title';
    title1.textContent = CONFIG.TITLE_CHARGING;
    headerCard1.appendChild(title1);

    const desc1a = document.createElement('p');
    desc1a.className = 'addon-group-description-line1';
    desc1a.textContent = CONFIG.DESC_CHARGING_LINE1;
    headerCard1.appendChild(desc1a);

    const desc1b = document.createElement('p');
    desc1b.className = 'addon-group-description-line2';
    desc1b.innerHTML = CONFIG.DESC_CHARGING_LINE2;
    headerCard1.appendChild(desc1b);

    const contentWrapper1 = document.createElement('div');
    contentWrapper1.className = 'addon-group-content addon-group-content--hidden';

    const subHeading1 = document.createElement('h4');
    subHeading1.className = 'addon-sub-heading';
    subHeading1.textContent = CONFIG.SUBHEADING_SOLUTION;
    contentWrapper1.appendChild(subHeading1);

    // Helper: select/unselect ladestander product
    const setChargerSelection = (checked) => {
      const chargerInput = optionalProducts
        .map(pg => pg.querySelector('input[type="radio"], input[type="checkbox"]'))
        .find(inp => {
          const fullText = (inp?.dataset.productName || '').toLowerCase();
          return CONFIG.KEYWORD_NO_CHARGER.some(k => fullText.includes(k)) === false;
        });
      if (chargerInput) {
        chargerInput.checked = checked;
        chargerInput.dispatchEvent(new Event('change', { bubbles: true }));
        chargerInput.dispatchEvent(new Event('input', { bubbles: true }));
      }
      // Uncheck all other add-ons when selecting charger (single choice)
      if (checked) {
        optionalProducts.forEach(pg => {
          const inp = pg.querySelector('input[type="radio"], input[type="checkbox"]');
          if (inp && inp !== chargerInput) {
            inp.checked = false;
          }
        });
      }
    };

    optionalProducts.forEach(formGroup => {
      // Make each product focusable and keyboard-activatable
      formGroup.tabIndex = 0;
      formGroup.setAttribute('role', 'button');
      formGroup.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ' || e.key === 'Spacebar') {
          e.preventDefault();
          const inp = formGroup.querySelector('input[type="radio"], input[type="checkbox"]');
          if (inp) {
            inp.click();
          }
        }
      });
      contentWrapper1.appendChild(formGroup);
    });

    const toggleContent1 = (e) => {
      // Don't toggle if clicking on tooltip icon
      if (e && e.target && e.target.closest('.addon-tooltip-icon')) {
        return;
      }
      const isOpen = !contentWrapper1.classList.contains('addon-group-content--hidden');
      contentWrapper1.classList.toggle('addon-group-content--hidden', isOpen);
      headerCard1.classList.toggle('open', !isOpen);
      headerCard1.setAttribute('aria-expanded', String(!isOpen));
      if (!isOpen) {
        const firstFocusable = contentWrapper1.querySelector('input, button, select, textarea, [tabindex]:not([tabindex="-1"])');
        if (firstFocusable) firstFocusable.focus();
      }
    };

    let suppressNextClick = false;

    headerCard1.addEventListener('click', (e) => {
      if (suppressNextClick) {
        suppressNextClick = false;
        return;
      }
      toggleContent1(e);
    });

    // Support keyboard activation (Enter/Space) on both keydown/keyup
    ['keydown', 'keyup'].forEach(evt => {
      headerCard1.addEventListener(evt, (e) => {
        if (e.key === 'Enter' || e.key === ' ' || e.key === 'Spacebar') {
          e.preventDefault();
          suppressNextClick = true; // avoid Space firing click after keydown
          if (evt === 'keydown') {
            toggleContent1(e);
          }
        }
      });
    });

    // Closed by default; updated via toggle
    headerCard1.setAttribute('aria-expanded', 'false');

    section1.appendChild(headerCard1);
    section1.appendChild(contentWrapper1);
    container.appendChild(section1);
  }

  // Second toggle: "Jeg har ikke ladestander" - simple button to continue
  const section2 = document.createElement('div');
  section2.className = 'addon-group-section';

  const headerCard2 = document.createElement('div');
  headerCard2.className = 'addon-group-header addon-group-skip-button';
  headerCard2.setAttribute('role', 'button');
  headerCard2.setAttribute('tabindex', '0');
  
  // Tooltip icon - positioned in top right corner
  const tooltipIcon2 = document.createElement('div');
  tooltipIcon2.className = 'addon-tooltip-icon';
  tooltipIcon2.setAttribute('aria-label', CONFIG.TOOLTIP_HELP_LABEL);
  tooltipIcon2.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none"><path d="M7 1.3125C5.87512 1.3125 4.7755 1.64607 3.8402 2.27102C2.90489 2.89597 2.17591 3.78423 1.74544 4.82349C1.31496 5.86274 1.20233 7.00631 1.42179 8.10958C1.64124 9.21284 2.18292 10.2263 2.97833 11.0217C3.77374 11.8171 4.78716 12.3588 5.89043 12.5782C6.99369 12.7977 8.13726 12.685 9.17651 12.2546C10.2158 11.8241 11.104 11.0951 11.729 10.1598C12.3539 9.2245 12.6875 8.12488 12.6875 7C12.6861 5.49203 12.0864 4.04623 11.0201 2.97993C9.95377 1.91363 8.50798 1.31395 7 1.3125ZM7 11.8125C6.04818 11.8125 5.11773 11.5303 4.32632 11.0014C3.53491 10.4726 2.91808 9.72103 2.55383 8.84166C2.18959 7.9623 2.09428 6.99466 2.27997 6.06113C2.46566 5.12759 2.92401 4.27009 3.59705 3.59705C4.27009 2.92401 5.1276 2.46566 6.06113 2.27997C6.99466 2.09428 7.9623 2.18958 8.84167 2.55383C9.72104 2.91808 10.4726 3.53491 11.0014 4.32632C11.5303 5.11773 11.8125 6.04818 11.8125 7C11.8111 8.27591 11.3036 9.49915 10.4014 10.4014C9.49915 11.3036 8.27591 11.8111 7 11.8125ZM7.65625 9.84375C7.65625 9.97354 7.61776 10.1004 7.54565 10.2083C7.47354 10.3163 7.37105 10.4004 7.25114 10.45C7.13122 10.4997 6.99927 10.5127 6.87197 10.4874C6.74467 10.4621 6.62774 10.3996 6.53596 10.3078C6.44419 10.216 6.38168 10.0991 6.35636 9.97178C6.33104 9.84448 6.34404 9.71253 6.39371 9.59261C6.44338 9.4727 6.52749 9.37021 6.63541 9.2981C6.74333 9.22599 6.87021 9.1875 7 9.1875C7.17405 9.1875 7.34097 9.25664 7.46404 9.37971C7.58711 9.50278 7.65625 9.6697 7.65625 9.84375ZM8.96875 5.90625C8.96875 6.35236 8.81725 6.78524 8.53905 7.13399C8.26085 7.48273 7.87246 7.72665 7.4375 7.82578V7.875C7.4375 7.99103 7.39141 8.10231 7.30936 8.18436C7.22731 8.26641 7.11603 8.3125 7 8.3125C6.88397 8.3125 6.77269 8.26641 6.69064 8.18436C6.6086 8.10231 6.5625 7.99103 6.5625 7.875V7.4375C6.5625 7.32147 6.6086 7.21019 6.69064 7.12814C6.77269 7.04609 6.88397 7 7 7C7.21633 7 7.42779 6.93585 7.60766 6.81567C7.78752 6.69549 7.92771 6.52467 8.0105 6.32481C8.09328 6.12495 8.11494 5.90504 8.07274 5.69287C8.03053 5.4807 7.92636 5.28582 7.7734 5.13285C7.62044 4.97989 7.42555 4.87572 7.21338 4.83352C7.00122 4.79131 6.7813 4.81297 6.58144 4.89576C6.38159 4.97854 6.21077 5.11873 6.09058 5.29859C5.9704 5.47846 5.90625 5.68993 5.90625 5.90625C5.90625 6.02228 5.86016 6.13356 5.77811 6.21561C5.69606 6.29766 5.58478 6.34375 5.46875 6.34375C5.35272 6.34375 5.24144 6.29766 5.15939 6.21561C5.07735 6.13356 5.03125 6.02228 5.03125 5.90625C5.03125 5.38411 5.23867 4.88335 5.60789 4.51413C5.9771 4.14492 6.47786 3.9375 7 3.9375C7.52215 3.9375 8.02291 4.14492 8.39212 4.51413C8.76133 4.88335 8.96875 5.38411 8.96875 5.90625Z" fill="black" fill-opacity="0.3"/></svg>';
  const tooltipText2 = document.createElement('div');
  tooltipText2.className = 'addon-tooltip-text';
  tooltipText2.textContent = CONFIG.TOOLTIP_TEXT_NO_CHARGER;
  tooltipIcon2.appendChild(tooltipText2);
  headerCard2.appendChild(tooltipIcon2);
  
  const title2 = document.createElement('h3');
  title2.className = 'signup__group-title';
  title2.textContent = CONFIG.TITLE_NO_CHARGER;
  headerCard2.appendChild(title2);

  const desc2 = document.createElement('p');
  desc2.className = 'addon-group-description';
  desc2.textContent = CONFIG.DESC_NO_CHARGER;
  headerCard2.appendChild(desc2);

  // Click handler: just continue to next step (no products to select)
  headerCard2.addEventListener('click', (e) => {
    // Don't trigger if clicking on tooltip icon
    if (e.target.closest('.addon-tooltip-icon')) {
      return;
    }
    // Unselect any selected optional products (ladestander)
    const optInputs = document.querySelectorAll('.signup__electrical_additional_products input[type="radio"], .signup__electrical_additional_products input[type="checkbox"]');
    optInputs.forEach(inp => {
      if (inp.checked) {
        inp.checked = false;
        inp.dispatchEvent(new Event('change', { bubbles: true }));
        inp.dispatchEvent(new Event('input', { bubbles: true }));
      }
    });
    // Clear add-on cart tracking
    if (window.addOnCart) {
      Object.keys(window.addOnCart).forEach(k => delete window.addOnCart[k]);
    }
    if (typeof updatePriceCard === 'function') {
      try { updatePriceCard(); } catch (e) {}
    }
    if (typeof updatePriceSection === 'function') {
      try { updatePriceSection(); } catch (e) {}
    }

    const nextButton = document.querySelector(CONFIG.SELECTOR_NEXT_BUTTON);
    if (nextButton && !nextButton.disabled) {
      // Force submit with empty add-on so backend clears previous selection
      const form = document.querySelector('form');
      let tempClear = null;
      if (form) {
        tempClear = document.createElement('input');
        tempClear.type = 'hidden';
        tempClear.name = 'prospect[product_options][]';
        tempClear.value = '';
        form.appendChild(tempClear);
      }
      nextButton.click();
      if (tempClear) {
        // Give the form a moment to consume the value
        setTimeout(() => {
          if (tempClear && tempClear.parentNode) {
            tempClear.parentNode.removeChild(tempClear);
          }
        }, 500);
      }
    }
  });

  headerCard2.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ' || e.key === 'Spacebar') {
      e.preventDefault();
      headerCard2.click();
    }
  });

  section2.appendChild(headerCard2);
  container.appendChild(section2);
}

// Add-on products - convert checkboxes to radio buttons so only one can be selected
function annotateAddOnCheckboxes(root) {
  const scope = root || document;
  const checkboxes = scope.querySelectorAll('input[name="prospect[product_options][]"]');
  
  // Convert all checkboxes to radio buttons with same name
  checkboxes.forEach((input, index) => {
    // Change type from checkbox to radio
    input.type = 'radio';

    // sÃ¦t class som din change lytter bruger
    input.classList.add('add_on_product_checkbox');
    // sÃ¦t id fra value
    input.dataset.productId = input.value;
    // find visningsnavn fra label
    const label = input.closest('label');
    const labelText = label ? label.textContent.trim() : '';
    // Remove checkbox text from label text to get clean product name
    const checkboxText = label?.querySelector('.signup__checkbox-text');
    const productName = checkboxText ? checkboxText.textContent.trim() : labelText;
    input.dataset.productName = productName || CONFIG.DEFAULT_UNKNOWN_PRODUCT;
    // hvis du ikke har pris, sÃ¥ sÃ¦t 0 eller hent fra et dataset hvis det findes
    if (!input.dataset.productPrice) input.dataset.productPrice = '0';
  });
  
  // Organize products into groups AFTER setting product names
  organizeAddOnProducts(root);
}

// Update next button state based on form validation
function updateNextButtonState() {
  const nextButton = document.querySelector(CONFIG.SELECTOR_NEXT_BUTTON);
  if (!nextButton) return;

  const container = document.querySelector(CONFIG.SELECTOR_GROUP_CONTAINER);
  if (!container) return;

  // Check if we're on electrical_product step (step 1) - button should be hidden but enabled for programmatic clicks
  if (container.querySelector('.signup__section--electrical_product')) {
    nextButton.disabled = false;
    return;
  }

  // Gas product step: keep enabled; button visibility handled elsewhere
  if (container.querySelector('.signup__section--gas_product')) {
    nextButton.disabled = false;
    return;
  }

  // Default: always enable; server/HTML5 handles validation
  nextButton.disabled = false;
}

// Make payment method cards fully clickable by handling clicks on the container
function movePaymentInputsToContainer(root) {
  const scope = root || document;
  const paymentSection = scope.querySelector('.signup__payment');
  if (!paymentSection) return;
  
  // Clean up any old cloned inputs from previous implementation
  const oldClonedInputs = paymentSection.querySelectorAll('input[type="radio"][data-moved-to-container]');
  oldClonedInputs.forEach(cloned => cloned.remove());
  
  const paymentCards = paymentSection.querySelectorAll('.signup__payment_method_name.signup__form-field--radio');
  
  paymentCards.forEach((card) => {
    // Find the original radio input (not already processed)
    const input = card.querySelector('input[type="radio"]:not([data-click-handler-added])');
    if (!input) return;
    
    // Mark as processed
    input.setAttribute('data-click-handler-added', 'true');
    
    // Hide original input visually but keep it functional for form submission
    input.style.position = 'absolute';
    input.style.opacity = '0';
    input.style.width = '0';
    input.style.height = '0';
    input.style.top = '0';
    input.style.left = '0';
    input.style.pointerEvents = 'none';
    
    // Make the entire card clickable
    card.style.cursor = 'pointer';
    card.style.position = 'relative';
    
    // Handle clicks on the entire card
    const handleCardClick = (e) => {
      // Don't handle if clicking directly on the input or its label
      if (e.target === input || e.target.closest('label') === input.closest('label')) {
        return;
      }
      
      e.preventDefault();
      e.stopPropagation();
      
      // Uncheck all other radio buttons with same name
      const form = card.closest('form');
      if (form) {
        const allRadios = form.querySelectorAll(`input[type="radio"][name="${input.name}"]`);
        allRadios.forEach(radio => {
          if (radio !== input) {
            radio.checked = false;
            radio.dispatchEvent(new Event('change', { bubbles: true }));
          }
        });
      }
      
      // Check this input
      input.checked = true;
      input.dispatchEvent(new Event('change', { bubbles: true }));
      input.dispatchEvent(new Event('input', { bubbles: true }));
    };
    
    // Add click handler to card
    card.addEventListener('click', handleCardClick);
    
    // Also ensure the label click still works
    const label = card.querySelector('label');
    if (label) {
      label.addEventListener('click', (e) => {
        // Let the default label behavior handle it, but also trigger our handler
        setTimeout(() => {
          if (!input.checked) {
            handleCardClick(e);
          }
        }, 0);
      });
    }
  });
}

// Debug payment method clicks
function setupPaymentMethodClickTracking(root) {
  // Debug logging removed; keep function to avoid breaking callers
  return;
}

// Kald ved domready og nÃ¥r grupper loader
document.addEventListener('DOMContentLoaded', () => {
  annotateAddOnCheckboxes();
  movePaymentInputsToContainer();
  setupPaymentMethodClickTracking();
  updateNextButtonState();
});
document.addEventListener('group:loaded', e => {
  const container = e?.detail?.container || document;
  annotateAddOnCheckboxes(container);
  movePaymentInputsToContainer(container);
  setupPaymentMethodClickTracking(container);
  updateNextButtonState();
});

// Listen for input/change events to update button state
// Use event delegation for better performance
document.addEventListener('input', updateNextButtonState, true);
document.addEventListener('change', updateNextButtonState, true);

// Also update when form validation state changes (e.g., when errors are shown/hidden)
// Use MutationObserver to watch for changes to error states
const validationObserver = new MutationObserver(() => {
  updateNextButtonState();
});

// Observe the container for changes to error classes
document.addEventListener('DOMContentLoaded', () => {
  const container = document.querySelector(CONFIG.SELECTOR_GROUP_CONTAINER);
  if (container) {
    validationObserver.observe(container, {
      attributes: true,
      attributeFilter: ['class'],
      subtree: true,
      childList: true
    });
  }
});

// Also observe when new groups are loaded
document.addEventListener('group:loaded', (e) => {
  const container = e?.detail?.container || document.querySelector(CONFIG.SELECTOR_GROUP_CONTAINER);
  if (container) {
    validationObserver.observe(container, {
      attributes: true,
      attributeFilter: ['class'],
      subtree: true,
      childList: true
    });
  }
});

window.addOnCart = window.addOnCart || {};

function getAllCartItems() {
  const main = window.selectedProduct ? [window.selectedProduct] : [];
  const addons = Object.values(window.addOnCart || {});
  const all = [...main, ...addons];
  return all.map(item => ({
    ...item,
    item_id: String(item.item_id)
  }));
}

// GTM Events
document.addEventListener('group:completed', async function(event) {
  const container = event.detail.container;
  const groupName = event.detail.completedGroup;
  const stepNumber = event.detail.stepNumber + 1; // 0-indexed

  // Log checkout progress
  const payload = {
    event: "checkout_progress",
    ecommerce: {
      checkout_step: stepNumber,
      checkout_option: { step_name: groupName }
    }
  };

  // TilfÃ¸j alle items til payload efterfÃ¸lgende
  payload.ecommerce.items = getAllCartItems();

  // Berig payload med ekstra info
  if (groupName === "situation") {
    payload.ecommerce.checkout_option.option = container.situation;
  }

  if (groupName === "installation_address") {
    payload.ecommerce.checkout_option.option = container.installation_address_mode || "unknown";
  }

  dataLayer.push(payload);

  // Log customer info when available
  if (groupName === "customer") {
    const hashedEmail = "abcd1234"; // Mocked, brug sha256(container.email) i prod
    dataLayer.push({
      event: "user_identifier",
      hashed_email: hashedEmail
    });
  }

  // Log product added to cart using productMap
  if (groupName === "electrical_product") {
    const product = window.productMap?.[container.electrical_product_id];
    if (!product) return;

    // Gem kun de felter vi skal bruge til GA4 (renset version)
    window.selectedProduct = {
      item_id: String(product.id),
      item_name: product.label,
      item_variant: product.variant,
      item_category: CONFIG.PRODUCT_CATEGORY,
      price: product.price,
      currency: CONFIG.CURRENCY,
      quantity: 1
    };

    dataLayer.push({
      event: "add_to_cart",
      ecommerce: {
        checkout_step: stepNumber,
        checkout_option: {
          step_name: groupName,
          option: container.situation
        },
        items: [window.selectedProduct]
      },
      hashed_email: "abcd1234" // Mocked, brug sha256(container.email) i prod
    });
  }

  // Log payment info + view_cart nÃ¥r man nÃ¥r payment-step
  if (groupName === "payment") {
    const mainItems = window.selectedProduct ? [window.selectedProduct] : [];
    const addOnItems = Object.values(window.addOnCart || {});
    const allItems = [...mainItems, ...addOnItems];

    // Skyd view_cart pÃ¥ payment-step
    dataLayer.push({
      event: "view_cart",
      ecommerce: { items: allItems }
    });

    // Skyd payment event
    dataLayer.push({
      event: "add_payment_info",
      ecommerce: {
        payment_type: container.payment_type,
        items: allItems
      }
    });
  }

  // Purchase pÃ¥ permissions-step
  if (groupName === "permissions") {
    const mainItems = window.selectedProduct ? [window.selectedProduct] : [];
    const addOnItems = Object.values(window.addOnCart || {});
    const allItems = [...mainItems, ...addOnItems];
    const totalValue = allItems.reduce((sum, it) => sum + (parseFloat(it.price) || 0), 0);

    dataLayer.push({
      event: "purchase",
      ecommerce: {
        transaction_id: container.signup_id || CONFIG.DEFAULT_UNKNOWN,
        affiliation: container.affiliate || CONFIG.DEFAULT_AFFILIATE,
        value: totalValue,
        currency: CONFIG.CURRENCY,
        items: allItems
      }
    });
  }
});


document.addEventListener('change', function(e) {
  if (!e.target.matches('.add_on_product_checkbox')) return;

  const el = e.target;
  const isChecked = el.checked;
  const productId = String(el.dataset.productId || el.value);
  const productName = el.dataset.productName || CONFIG.DEFAULT_UNKNOWN_PRODUCT;
  const productPrice = parseFloat(el.dataset.productPrice || '0');

  const item = {
    item_id: productId,
    item_name: productName,
    price: productPrice,
    currency: CONFIG.CURRENCY,
    quantity: 1
  };

  // Since these are now radio buttons, clear all previous selections first
  if (isChecked) {
    // Clear all previous selections from cart
    Object.keys(window.addOnCart).forEach(key => {
      delete window.addOnCart[key];
    });
    // Add the newly selected item
    window.addOnCart[productId] = item;
    
    // Remove 'remove_from_cart' events for other items
    // Only send add_to_cart for the selected item
    dataLayer.push({
      event: 'add_to_cart',
      ecommerce: { items: [item] }
    });
  } else {
    // If unchecked (shouldn't happen with radio, but handle it)
    delete window.addOnCart[productId];
  dataLayer.push({
      event: 'remove_from_cart',
    ecommerce: { items: [item] }
  });
  }
});

// Payment method cards - styling handled by CSS, no JS manipulation needed

// SHA256 helper
async function sha256(str) {
    const buffer = new TextEncoder("utf-8").encode(str.trim().toLowerCase());
    const hashBuffer = await crypto.subtle.digest("SHA-256", buffer);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map(b => b.toString(16).padStart(2, "0")).join("");
}

// Initialize tooltip handles - convert signup__tooltip-handle spans to tooltip icons
function initializeTooltipHandles() {
    const tooltipHandles = document.querySelectorAll('.signup__tooltip-handle[data-tooltip]');
    
    tooltipHandles.forEach(handle => {
        const tooltipText = handle.getAttribute('data-tooltip');
        if (!tooltipText) return;
        
        // Set aria-label
        handle.setAttribute('aria-label', CONFIG.TOOLTIP_HELP_LABEL);
        
        // Add question text inside the handle, before the icon
        if (!handle.querySelector('.signup__tooltip-question')) {
            const questionText = document.createElement('span');
            questionText.className = 'signup__tooltip-question';
            questionText.textContent = 'Hvorfor skal i bruge mit CPR nummer?';
            handle.insertBefore(questionText, handle.firstChild);
        }
        
        // Add SVG icon if not already present
        if (!handle.querySelector('svg')) {
            const svgIcon = document.createElement('span');
            svgIcon.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none"><path d="M7 1.3125C5.87512 1.3125 4.7755 1.64607 3.8402 2.27102C2.90489 2.89597 2.17591 3.78423 1.74544 4.82349C1.31496 5.86274 1.20233 7.00631 1.42179 8.10958C1.64124 9.21284 2.18292 10.2263 2.97833 11.0217C3.77374 11.8171 4.78716 12.3588 5.89043 12.5782C6.99369 12.7977 8.13726 12.685 9.17651 12.2546C10.2158 11.8241 11.104 11.0951 11.729 10.1598C12.3539 9.2245 12.6875 8.12488 12.6875 7C12.6861 5.49203 12.0864 4.04623 11.0201 2.97993C9.95377 1.91363 8.50798 1.31395 7 1.3125ZM7 11.8125C6.04818 11.8125 5.11773 11.5303 4.32632 11.0014C3.53491 10.4726 2.91808 9.72103 2.55383 8.84166C2.18959 7.9623 2.09428 6.99466 2.27997 6.06113C2.46566 5.12759 2.92401 4.27009 3.59705 3.59705C4.27009 2.92401 5.1276 2.46566 6.06113 2.27997C6.99466 2.09428 7.9623 2.18958 8.84167 2.55383C9.72104 2.91808 10.4726 3.53491 11.0014 4.32632C11.5303 5.11773 11.8125 6.04818 11.8125 7C11.8111 8.27591 11.3036 9.49915 10.4014 10.4014C9.49915 11.3036 8.27591 11.8111 7 11.8125ZM7.65625 9.84375C7.65625 9.97354 7.61776 10.1004 7.54565 10.2083C7.47354 10.3163 7.37105 10.4004 7.25114 10.45C7.13122 10.4997 6.99927 10.5127 6.87197 10.4874C6.74467 10.4621 6.62774 10.3996 6.53596 10.3078C6.44419 10.216 6.38168 10.0991 6.35636 9.97178C6.33104 9.84448 6.34404 9.71253 6.39371 9.59261C6.44338 9.4727 6.52749 9.37021 6.63541 9.2981C6.74333 9.22599 6.87021 9.1875 7 9.1875C7.17405 9.1875 7.34097 9.25664 7.46404 9.37971C7.58711 9.50278 7.65625 9.6697 7.65625 9.84375ZM8.96875 5.90625C8.96875 6.35236 8.81725 6.78524 8.53905 7.13399C8.26085 7.48273 7.87246 7.72665 7.4375 7.82578V7.875C7.4375 7.99103 7.39141 8.10231 7.30936 8.18436C7.22731 8.26641 7.11603 8.3125 7 8.3125C6.88397 8.3125 6.77269 8.26641 6.69064 8.18436C6.6086 8.10231 6.5625 7.99103 6.5625 7.875V7.4375C6.5625 7.32147 6.6086 7.21019 6.69064 7.12814C6.77269 7.04609 6.88397 7 7 7C7.21633 7 7.42779 6.93585 7.60766 6.81567C7.78752 6.69549 7.92771 6.52467 8.0105 6.32481C8.09328 6.12495 8.11494 5.90504 8.07274 5.69287C8.03053 5.4807 7.92636 5.28582 7.7734 5.13285C7.62044 4.97989 7.42555 4.87572 7.21338 4.83352C7.00122 4.79131 6.7813 4.81297 6.58144 4.89576C6.38159 4.97854 6.21077 5.11873 6.09058 5.29859C5.9704 5.47846 5.90625 5.68993 5.90625 5.90625C5.90625 6.02228 5.86016 6.13356 5.77811 6.21561C5.69606 6.29766 5.58478 6.34375 5.46875 6.34375C5.35272 6.34375 5.24144 6.29766 5.15939 6.21561C5.07735 6.13356 5.03125 6.02228 5.03125 5.90625C5.03125 5.38411 5.23867 4.88335 5.60789 4.51413C5.9771 4.14492 6.47786 3.9375 7 3.9375C7.52215 3.9375 8.02291 4.14492 8.39212 4.51413C8.76133 4.88335 8.96875 5.38411 8.96875 5.90625Z" fill="black" fill-opacity="0.3"/></svg>';
            handle.appendChild(svgIcon);
        }
        
        // Add tooltip text if not already present
        if (!handle.querySelector('.tooltip-text')) {
            const tooltipTextDiv = document.createElement('div');
            tooltipTextDiv.className = 'tooltip-text';
            tooltipTextDiv.textContent = tooltipText;
            handle.appendChild(tooltipTextDiv);
        }
    });
}

// Initialize tooltip handles on DOMContentLoaded
document.addEventListener('DOMContentLoaded', initializeTooltipHandles);

// Also initialize when group:loaded event fires (for dynamically loaded content)
document.addEventListener('group:loaded', initializeTooltipHandles);

// Price-card
(function () {
  function ensurePriceCard() {
    if (document.getElementById("price-card")) return;

    const card = document.createElement("div");
    card.id = "price-card";
    card.setAttribute("aria-live", "polite");
    card.style.display = "none"; // hidden by default
    card.innerHTML = `
      <div class="price-card__inner">
        <div class="price-card__label">Din pris</div>
        <div class="price-card__amount">
          <span id="price-card-value">â</span><span class="price-card__currency">,-</span>
        </div>
        <div class="price-card__sub">Pr. mÃ¥ned alt inkluderet</div>
      </div>
    `;
    document.body.appendChild(card);
  }

  function getCheckedElectricalRadio() {
    return document.querySelector(
      'input[type="radio"][name="prospect[electrical_product_name]"]:checked'
    );
  }

  function showCardIfSelected() {
    const card = document.getElementById("price-card");
    if (!card) return;

    const stored = loadStoredSelectedProduct();
    card.style.display = stored ? "block" : "none";
  }

  function ensurePriceSection() {
    const summary = document.querySelector('.signup__summary');
    if (!summary) return null;
    
    // Check if price section already exists
    let priceSection = summary.querySelector('section.summary-price-section');
    if (priceSection) return priceSection;
    
    // Create new price section - compact format matching design
    priceSection = document.createElement('section');
    priceSection.className = 'summary-price-section';
    priceSection.innerHTML = `
      <h3>Din pris</h3>
      <div class="row">
        <div class="col-md-10">
          <span id="summary-price-value">â</span><span class="summary-price-currency">,-</span>
        </div>
      </div>
    `;
    
    // Insert after "Valgte produkter" section (4th section) or before Kundeoplysninger (1st section)
    const valgteProdukter = summary.querySelector('section:nth-of-type(4)');
    const kundeoplysninger = summary.querySelector('section:nth-of-type(1)');
    
    if (valgteProdukter && valgteProdukter.nextSibling) {
      summary.insertBefore(priceSection, valgteProdukter.nextSibling);
    } else if (kundeoplysninger) {
      summary.insertBefore(priceSection, kundeoplysninger);
    } else {
      summary.appendChild(priceSection);
    }
    
    return priceSection;
  }


  function updatePriceSection() {
    const summary = document.querySelector('.signup__summary');
    if (!summary) {
      // Summary not yet rendered, try again later
      setTimeout(updatePriceSection, 200);
      return;
    }
    
    
    const priceSection = ensurePriceSection();
    if (!priceSection) return;
    
    const valueEl = priceSection.querySelector('#summary-price-value');
    if (!valueEl) return;
    
    let stored = loadStoredSelectedProduct();
    
    // If no stored product, try to get it from form or checked radio
    if (!stored) {
      const checkedRadio = getCheckedElectricalRadio();
      if (checkedRadio && checkedRadio.dataset.productId) {
        storeSelectedProductFromId(checkedRadio.dataset.productId);
        stored = loadStoredSelectedProduct();
      }
      
      // Also try to get from hidden input if available
      if (!stored) {
        const hiddenInput = document.querySelector('input[name="prospect[electrical_product_id]"]:not([disabled])');
        if (hiddenInput && hiddenInput.value) {
          storeSelectedProductFromId(hiddenInput.value);
          stored = loadStoredSelectedProduct();
        }
      }
      
      // Also try to extract from summary HTML if product info is shown there
      if (!stored && summary) {
        const valgteProdukterSection = summary.querySelector('section:nth-of-type(4)');
        if (valgteProdukterSection) {
          const productText = valgteProdukterSection.textContent || '';
          // Try to find product ID from any data attributes in the summary
          const productLink = valgteProdukterSection.querySelector('[data-product-id]');
          if (productLink && productLink.dataset.productId) {
            storeSelectedProductFromId(productLink.dataset.productId);
            stored = loadStoredSelectedProduct();
          }
        }
      }
    }
    
    if (!stored) {
      // Only hide if price section doesn't already have a valid price displayed
      const currentPriceText = valueEl.textContent;
      if (currentPriceText === "â" || currentPriceText === "" || currentPriceText === null) {
      priceSection.style.display = 'none';
      }
      return;
    }
    
    const price = computeMonthlyPrice();
    const priceText = price > 0 ? Math.round(price).toString() : "â";
    
    // Only update if price has changed
    if (valueEl.textContent === priceText && priceSection.style.display !== 'none') {
      return; // Already correct, no need to update
    }
    
    valueEl.textContent = priceText;
    priceSection.style.display = '';
  }

  function updatePriceCard() {
    ensurePriceCard();

    const valueEl = document.getElementById("price-card-value");
    if (!valueEl) return;

    const stored = loadStoredSelectedProduct();
    if (!stored) {
      showCardIfSelected();
      return;
    }

    const price = computeMonthlyPrice();
    valueEl.textContent = price > 0 ? Math.round(price) : "â";
    showCardIfSelected();
  }

  // Initial load: create card + restore selection + show if exists
  document.addEventListener("DOMContentLoaded", () => {
    ensurePriceCard();
    
    // Populate PRICE_MAP from radio buttons before using it
    populatePriceMapFromRadios();

    // If some radio is checked on initial render, store it
    const checked = getCheckedElectricalRadio();
    if (checked) storeSelectedProductFromId(checked.dataset.productId);

    updatePriceCard();
  });

  // After each group load
  document.addEventListener("group:loaded", () => {
    ensurePriceCard();

    const checked = getCheckedElectricalRadio();
    if (checked) storeSelectedProductFromId(checked.dataset.productId);

    updatePriceCard();
  });

  // Ensure product set if set on prospect
  document.addEventListener("group:completed", async function(event) {
    ensurePriceCard();

    pid = event.detail.container.electrical_product_id;
    if (pid != null) storeSelectedProductFromId(pid);

    updatePriceCard();
  });

  // When radios change
  document.addEventListener("change", (e) => {
    if (e.target.matches('input[type="radio"][name="prospect[electrical_product_name]"]')) {
      storeSelectedProductFromId(e.target.dataset.productId);
      updatePriceCard();
    }

    if (e.target.matches(".add_on_product_checkbox")) {
      updatePriceCard();
    }
  });

  // When custom image options are clicked, the radio changes inside select()
  document.addEventListener("click", (e) => {
    if (e.target.closest(".signup__electrical_product")) {
      setTimeout(() => {
        const checked = getCheckedElectricalRadio();
        storeSelectedProductFromId(checked.dataset.productId);
        updatePriceCard();
      }, 0);
    }
  });

  // Watch for summary section being added to DOM (optimized to only check for summary element)
  let summaryUpdateTimeout = null;
  let observerActive = true;
  
  const observer = new MutationObserver((mutations) => {
    // Only process if observer is still active
    if (!observerActive) return;
    
    // Check if summary element was added in this batch of mutations
    let summaryAdded = false;
    for (const mutation of mutations) {
      for (const node of mutation.addedNodes) {
        if (node.nodeType === 1) { // Element node
          if (node.classList?.contains('signup__summary') || node.querySelector?.('.signup__summary')) {
            summaryAdded = true;
            break;
          }
        }
      }
      if (summaryAdded) break;
    }
    
    // Only proceed if summary was actually added
    if (!summaryAdded) return;
    
    // Debounce: only update once per batch of mutations
    if (summaryUpdateTimeout) {
      clearTimeout(summaryUpdateTimeout);
    }
    
    summaryUpdateTimeout = setTimeout(() => {
      const summary = document.querySelector('.signup__summary');
      if (summary && summary.offsetParent !== null) {
        // Try to get product from form if not already stored
        if (!loadStoredSelectedProduct()) {
          const checkedRadio = getCheckedElectricalRadio();
          if (checkedRadio && checkedRadio.dataset.productId) {
            storeSelectedProductFromId(checkedRadio.dataset.productId);
          } else {
            // Try hidden input
            const hiddenInput = document.querySelector('input[name="prospect[electrical_product_id]"]:not([disabled])');
            if (hiddenInput && hiddenInput.value) {
              storeSelectedProductFromId(hiddenInput.value);
            }
          }
        }
        
        updatePriceSection();
        
        // Stop observing once summary is found and price is updated
        // Check if price was successfully set
        setTimeout(() => {
          const priceSection = summary.querySelector('section.summary-price-section');
          const valueEl = priceSection?.querySelector('#summary-price-value');
          if (priceSection && valueEl && valueEl.textContent !== "â" && valueEl.textContent !== "") {
            observer.disconnect();
            observerActive = false;
          }
        }, 500);
      }
      summaryUpdateTimeout = null;
    }, 300);
  });

  // Start observing when DOM is ready, but only watch for summary container
  if (document.body) {
    observer.observe(document.body, {
      childList: true,
      subtree: false // Only watch direct children, not all descendants
    });
  } else {
    document.addEventListener('DOMContentLoaded', () => {
      observer.observe(document.body, {
        childList: true,
        subtree: false
      });
    });
  }

  // DEV MODE: Skip to summary step with real data (midlertidig lÃ¸sning)
  // Brug: Ãbn console og skriv: window.skipToSummary()
  window.skipToSummary = async function() {
    try {
      // Find form og container
      const form = document.querySelector('form');
      const container = document.getElementById('group-container');
      
      if (!form || !container) {
        return;
      }

      // Hent permissions group direkte fra serveren (indeholder summary med retvisende data)
      const formData = new FormData(form);
      formData.set('current_group', 'permissions');
      
      const response = await fetch('/prospects/fast-pris-flow-test/group?group=permissions', {
        method: 'GET',
        headers: {'Accept': 'text/html'}
      });

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const html = await response.text();
      container.innerHTML = html;

      // Trigger events sÃ¥ alt initialiseres korrekt
      document.dispatchEvent(new CustomEvent('group:loaded', { detail: { container } }));
      
      // Opdater progress bar
      const progressBar = document.getElementById('progress-bar');
      const progressText = document.getElementById('progress-text');
      if (progressBar && progressText) {
        progressBar.style.width = '100%';
        progressText.textContent = 'Trin 7 af 7';
      }

      // Skjul next button eller opdater den
      const nextButton = document.getElementById('next-button');
      if (nextButton) {
        nextButton.value = 'Finish';
      }

    } catch (error) {
      alert('Kunne ikke loade summary. Tjek console for fejl.');
    }
  };
})();
</script>

    <meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="j5Ix+oiJcB1rJFkTfbahHhLj4A85ZxRrv/WvQ8S4RfOjcVDsj2Csss4XWG3iJhNTisdAd9+sv4EAxHjDtI6MuA==" />
    <title></title>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PCP5NVXZ');</script>
    <!-- End Google Tag Manager -->
    <!-- TrustBox script -->
    <script type="text/javascript" src="//widget.trustpilot.com/bootstrap/v5/tp.widget.bootstrap.min.js" async></script>
    <!-- End TrustBox script -->
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PCP5NVXZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

<div class="signup__page">

    <h1 class="signup__form-title">
        <span></span>
    </h1>


      <div class="hero">
        <p><img src="https://raw.githubusercontent.com/Sarahtlenglish/test-ENLY/main/img/ENLY_Logo_Yellow_RGB.svg"></p>  <div class="topnav">
    <ul>
      <li class=""><a href="https://kunde.gronelforsyning.dk/sign_in">Mit Enly</a></li>
      <li class=""><a href="https://gronelforsyning.dk/kundeservice/">Bliv ringet op</a></li>
    </ul>
  </div>

      </div>

    <form action="https://tilmeld.gronelforsyning.dk/signup/flow-test" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="no5LM7LbRzUXWhZ0RVlgmoytRYyvO6mHJILCugGt1XWybSoltTKbmrJpFwraydLXFInl9EnwAm2bsxU6cZscPg==" />
    <input type="hidden" name="prospect[identifier]" id="prospect_identifier" value="769bc93bd106b790f1c9a2a497863663" />


        <input type="hidden" name="prospect[identifier]" id="prospect_identifier" value="769bc93bd106b790f1c9a2a497863663" />


<div id="progress-container">
  <div id="progress-text">
    Trin 1 af 8
  </div>
  <div class="progress-background">
    <div id="progress-bar"></div>
  </div>
</div>

<div id="group-container">
  <div class="signup__form-section signup__section--customer">
  <h1 class="signup__section-title">Hvem skal vi tilmelde?</h1>

  <div class="signup__customer signup__form-group">
      <div class="signup__first_name signup__form-field signup__form--required">
  <label class="signup__has-error" data-bind="error-message-container">
    <span>
      Fornavn
    </span>
    <input type="text" name="prospect[first_name]" id="prospect_first_name" placeholder="Jens" />
<p class="signup__error-message">Fornavn skal udfyldes</p></label>  
</div>


      <div class="signup__last_name signup__form-field signup__form--required">
  <label class="signup__has-error" data-bind="error-message-container">
    <span>
      Efternavn
    </span>
    <input type="text" name="prospect[last_name]" id="prospect_last_name" placeholder="Jensen" />
<p class="signup__error-message">Efternavn skal udfyldes</p></label>  
</div>


      <div class="signup__phone signup__form-field signup__form--required">
  <label class="signup__has-error" data-bind="error-message-container">
    <span>
      Mobil-telefonnummer
    </span>
    <input type="text" name="prospect[phone]" id="prospect_phone" placeholder="12345678" />
<p class="signup__error-message">Telefonnummer skal udfyldes</p></label>  
</div>


      <div class="signup__email signup__form-field signup__form--required">
  <label class="signup__has-error" data-bind="error-message-container">
    <span>
      E-mail adresse
    </span>
    <input type="text" name="prospect[email]" id="prospect_email" placeholder="jens@jensen.dk" />
<p class="signup__error-message">Email skal udfyldes</p></label>  
</div>


  </div>
  <div class="signup__customer signup__form-group">
      <div class="signup__cpr signup__form-field signup__form--required">
  <label class="signup__has-error" data-bind="error-message-container">
    <span>
      CPR
        <span class="signup__tooltip-handle" data-bind="tooltip" data-tooltip="Vi bruger dit CPR-nummer til at sikre, at din aftale bliver koblet til den rigtige adresse og folkeregisteroplysninger."></span>
    </span>
    <input type="text" name="prospect[cpr]" id="prospect_cpr" value="" placeholder="123456-1234" autocomplete="new-password" data-bind="copy-value" data-target="input[data-copy-target=&#39;cpr&#39;]" />
<p class="signup__error-message">CPR-nummer skal udfyldes</p></label>  <span class="signup__form-help">E-mail adressen er ogsÃ¥ dit brugernavn pÃ¥ din konto hos os, derfor kan du ikke genbruge emailen hvis tilmelder flere adresser. Hvis du vil tilmelde flere adresser pÃ¥ samme konto skal du blot logge ind pÃ¥ din konto og derefter tilmelde den ekstra adresse.</span>
</div>


  </div>

</div>

</div>

<input type="hidden" name="step_submit" id="step_submit" value="true" />

<div class="actions">
  <input type="submit" name="commit" value="Back" id="back-button" />
  <input type="submit" name="commit" value="Next" id="next-button" />
</div>

<input type="hidden" name="prospect[perform]" id="prospect_perform" value="false" />

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const form = document.querySelector("form");
        const nextButton = document.getElementById("next-button");
        const backButton = document.getElementById("back-button");
        const performField = document.getElementById("prospect_perform");
        const stepSubmitField = document.getElementById("step_submit");

        const groups = ["electrical_product","situation","customer","installation_address","gas_product","electrical_product_additional","permissions","payment"];

        // Initialize currentIndex from the server-rendered group
        let currentIndex = groups.indexOf("customer");
        if (currentIndex < 0) currentIndex = 0;

        // Progress bar
        const progressBar = document.getElementById("progress-bar");
        const progressText = document.getElementById("progress-text");

        function updateProgress() {
            const total = groups.length;
            const step = currentIndex + 1;
            const percent = (step / total) * 100;
            progressBar.style.width = percent + "%";
            progressText.textContent = `Trin ${step} af ${total}`;
        }

        // Container references
        const container = document.getElementById("group-container");
        document.dispatchEvent(new CustomEvent('group:loaded', { detail: { container } }));

        // Init behaviours for the server-rendered group
        initDawaAutocomplete(container);
        initToggleRadios(container);
        initToggleChecks(container);
        updateProgress();

        // Set initial Back visibility and Next label
        backButton.style.display = currentIndex === 0 ? "none" : "inline-block";
        nextButton.value = currentIndex === groups.length - 1 ? "Finish" : "Next";

        async function loadGroup(index) {
            const groupHtml = await fetch(
                "/prospects/flow-test/group?group=" + groups[index],
                {headers: {"Accept": "text/html"}}
            ).then(res => res.text());

            container.innerHTML = groupHtml;

            initDawaAutocomplete(container);
            initToggleRadios(container);
            initToggleChecks(container);
            updateProgress();

            // Update back button visibility
            backButton.style.display = index === 0 ? "none" : "inline-block";
            nextButton.value = index === groups.length - 1 ? "Finish" : "Next";

            document.dispatchEvent(new CustomEvent('group:loaded', { detail: { container } }));
        }

        async function submitStep() {
            const formData = new FormData(form);

            // Ensure current group is included in submission
            formData.set("current_group", groups[currentIndex]);

            // Determine flags
            const lastStep = currentIndex === groups.length - 1;
            performField.value = lastStep ? "true" : "false";
            stepSubmitField.value = "true"; // always submit step when navigating

            const response = await fetch(form.action, {
                method: "POST",
                body: formData,
                headers: {"Accept": "application/json"}
            });

            if (response.ok) {
                const data = await response.json(); // get JSON from server
                const updatedProspect = data.prospect; // this is the latest prospect

                document.dispatchEvent(new CustomEvent('group:completed', { detail: { container: updatedProspect, stepNumber: currentIndex, completedGroup: groups[currentIndex] } }));

                return true;
            } else if (response.status === 422) {
                const data = await response.json();
                container.innerHTML = data.html;

                // Re-init behaviours
                initDawaAutocomplete(container);
                initToggleRadios(container);
                initToggleChecks(container);

                return false;
            } else {
                alert("Der opstod en fejl. PrÃ¸v igen senere.");
                return false;
            }
        }

        nextButton.addEventListener("click", async (e) => {
            e.preventDefault();

            const success = await submitStep();

            if (!success) return;

            if (currentIndex < groups.length - 1) {
                currentIndex++;
                await loadGroup(currentIndex);  // move to next group, no full form submit
            } else {
                // Last step: actually submit the full form
                form.submit();
            }
        });

        backButton.addEventListener("click", async (e) => {
            e.preventDefault();

            if (currentIndex === 0) return;

            currentIndex--;
            await loadGroup(currentIndex);

            // Reset flags
            performField.value = "false";
            stepSubmitField.value = "true";
            nextButton.value = "Next";
        });

        function goToGroupByName(groupName) {
            const index = groups.indexOf(groupName);
            if (index === -1) return;

            currentIndex = index;

            loadGroup(currentIndex);
        }

        // Event delegation for summary links
        document.addEventListener("click", (e) => {
            const link = e.target.closest(".js-go-to-step[data-go-to-group]");
            if (!link) return;

            e.preventDefault();
            const groupName = link.dataset.goToGroup;
            goToGroupByName(groupName);
        });
    });
</script>


</form>

</div>

<script type="text/yaml" id="error-messages">---
- Fornavn skal udfyldes
- Efternavn skal udfyldes
- Email skal udfyldes
- Telefonnummer skal udfyldes
- CPR-nummer skal udfyldes
</script>





  <!-- TrustBox widget - Flex -->
  <div class="trustpilot-widget" data-locale="da-DK" data-template-id="54197383fd9dceac42a68694" data-businessunit-id="60b8052056c54a000191a9ca"  data-style-width="100%" data-style-size="S" data-token="c864d33f-3b72-4a52-8427-27466b8250aa" data-text-color="dark" data-headline="review-number" data-support-text="star" data-background="none" data-external-elements-color="dark">
    <a href="https://dk.trustpilot.com/review/gronelforsyning.dk" target="_blank" rel="noopener">Trustpilot</a>
  </div>
  <!-- End TrustBox widget -->

</body>
</html>
